<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>الدرس 8: زمن المستقبل، صيغ المقارنة، والجمل الشرطية</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Arabic:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --kurdish-red: #9E2A2B;
            --kurdish-yellow: #F5CB5C;
            --background-cream: #FFF7E0;
            --text-color: #333333;
            --kurdish-green: #4F7942;
            --light-green: #E5F0E3;
        }

        body {
            font-family: 'Noto Sans Arabic', 'Nunito', Arial, sans-serif; /* Prioritize Arabic font */
            line-height: 1.7;
            max-width: 800px;
            margin: 0 auto;
            padding: 15px;
            background-color: var(--background-cream);
            background-image: url('../kurmanji_background.png');
            background-repeat: repeat;
            background-size: 200px 200px;
            box-sizing: border-box;
            color: var(--text-color);
            direction: rtl; /* Set Right-to-Left direction */
            text-align: right; /* Default text alignment for RTL */
        }

        * {
            box-sizing: border-box;
        }

        .title-section {
            background-color: #005E30;
            color: white;
            padding: 25px;
            margin-bottom: 25px;
            border-radius: 12px;
            position: relative;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            text-align: right; /* Ensure title section is right-aligned */
        }

        .title-section h1 {
            color: white;
            margin: 0;
            text-align: right; /* Ensure H1 in title section is right-aligned */
        }

        .title-section hr {
            background-color: var(--kurdish-yellow);
            height: 4px;
            margin-top: 15px;
            margin-bottom: 0;
            border: none;
        }

        h1, h2, h3 {
            color: var(--kurdish-red);
            font-weight: 700;
            line-height: 1.3;
            text-align: right; /* Ensure headings are right-aligned */
        }

        h1 {
            font-size: 1.8rem;
            margin-bottom: 5px;
        }

        h2 {
            font-size: 1.5rem;
            margin-top: 30px;
        }

        h3 {
            font-size: 1.2rem;
            margin-top: 25px;
        }

        hr {
            border: none;
            height: 3px;
            background-color: var(--kurdish-yellow);
            margin-bottom: 25px;
        }

        .section {
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.05);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            direction: rtl; /* Ensure table content is RTL */
        }

        th, td {
            padding: 12px 15px;
            text-align: right; /* Align table text to the right */
            border: none;
        }

        th {
            background-color: var(--kurdish-yellow);
            color: var(--text-color);
            font-weight: 600;
        }

        tr:nth-child(even) {
            background-color: var(--background-cream);
        }
         tr:nth-child(odd) {
            background-color: #FEFDFB;
        }

        tr:hover {
            background-color: #FFEEB4;
        }

        .note {
            background-color: #FFF2C2;
            padding: 15px;
            border-right: 4px solid var(--kurdish-yellow); /* Changed from border-left */
            margin: 20px 0;
            border-radius: 8px 0 0 8px; /* Adjusted border-radius for RTL */
        }

        .highlight {
            font-weight: 700;
            color: var(--kurdish-red);
        }

        .examples {
            background-color: var(--background-cream);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            text-align: right; /* Ensure examples are right-aligned */
        }

        .examples p:not(:first-of-type) {
            margin: 10px 0;
            padding: 10px;
            border-radius: 6px;
        }

        /* Alternating background colors for example sentences */
        .examples p:nth-of-type(even) {
            background-color: #FFF2C2;
        }

        .examples p:nth-of-type(odd):not(:first-of-type) {
            background-color: #FBEAA6;
        }

        .exercise {
            background-color: var(--light-green);
            padding: 20px;
            border-radius: 8px;
            margin: 25px 0;
        }

        .check-btn {
            background-color: var(--kurdish-yellow);
            color: var(--text-color);
            border: none;
            padding: 10px 15px;
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.2s ease;
            font-family: inherit;
            font-weight: 600;
            margin-top: 10px;
        }

        .check-btn:hover {
            background-color: #DBA53A;
        }

        .feedback {
            margin-top: 8px;
            margin-right: 5px; /* Changed from margin-left */
            font-weight: bold;
            min-height: 1.5em;
            text-align: right; /* Ensure feedback is right-aligned */
        }

        .correct {
            color: #4F7942;
        }

        .incorrect {
            color: var(--kurdish-red);
        }
         .correct-answer-display {
             display: inline-block;
             margin-right: 5px; /* Changed from margin-left */
             font-weight: normal;
             font-style: italic;
             color: #555;
         }


        /* Matching Game Styles */
        .matching-game {
            background-color: var(--background-cream);
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
            margin-bottom: 25px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        .matching-container {
            display: flex;
            justify-content: space-between;
            gap: 15px;
            margin-bottom: 20px;
            flex-direction: row-reverse; /* Reverse column order for RTL */
        }
        .matching-column {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
         .matching-item-container {
             display: flex;
             flex-direction: column;
             gap: 10px;
         }
        .matching-item {
            padding: 12px 15px;
            background-color: white;
            border: 2px solid var(--kurdish-yellow);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: center;
            -webkit-tap-highlight-color: transparent;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            font-weight: 500;
        }
        .matching-item:hover { background-color: #FFF2C2; }
        .matching-item.selected {
            background-color: var(--kurdish-yellow);
            color: var(--text-color);
            border-color: #DBA53A;
        }
        .matching-item.matched {
            background-color: #4F7942;
            color: white;
            border-color: #3B5A31;
            cursor: default;
            opacity: 0.7;
        }
        .matching-result { text-align: center; margin-top: 15px; }
        .matching-feedback {
            font-weight: bold;
            margin-bottom: 12px;
            min-height: 1.5em;
            text-align: right; /* Ensure matching feedback is right-aligned */
        }
        .matching-feedback.correct { color: var(--kurdish-green); }
        .matching-feedback.incorrect { color: var(--kurdish-red); }
        .match-progress {
            margin-bottom: 15px;
            font-weight: 600;
            color: var(--text-color);
            text-align: right; /* Ensure progress text is right-aligned */
        }
         .match-progress .matches-count { font-weight: 700; }


        /* Fill-in Exercise (Subjunctive - Style EXACTLY like Ukrainian Ex 3) */
        .fill-exercise {
             background-color: var(--light-green);
             padding: 20px;
             border-radius: 8px;
             margin: 25px 0;
         }
         .fill-item {
             background-color: white;
             margin-bottom: 20px;
             padding: 15px;
             border-radius: 8px;
             box-shadow: 0 2px 4px rgba(0,0,0,0.1);
         }
         .exercise-row {
             display: flex;
             align-items: baseline;
             gap: 8px;
             margin-bottom: 10px;
             flex-wrap: wrap;
             color: var(--text-color);
             font-weight: 500;
             line-height: 1.8;
             direction: rtl; /* Ensure exercise row is RTL */
             justify-content: flex-end; /* Align items to the right in RTL */
         }
         .fill-input {
             width: 150px;
             padding: 8px 12px;
             border: 2px solid var(--kurdish-yellow);
             border-radius: 6px;
             font-size: 16px;
             font-family: inherit;
             margin: 0 5px;
             background-color: #f8f8f8;
             text-align: center;
         }
         .fill-input:focus { outline: none; }
         .verb-hint {
             font-size: 0.9em;
             color: #555;
             margin-right: 5px; /* Changed from margin-left */
         }
         .key-container {
             display: flex;
             flex-wrap: wrap;
             gap: 8px;
             margin-bottom: 12px;
             margin-top: 8px;
             justify-content: flex-end; /* Align keys to the right in RTL */
         }
         .key-btn {
             padding: 5px 12px;
             background-color: var(--background-cream);
             border: 1px solid var(--kurdish-yellow);
             border-radius: 6px;
             cursor: pointer;
             color: var(--text-color);
             font-size: 0.9em;
             font-family: inherit;
             text-align: center;
         }
         .key-btn:hover { background-color: var(--kurdish-yellow); }
         .fill-check {
             background-color: var(--kurdish-yellow);
             color: var(--text-color);
             border: none;
             padding: 8px 15px;
             border-radius: 6px;
             cursor: pointer;
             font-family: inherit;
             font-weight: 600;
             transition: background-color 0.2s ease;
             display: block;
             margin-top: 10px;
         }
         .fill-check:hover { background-color: #DBA53A; }
         .fill-feedback {
             margin-top: 10px;
             font-weight: bold;
             min-height: 1.5em;
             text-align: right; /* Ensure fill feedback is right-aligned */
         }
         .fill-feedback.correct { color: var(--kurdish-green); }
         .fill-feedback.incorrect { color: var(--kurdish-red); }


        /* Dialogue box styles */
        .dialogue-box {
            background-color: #f5f5f5;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            direction: rtl; /* Ensure dialogue box is RTL */
            text-align: right; /* Ensure dialogue text is right-aligned */
        }
        .dialogue-line { margin-bottom: 10px; }
        .speaker { font-weight: bold; color: var(--kurdish-red); margin-left: 10px; margin-right: 0; /* Adjusted margin for RTL */ }

        /* Activity card styles */
        .activities-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin: 20px 0; }
        .activity-card { background-color: var(--light-green); border-radius: 8px; padding: 15px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); text-align: center; }
        .activity-phrase { font-weight: bold; margin-bottom: 5px; color: #4F7942; }

        /* Navigation */
        .nav-buttons-container { display: flex; justify-content: center; margin-top: 30px; margin-bottom: 40px; padding: 0 10px; }
        .nav-button { background-color: var(--kurdish-red); color: white; border: none; border-radius: 12px; padding: 15px 20px; font-family: 'Noto Sans Arabic', 'Nunito', Arial, sans-serif; font-weight: 600; font-size: 1.3rem; cursor: pointer; box-shadow: 0 3px 10px rgba(0,0,0,0.1); transition: all 0.3s ease; text-decoration: none; text-align: center; display: inline-block; line-height: 1.4; }
        .nav-button:hover { background-color: #7e2223; }

        /* Vocabulary section styles */
        .vocabulary-section { background-color: var(--background-cream); padding: 20px; border-radius: 8px; margin: 20px 0; text-align: right; /* Ensure vocab section is right-aligned */ }
        .vocab-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin: 15px 0; }
        .vocab-item { background-color: white; border-radius: 8px; padding: 12px; text-align: center; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        .kurdish-word { font-weight: bold; color: var(--kurdish-red); margin-bottom: 5px; }
        /* Added style for sub-exercise headings */
        .vocabulary-section h4 {
            color: var(--text-color);
            font-weight: 600;
            font-size: 1.1rem;
            margin-top: 20px;
            margin-bottom: 5px;
        }


        /* Word Order Game Styles */
         .word-order-game { background-color: var(--background-cream); padding: 15px; border-radius: 8px; margin: 20px 0; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
         .game-sentence { background-color: white; border-radius: 8px; padding: 15px; margin-bottom: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); display: flex; flex-direction: column; }
         .game-sentence.completed { background-color: var(--light-green); border-right: 4px solid var(--kurdish-green); border-left: none; /* Adjusted border for RTL */ }
         .game-sentence-translation { font-weight: 600; margin-bottom: 15px; color: var(--text-color); text-align: right; /* Ensure translation is right-aligned */ }
         .sentence-number { display: inline-block; min-width: 45px; font-weight: 700; color: var(--kurdish-red); margin-left: 10px; margin-right: 0; /* Adjusted margin for RTL */ }
         .solution-area { min-height: 60px; padding: 10px; background-color: #f1f8e9; border-radius: 8px; display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 10px; border: 2px dashed var(--kurdish-green); direction: rtl; /* Ensure solution area is RTL */ justify-content: flex-end; /* Align words to the right */ }
         .words-bank { display: flex; flex-wrap: wrap; gap: 8px; padding: 10px; background-color: #FFF7E0; border-radius: 6px; margin-bottom: 10px; direction: rtl; /* Ensure words bank is RTL */ justify-content: flex-end; /* Align words to the right */ }
         .word-box { display: inline-block; padding: 8px 12px; background-color: var(--kurdish-yellow); color: var(--text-color); border-radius: 5px; cursor: pointer; user-select: none; margin: 0; font-weight: 500; border: 2px solid transparent; box-shadow: 0 2px 4px rgba(0,0,0,0.1); transition: all 0.2s ease; }
         .solution-area .word-box { background-color: #beddb0; border-color: var(--kurdish-green); }
         .word-box.modal { background-color: var(--kurdish-red); color: white; }
         .solution-area .word-box.modal { background-color: #c35758; color: white; }
         .game-feedback { margin-top: 10px; font-weight: 600; min-height: 1.5em; text-align: right; /* Ensure game feedback is right-aligned */ }
         .feedback-correct { color: var(--kurdish-green); }
         .feedback-incorrect { color: var(--kurdish-red); }
         .sentence-buttons { display: flex; gap: 10px; margin-top: 10px; flex-direction: row-reverse; /* Reverse button order for RTL */ }
         .word-order-game .check-btn,
         .word-order-game .show-answer-btn,
         .word-order-game .delete-btn { flex: 1; padding: 8px 15px; margin-top: 0; }
         .word-order-game .show-answer-btn { background-color: #E5F0E3; }
         .word-order-game .show-answer-btn:hover { background-color: #D5E0D3; }
         .word-order-game .delete-btn { background-color: #ef9a9a; color: var(--text-color); }
         .word-order-game .delete-btn:hover { background-color: #ef5350; color: white; }

        /* Translation button */
        .trans-btn { background-color: var(--kurdish-yellow); border: none; border-radius: 4px; padding: 3px 8px; margin-right: 10px; margin-left: 0; /* Adjusted margin for RTL */ font-size: 0.8em; cursor: pointer; transition: background-color 0.2s; }
        .trans-btn:hover { background-color: #EAB72C; }
        .translation { display: none; font-style: italic; color: #666; margin-top: 5px; padding-right: 60px; padding-left: 0; /* Adjusted padding for RTL */ text-align: right; /* Ensure translation text is right-aligned */ }

        /* Completion Banner */
         .completion-banner { background-color: var(--kurdish-green); padding: 25px; border-radius: 12px; text-align: center; margin: 30px 0; color: white; box-shadow: 0 4px 15px rgba(0,0,0,0.15); }
         .completion-banner h2 { color: white; font-size: 1.7rem; margin-top: 0; }
         .celebration { font-size: 2.5rem; margin: 10px 0; }

        /* Media Queries */
        @media (max-width: 600px) {
            .section, .title-section, .exercise, .fill-exercise, .matching-game, .word-order-game { padding: 20px 15px; border-radius: 10px; }
            h1 { font-size: 1.6rem; } h2 { font-size: 1.3rem; } h3 { font-size: 1.1rem; }
            table { display: block; overflow-x: auto; white-space: nowrap; } th, td { padding: 10px 12px; } th { font-size: 0.9rem; padding: 10px 8px; }
            body { padding: 10px; }
            .check-btn { margin-top: 10px; width: 100%; max-width: 300px; padding: 12px; }
            .feedback { display: block; margin-top: 8px; }
            .matching-container { flex-direction: column; gap: 15px; } /* Keep column direction for small screens */
            .matching-item { font-size: 1em; padding: 10px 12px; }
            .matching-column { gap: 8px; }
            .matching-container { gap: 8px; }
            /* Fill-in exercise mobile */
            .exercise-row { flex-direction: column; align-items: flex-end; gap: 5px;} /* Align items to the right */
            .fill-input { width: 100%; max-width: none; margin: 5px 0; }
            .key-container { justify-content: flex-end; } /* Align keys to the right */
            .fill-check { width: auto; margin-top: 10px; }
            .activities-grid, .vocab-grid { grid-template-columns: 1fr; }
            .nav-buttons-container { flex-direction: column; gap: 15px; }
            .nav-button { width: 100%; margin: 0; font-size: 1rem; }
            /* Word order game mobile */
             .sentence-buttons { flex-direction: column; }
             .word-order-game .check-btn,
             .word-order-game .show-answer-btn,
             .word-order-game .delete-btn { width: 100%; }
             .translation { padding-right: 10px; padding-left: 0; } /* Adjusted padding for RTL */
        }
        @media (max-width: 450px) {
            .matching-item { padding: 10px 8px; font-size: 0.9em; }
            .matching-column { gap: 8px; }
            .matching-container { gap: 8px; }
            .key-btn { font-size: 0.8em; padding: 4px 8px;}
            .nav-button { padding: 12px 15px; }
            .word-box { padding: 6px 10px; font-size: 0.9em;}
            .vocab-grid { grid-template-columns: repeat(2, 1fr); }
        }
        @media (min-width: 451px) and (max-width: 600px) {
             .vocab-grid { grid-template-columns: repeat(2, 1fr); }
        }
    </style>
</head>
<body>
    <div class="title-section">
        <h1>الدرس 8: <br>زمن المستقبل، صيغ المقارنة، والجمل الشرطية</h1>
        <hr>
    </div>

    <div class="section">
        <h3>أهداف الدرس</h3>
        <ul>
             <li><a href="#continuous-past-review" style="color: inherit; text-decoration: none;">مراجعة: زمن الماضي المستمر</a></li>
             <li><a href="#future-tense" style="color: inherit; text-decoration: none;">زمن المستقبل</a></li>
             <li><a href="#negative-future" style="color: inherit; text-decoration: none;">زمن المستقبل المنفي</a></li>
             <li><a href="#future-tense-usage" style="color: inherit; text-decoration: none;">استخدام زمن المستقبل</a></li>
             <li><a href="#comparative-forms" style="color: inherit; text-decoration: none;">صيغ المقارنة</a></li>
             <li><a href="#expressing-preferences" style="color: inherit; text-decoration: none;">التعبير عن التفضيلات</a></li>
             <li><a href="#conditionals" style="color: inherit; text-decoration: none;">الجمل الشرطية</a></li>
             <li><a href="#word-order-game" style="color: inherit; text-decoration: none;">ترتيب الكلمات</a></li>
             <li><a href="#dialogue" style="color: inherit; text-decoration: none;">الحوار</a></li>
        </ul>
    </div>

    <div class="section" id="continuous-past-review">
        <h2>1. مراجعة: زمن الماضي المستمر</h2>
        <p>لنراجع زمن الماضي المستمر الذي تعلمناه في الدرس السابق:</p>

        <h3>الأفعال المتعدية في الماضي المستمر:</h3>
        <table>
            <tr><th>الكرمانجي</th><th>العربية</th></tr>
             <tr><td><strong>Me</strong> mal <strong>dipaqij dikir</strong>.</td><td>كنا ننظف المنزل.</td></tr>
            <tr><td><strong>We</strong> xwarin <strong>diçêkir</strong>.</td><td>كنتم تعدون الطعام.</td></tr>
            <tr><td><strong>Wan</strong> nan <strong>dikirin</strong>.</td><td>كانوا يشترون الخبز.</td></tr>
        </table>

        <h3>الأفعال اللازمة في الماضي المستمر:</h3>
        <table>
            <tr><th>الكرمانجي</th><th>العربية</th></tr>
            <tr><td><strong>Ez</strong> <strong>diçûm</strong> dibistanê.</td><td>كنت أذهب إلى المدرسة.</td></tr>
            <tr><td><strong>Tu</strong> <strong>dihatî</strong> malê.</td><td>كنت تأتي إلى المنزل.</td></tr>
            <tr><td><strong>Ew</strong> <strong>direyî</strong>.</td><td>كان/كانت يمشي/تمشي.</td></tr>
             </table>


        <div class="fill-exercise">
             <h3>التمرين 1: أكمل بصيغة الماضي المستمر الصحيحة</h3>

             <div class="fill-item" data-correct="diçûm">
                 <div class="exercise-row">
                     <span>دما كو آزاد هات، عز دبستانێ</span>
                     <input type="text" class="fill-input" readonly>
                     <span>.</span><span class="verb-hint">(كنت أذهب إلى المدرسة عندما جاء آزاد.)</span>
                 </div>
                 <div class="key-container">
                     <button class="key-btn">çûm</button>
                     <button class="key-btn">diçûm</button>
                     <button class="key-btn">biçim</button>
                 </div>
                 <button class="fill-check" onclick="checkFillAnswer(this)">تحقق</button>
                 <div class="fill-feedback"></div>
             </div>

             <div class="fill-item" data-correct="dixwend">
                 <div class="exercise-row">
                     <span>وي پرتۆك</span>
                     <input type="text" class="fill-input" readonly>
                     <span>لي مالێ.</span><span class="verb-hint">(كان يقرأ كتاباً في المنزل.)</span>
                 </div>
                 <div class="key-container">
                     <button class="key-btn">xwend</button>
                     <button class="key-btn">dixwend</button>
                     <button class="key-btn">xwendin</button>
                 </div>
                 <button class="fill-check" onclick="checkFillAnswer(this)">تحقق</button>
                 <div class="fill-feedback"></div>
             </div>


             <div class="fill-item" data-correct="dipeyivî">
                 <div class="exercise-row">
                     <span>دما كو عز هاتم، او</span>
                     <input type="text" class="fill-input" readonly>
                     <span>بي تلفونێ.</span><span class="verb-hint">(عندما جئت، كانت تتحدث في الهاتف.)</span>
                 </div>
                 <div class="key-container">
                     <button class="key-btn">dipeyivî</button>
                     <button class="key-btn">peyivî</button>
                     <button class="key-btn">peyivîbû</button>
                 </div>
                 <button class="fill-check" onclick="checkFillAnswer(this)">تحقق</button>
                 <div class="fill-feedback"></div>
             </div>
         </div>
    </div>

    <div class="section" id="future-tense">
        <h2>2. زمن المستقبل</h2>
        <p>نشكل زمن المستقبل البسيط باستخدام علامة المستقبل <strong>ê</strong> بعد الفاعل، وقبل الفعل، وتصريف الفعل مع صيغة الشرط <strong>bi-</strong>.</p>

<div class="note">
             <p>ملاحظة: فكر في البادئة "bi-" كشيء يدل على ما لا يوجد بالكامل في الواقع. غالباً ما تظهر الأفعال التي لديها إمكانية الحدوث أو ستحدث في المستقبل. لكنها ليست حقيقية بعد!</p>
         </div>

        <div class="note">
             <p>ملاحظة ثانية: لا تستخدم <strong>ê</strong> فقط كعلامة للمستقبل. يمكن أيضاً استخدام <strong>dê</strong>، <strong>kê</strong>، و <strong>wê</strong>، اعتماداً على اللهجة. ومن المثير للاهتمام أن العديد من الكرد خارج عفرين سيرفضون الاعتقاد بأن <strong>kê</strong> تستخدم كعلامة للمستقبل في لهجة عفرين.</p>
         </div>

        <h3>بنية زمن المستقبل:</h3>
        <table>
            <tr><th>البنية</th><th>مثال</th><th>الترجمة</th></tr>
            <tr><td>Subject + ê + verb (with bi-)</td><td>Ez ê biçim.</td><td>سأذهب.</td></tr>
        </table>

        <h3>تصريف زمن المستقبل:</h3>
        <table>
            <tr><th>الكرمانجي</th><th>العربية</th></tr>
            <tr><td>Ez <strong>ê biçim</strong>.</td><td>سأذهب.</td></tr>
            <tr><td>Tu <strong>ê biçî</strong>.</td><td>ستذهب.</td></tr>
            <tr><td>Ew <strong>ê biçe</strong>.</td><td>سيذهب/ستذهب.</td></tr>
            <tr><td>Em <strong>ê biçin</strong>.</td><td>سنذهب.</td></tr>
            <tr><td>Hûn <strong>ê biçin</strong>.</td><td>ستذهبون.</td></tr>
            <tr><td>Ew <strong>ê biçin</strong>.</td><td>سيذهبون/ستذهبن.</td></tr>
        </table>

        <div class="examples">
            <p><strong>أمثلة:</strong></p>
            <p>Ez <strong>ê sibehê biçim</strong> nexweşxaneyê. (سأذهب إلى المستشفى غداً.)</p>
            <p>Tu <strong>ê kengî bêyî</strong> mala me? (متى ستأتي إلى منزلنا؟)</p>
            <p>Ew <strong>ê çawa we nas bikin</strong>? (كيف سيعرفونكم؟)</p>
        </div>

        <div class="fill-exercise">
             <h3>التمرين 1: أكمل بصيغة زمن المستقبل الصحيحة</h3>

             <div class="fill-item" data-correct="ê biçim">
                 <div class="exercise-row">
                     <span>عز سبەهێ</span>
                     <input type="text" class="fill-input" id="fill-future-ex1-1" readonly>
                     <span>دبستانێ.</span><span class="verb-hint">(سأذهب إلى المدرسة غداً.)</span>
                 </div>
                 <div class="key-container">
                     <button class="key-btn">ê biçim</button>
                     <button class="key-btn">diçim</button>
                     <button class="key-btn">ê diçim</button>
                 </div>
                 <button class="fill-check" onclick="checkFillAnswer(this)">تحقق</button>
                 <div class="fill-feedback" id="fill-future-ex1-1-feedback"></div>
             </div>

             <div class="fill-item" data-correct="ê bixwî">
                 <div class="exercise-row">
                     <span>تو چ</span>
                     <input type="text" class="fill-input" id="fill-future-ex1-2" readonly>
                     <span>؟</span><span class="verb-hint">(ماذا ستأكل؟)</span>
                 </div>
                 <div class="key-container">
                     <button class="key-btn">dixwî</button>
                     <button class="key-btn">ê bixwî</button>
                     <button class="key-btn">ê xwarî</button>
                 </div>
                 <button class="fill-check" onclick="checkFillAnswer(this)">تحقق</button>
                 <div class="fill-feedback" id="fill-future-ex1-2-feedback"></div>
             </div>

             <div class="fill-item" data-correct="ê bikirin">
                 <div class="exercise-row">
                     <span>او چ</span>
                     <input type="text" class="fill-input" id="fill-future-ex1-3" readonly>
                     <span>؟</span><span class="verb-hint">(ماذا سيشترون؟)</span>
                 </div>
                 <div class="key-container">
                     <button class="key-btn">dikirin</button>
                     <button class="key-btn">ê bikire</button>
                     <button class="key-btn">ê bikirin</button>
                 </div>
                 <button class="fill-check" onclick="checkFillAnswer(this)">تحقق</button>
                 <div class="fill-feedback" id="fill-future-ex1-3-feedback"></div>
             </div>

             <div class="fill-item" data-correct="ê bibin">
                 <div class="exercise-row">
                     <span>هون كنگي</span>
                     <input type="text" class="fill-input" id="fill-future-ex1-4" readonly>
                     <span>مامۆستە؟</span><span class="verb-hint">(متى ستصبحون معلمين؟)</span>
                 </div>
                 <div class="key-container">
                     <button class="key-btn">dibin</button>
                     <button class="key-btn">ê bibin</button>
                     <button class="key-btn">ê bin</button>
                 </div>
                 <button class="fill-check" onclick="checkFillAnswer(this)">تحقق</button>
                 <div class="fill-feedback" id="fill-future-ex1-4-feedback"></div>
             </div>

             <div class="fill-item" data-correct="ê bibe">
                 <div class="exercise-row">
                     <span>او</span>
                     <input type="text" class="fill-input" id="fill-future-ex1-5" readonly>
                     <span>دكتۆر.</span><span class="verb-hint">(سيصبح/ستصبح طبيباً/طبيبة.)</span>
                 </div>
                 <div class="key-container">
                     <button class="key-btn">dibe</button>
                     <button class="key-btn">ê dibe</button>
                     <button class="key-btn">ê bibe</button>
                 </div>
                 <button class="fill-check" onclick="checkFillAnswer(this)">تحقق</button>
                 <div class="fill-feedback" id="fill-future-ex1-5-feedback"></div>
             </div>

              <div class="fill-item" data-correct="ê bixwînin">
                 <div class="exercise-row">
                     <span>ام پيرتۆكێ</span>
                     <input type="text" class="fill-input" id="fill-future-ex1-6" readonly>
                     <span>.</span><span class="verb-hint">(سنقرأ الكتاب.)</span>
                 </div>
                 <div class="key-container">
                     <button class="key-btn">dixwînin</button>
                     <button class="key-btn">ê bixwînin</button>
                     <button class="key-btn">ê xwendin</button>
                 </div>
                 <button class="fill-check" onclick="checkFillAnswer(this)">تحقق</button>
                 <div class="fill-feedback" id="fill-future-ex1-6-feedback"></div>
             </div>
         </div>
    </div>

    <div class="section" id="negative-future">
        <h2>3. زمن المستقبل المنفي</h2>
        <p>لتشكيل زمن المستقبل المنفي في الكرمانجي، يتم إسقاط علامة المستقبل <strong>ê</strong>، ويحل <strong>na</strong> محل صيغة الشرط <strong>bi-</strong>.</p>

        <table>
            <tr><th>الكرمانجي</th><th>العربية</th></tr>
            <tr><td>Ez <strong>naçim</strong>.</td><td>لن أذهب.</td></tr>
            <tr><td>Tu <strong>naçî</strong>.</td><td>لن تذهب.</td></tr>
            <tr><td>Ew <strong>naçe</strong>.</td><td>لن يذهب/لن تذهب.</td></tr>
            <tr><td>Em <strong>naçin</strong>.</td><td>لن نذهب.</td></tr>
            <tr><td>Hûn <strong>naçin</strong>.</td><td>لن تذهبوا.</td></tr>
            <tr><td>Ew <strong>naçin</strong>.</td><td>لن يذهبوا/لن تذهبن.</td></tr>
        </table>

        <div class="examples">
            <p><strong>أمثلة:</strong></p>
            <p>Ez <strong>ê sibehê biçim</strong> nexweşxaneyê. (سأذهب إلى المستشفى غداً.)</p>
            <p>Tu <strong>ê kengî bêyî</strong> mala me? (متى ستأتي إلى منزلنا؟)</p>
            <p>Em <strong>naçin</strong> dibistanê. (لن نذهب إلى المدرسة.)</p>
            <p>Ew <strong>naxwin</strong> goşt. (لن يأكلوا اللحم.)</p>
        </div>

        <div class="fill-exercise">
            <h3>التمرين 2: املأ بصيغة المستقبل المنفي الصحيحة</h3>

            <div class="fill-item" data-correct="naçim">
                <div class="exercise-row">
                    <span>عز سبەهێ دبستانێ</span>
                    <input type="text" class="fill-input" readonly>
                    <span>.</span><span class="verb-hint">(لن أذهب إلى المدرسة غداً.)</span>
                </div>
                <div class="key-container">
                    <button class="key-btn">naçim</button>
                    <button class="key-btn">diçim</button>
                    <button class="key-btn">neçim</button>
                </div>
                <button class="fill-check" onclick="checkFillAnswer(this)">تحقق</button>
                <div class="fill-feedback"></div>
            </div>

            <div class="fill-item" data-correct="naxwin">
                <div class="exercise-row">
                    <span>او گۆشت</span>
                    <input type="text" class="fill-input" readonly>
                    <span>.</span><span class="verb-hint">(لن يأكلوا اللحم.)</span>
                </div>
                <div class="key-container">
                    <button class="key-btn">naxwe</button>
                    <button class="key-btn">naxwin</button>
                    <button class="key-btn">nexwin</button>
                </div>
                <button class="fill-check" onclick="checkFillAnswer(this)">تحقق</button>
                <div class="fill-feedback"></div>
            </div>

            <div class="fill-item" data-correct="nakirin">
                <div class="exercise-row">
                    <span>هون تشته‌كێ</span>
                    <input type="text" class="fill-input" readonly>
                    <span>.</span><span class="verb-hint">(لن تشتروا شيئاً.)</span>
                </div>
                <div class="key-container">
                    <button class="key-btn">nakirin</button>
                    <button class="key-btn">nekirin</button>
                    <button class="key-btn">bikirin</button>
                </div>
                <button class="fill-check" onclick="checkFillAnswer(this)">تحقق</button>
                <div class="fill-feedback"></div>
            </div>

            <div class="fill-item" data-correct="nabînin">
                <div class="exercise-row">
                    <span>ام ئێدي تو جار وێ</span>
                    <input type="text" class="fill-input" readonly>
                    <span>.</span><span class="verb-hint">(لن نراها مرة أخرى أبداً.)</span>
                </div>
                <div class="key-container">
                    <button class="key-btn">nabînin</button>
                    <button class="key-btn">nebînin</button>
                    <button class="key-btn">dibînin</button>
                </div>
                <button class="fill-check" onclick="checkFillAnswer(this)">تحقق</button>
                <div class="fill-feedback"></div>
            </div>

            <div class="fill-item" data-correct="naxebitî">
                <div class="exercise-row">
                    <span>تو سبە</span>
                    <input type="text" class="fill-input" readonly>
                    <span>؟</span><span class="verb-hint">(ألن تعمل غداً؟)</span>
                </div>
                <div class="key-container">
                    <button class="key-btn">naxebitî</button>
                    <button class="key-btn">nexebitî</button>
                    <button class="key-btn">dixebitî</button>
                </div>
                <button class="fill-check" onclick="checkFillAnswer(this)">تحقق</button>
                <div class="fill-feedback"></div>
            </div>
        </div>
    </div>

    <div class="section" id="future-tense-usage">
        <h2>4. استخدام زمن المستقبل</h2>
        <p>يستخدم زمن المستقبل في الكرمانجي في مواقف مشابهة للإنجليزية، مثل:</p>

        <h3>عمل التنبؤات:</h3>
        <div class="examples">
            <p><strong>أمثلة:</strong></p>
            <p>Ew <strong>ê bibe</strong> doktor. (سيصبح/ستصبح طبيباً/طبيبة.)</p>
            <p>Hûn <strong>ê bibînin</strong>, hemû tişt <strong>ê baş bibin</strong>. (سترون، كل شيء سيكون جيداً.)</p>
        </div>

        <h3>عمل الخطط:</h3>
        <div class="examples">
            <p><strong>أمثلة:</strong></p>
            <p>Ez <strong>ê sibehê herim</strong> Amedê. (سأذهب إلى آمد غداً.)</p>
            <p>Em <strong>ê îşev fîlmekî bibînin</strong>. (سنشاهد فيلماً الليلة.)</p>
        </div>

        <h3>عمل الوعود:</h3>
        <div class="examples">
            <p><strong>أمثلة:</strong></p>
            <p>Ez <strong>ê alîkariya te bikim</strong>. (سأساعدك.)</p>
            <p>Ew <strong>ê bi te re werin</strong>. (سيأتون معك.)</p>
        </div>

        <div class="exercise">
            <h3>التمرين 3: طابق جمل زمن المستقبل مع ترجماتها العربية</h3>
            <div class="matching-game" id="future-matching">
                 <div class="match-progress">التطابقات: <span class="matches-count">0</span>/6</div>
                 <div class="matching-container">
                     <div class="matching-column">
                         <div class="matching-item-container kurdish-container">
                             <div class="matching-item kurdish" data-id="1">Ez ê nan û penêr bikîrim.</div>
                             <div class="matching-item kurdish" data-id="2">Tu ê kengî karekî bibînî?</div>
                             <div class="matching-item kurdish" data-id="3">Ew ê çi bixwin?</div>
                             <div class="matching-item kurdish" data-id="4">Hûn ê çi bikin?</div>
                             <div class="matching-item kurdish" data-id="5">Em ê îro bi hev re werin.</div>
                             <div class="matching-item kurdish" data-id="6">Ew naçe mektebê.</div>
                         </div>
                     </div>
                     <div class="matching-column">
                         <div class="matching-item-container english-container">
                             <div class="matching-item english" data-id="1">سأشتري الخبز والجبن.</div>
                             <div class="matching-item english" data-id="2">متى ستجد وظيفة؟</div>
                             <div class="matching-item english" data-id="3">ماذا سيأكلون؟</div>
                             <div class="matching-item english" data-id="4">ماذا ستفعلون؟</div>
                             <div class="matching-item english" data-id="5">سنأتي معاً اليوم.</div>
                             <div class="matching-item english" data-id="6">لن يذهب/لن تذهب إلى المدرسة.</div>
                         </div>
                     </div>
                 </div>
                 <div class="matching-feedback"></div>
             </div>
        </div>
    </div>

    <div class="section" id="comparative-forms">
        <h2>5. صيغ المقارنة</h2>
        <p>للحصول على صيغة المقارنة للصفات نقوم بـ:</p>
        <ol>
            <li>إضافة اللاحقة <strong>–tir</strong> إلى الصيغة الأصلية (الصيغة الأولى) للصفة</li>
            <li>استخدام حرف الجر <strong>ji</strong> 'من' قبل الاسم المقارن به</li>
        </ol>
        <p>ومع ذلك، إذا كانت الحرف الأخير من الصفة هو <strong>t</strong> بالفعل، فإننا نحذف حرف <strong>t</strong> من لاحقة المقارنة.</p>

        <h3>صيغ المقارنة العادية:</h3>
        <table>
            <tr><th>الصيغة الأصلية</th><th>صيغة المقارنة</th><th>العربية</th></tr>
            <tr><td>mezin (كبير)</td><td>mezintir</td><td>أكبر</td></tr>
            <tr><td>baş (جيد)</td><td>baştir</td><td>أفضل</td></tr>
            <tr><td>biha (غالٍ)</td><td>bihatir</td><td>أكثر غلاءً</td></tr>
            <tr><td>dirêj (طويل)</td><td>dirêjtir</td><td>أطول</td></tr>
            <tr><td>lez (سريع)</td><td>leztir</td><td>أسرع</td></tr>
        </table>

        <div class="examples">
            <p><strong>أمثلة:</strong></p>
            <p>Meyrem <strong>ji birayê xwe mezintir e.</strong> (مريم أكبر من أخيها.)</p>
            <p>Ev cil û berg <strong>ji yên modern bihatir in.</strong> (هذه الملابس أغلى من الملابس الحديثة.)</p>
            <p>Hevokên min <strong>ji yên te dirêjtir in.</strong> (جملي أطول من جملك.)</p>
            <p>Tu <strong>ji min baştir</strong> dixebitî. (أنت تعمل أفضل مني.)</p>
            <p>Ew <strong>ji me hemiyan leztir</strong> dibezin. (هم يركضون أسرع منا جميعاً.)</p>
        </div>

        <h3>المزيد من صيغ المقارنة:</h3>

        <table>
            <tr><th>الصيغة الأصلية</th><th>صيغة المقارنة</th><th>العربية</th></tr>
            <tr><td>pir (كثير)</td><td>pirtir or bêtir</td><td>أكثر</td></tr>
            <tr><td>baş (جيد)</td><td>baştir or çêtir</td><td>أفضل</td></tr>
            <tr><td>mezin (كبير)</td><td>mezintir or meztir</td><td>أكبر</td></tr>
        </table>

        <div class="note">
             <p>ملاحظة: على الرغم من وجود طريقة في الكرمانجي لقول صيغة التفضيل (الأكثر، الأكبر)، إلا أن هذا المفهوم لا يبدو موجوداً خارج الكتب المدرسية، أو أنه غير مهم للغاية، في الثقافات الكردية التي عرفتها. بدلاً من ذلك، ببساطة ضع كلمة تعني "جداً" أمام ما تتحدث عنه. مثال: <strong>Ev pir xweş e.</strong> (هذا لطيف جداً.) بدلاً من "هذا الألطف". وبالمثل، لا يوجد اهتمام كبير بالأشياء التي تصنف على أنها "الأعلى". على سبيل المثال، لن تقول شيئاً هو "مفضلتي". ستقول ببساطة، "أنا أحب هذا كثيراً." مثال: <strong>Ez ji vê pir hez dikim.</strong> (أنا أحب هذا كثيراً.) بدلاً من "هذا هو المفضل لدي."</p>
         </div>

        <div class="fill-exercise">
             <h3>التمرين 4: شكل صيغة المقارنة</h3>

             <div class="fill-item" data-correct="bihatir">
                 <div class="exercise-row">
                     <span>ئه‌ڤ مال ژ مالا وي</span>
                     <input type="text" class="fill-input" id="comp-ex-1" readonly>
                     <span>ه‌.</span><span class="verb-hint">(هذا البيت أغلى من بيته.)</span>
                 </div>
                 <div class="key-container">
                     <button class="key-btn">biha</button>
                     <button class="key-btn">bihatir</button>
                     <button class="key-btn">bihatirîn</button>
                 </div>
                 <button class="fill-check" onclick="checkFillAnswer(this)">تحقق</button>
                 <div class="fill-feedback" id="comp-ex-1-feedback"></div>
             </div>

             <div class="fill-item" data-correct="mezintir">
                 <div class="exercise-row">
                     <span>باژارێ وان ژ باژارێ مە</span>
                     <input type="text" class="fill-input" id="comp-ex-2" readonly>
                     <span>ه‌.</span><span class="verb-hint">(مدينتهم أكبر من مدينتنا.)</span>
                 </div>
                 <div class="key-container">
                     <button class="key-btn">mezin</button>
                     <button class="key-btn">mezintir</button>
                     <button class="key-btn">meztir</button>
                 </div>
                 <button class="fill-check" onclick="checkFillAnswer(this)">تحقق</button>
                 <div class="fill-feedback" id="comp-ex-2-feedback"></div>
             </div>

             <div class="fill-item" data-correct="xweştir">
                 <div class="exercise-row">
                     <span>ئه‌ڤ خوارن ژ يا دوهى</span>
                     <input type="text" class="fill-input" id="comp-ex-3" readonly>
                     <span>ه‌.</span><span class="verb-hint">(هذا الطعام أفضل من طعام الأمس.)</span>
                 </div>
                 <div class="key-container">
                     <button class="key-btn">baştir</button>
                     <button class="key-btn">çêtir</button>
                     <button class="key-btn">xweştir</button>
                 </div>
                 <button class="fill-check" onclick="checkFillAnswer(this)">تحقق</button>
                 <div class="fill-feedback" id="comp-ex-3-feedback"></div>
             </div>

             <div class="fill-item" data-correct="dirêjtir">
                 <div class="exercise-row">
                     <span>پۆرێ وێ ژ يێ تە</span>
                     <input type="text" class="fill-input" id="comp-ex-4" readonly>
                     <span>ه‌.</span><span class="verb-hint">(شعرها أطول من شعرك.)</span>
                 </div>
                 <div class="key-container">
                     <button class="key-btn">dirêj</button>
                     <button class="key-btn">dirêjtir</button>
                     <button class="key-btn">dirêjî</button>
                 </div>
                 <button class="fill-check" onclick="checkFillAnswer(this)">تحقق</button>
                 <div class="fill-feedback" id="comp-ex-4-feedback"></div>
             </div>

             <div class="fill-item" data-correct="bêtir">
                 <div class="exercise-row">
                     <span>من ژ تە</span>
                     <input type="text" class="fill-input" id="comp-ex-5" readonly>
                     <span>خه‌بتي.</span><span class="verb-hint">(عملت أكثر منك.)</span>
                 </div>
                 <div class="key-container">
                     <button class="key-btn">pirtir</button>
                     <button class="key-btn">bêtir</button>
                     <button class="key-btn">pir</button>
                 </div>
                 <button class="fill-check" onclick="checkFillAnswer(this)">تحقق</button>
                 <div class="fill-feedback" id="comp-ex-5-feedback"></div>
             </div>
         </div>
    </div>

    <div class="section" id="expressing-preferences">
        <h2>6. التعبير عن التفضيلات</h2>
        <p>في الكرمانجي، يمكننا استخدام صيغ المقارنة للتعبير عن التفضيلات:</p>

        <div class="examples">
            <p><strong>أمثلة:</strong></p>
            <p>Ez <strong>bêtir ji</strong> çayê <strong>hez dikim</strong> (أنا أحب الشاي <strong>أكثر</strong>.)</p>
            <p>Birayê min <strong>ji min mezintir</strong> e. (أخي <strong>أكبر مني</strong>.)</p>
            <p>Ez <strong>pir ji</strong> vê pirtûkê <strong>hez dikim</strong>. (أنا أحب هذا الكتاب <strong>كثيراً</strong>.)</p>
        </div>

        <div class="vocabulary-section">
            <h3>كلمات المقارنة والتفضيل الشائعة</h3>
            <div class="vocab-grid">
                 <div class="vocab-item"> <div class="kurdish-word">mezintir</div> <div>أكبر، أقدم</div> </div>
                 <div class="vocab-item"> <div class="kurdish-word">biçûktir</div> <div>أصغر، أصغر سناً</div> </div>
                 <div class="vocab-item"> <div class="kurdish-word">dirêjtir</div> <div>أطول</div> </div>
                 <div class="vocab-item"> <div class="kurdish-word">kurttir</div> <div>أقصر</div> </div>
                 <div class="vocab-item"> <div class="kurdish-word">baştir</div> <div>أفضل</div> </div>
                 <div class="vocab-item"> <div class="kurdish-word">xiraktir</div> <div>أسوأ</div> </div>
                 <div class="vocab-item"> <div class="kurdish-word">xweştir</div> <div>ألطف، أجمل</div> </div>
                 <div class="vocab-item"> <div class="kurdish-word">bêtir</div> <div>أكثر</div> </div>
                 <div class="vocab-item"> <div class="kurdish-word">kêmtir</div> <div>أقل</div> </div>
                 <div class="vocab-item"> <div class="kurdish-word">pir</div> <div>جداً، كثير</div> </div>
                 <div class="vocab-item"> <div class="kurdish-word">gelekî</div> <div>كثيراً جداً</div> </div>
                 <div class="vocab-item"> <div class="kurdish-word">ji ... hez kirin</div> <div>أن يحب</div> </div>
            </div>
             <div class="exercise">
                 <h4>التمرين 5: طابق كلمات المقارنة</h4>
                 <div class="matching-game" id="comparison-matching">
                     <div class="match-progress">التطابقات: <span class="matches-count">0</span>/8</div>
                     <div class="matching-container">
                         <div class="matching-column">
                             <div class="matching-item-container kurdish-container">
                                 <div class="matching-item kurdish" data-id="1">mezintir</div>
                                 <div class="matching-item kurdish" data-id="2">biçûktir</div>
                                 <div class="matching-item kurdish" data-id="3">dirêjtir</div>
                                 <div class="matching-item kurdish" data-id="4">kurttir</div>
                                 <div class="matching-item kurdish" data-id="5">baştir</div>
                                 <div class="matching-item kurdish" data-id="6">xiraktir</div>
                                 <div class="matching-item kurdish" data-id="7">bêtir</div>
                                 <div class="matching-item kurdish" data-id="8">kêmtir</div>
                             </div>
                         </div>
                         <div class="matching-column">
                             <div class="matching-item-container english-container">
                                 <div class="matching-item english" data-id="1">أكبر/أقدم</div>
                                 <div class="matching-item english" data-id="2">أصغر/أصغر سناً</div>
                                 <div class="matching-item english" data-id="3">أطول</div>
                                 <div class="matching-item english" data-id="4">أقصر</div>
                                 <div class="matching-item english" data-id="5">أفضل</div>
                                 <div class="matching-item english" data-id="6">أسوأ</div>
                                 <div class="matching-item english" data-id="7">أكثر</div>
                                 <div class="matching-item english" data-id="8">أقل</div>
                             </div>
                         </div>
                     </div>
                     <div class="matching-feedback"></div>
                 </div>
             </div>
        </div>
    </div>

    <div class="section" id="conditionals">
        <h2>7. الجمل الشرطية</h2>
        <p>تتشكل الجملة الشرطية باستخدام إحدى الكلمات <strong>heke, ku, ger, eger, heger</strong> (وكلها تعني <em>إذا</em>) في بداية الجملة وتصريف الفعل في صيغة الشرط المضارع، كما في زمن المستقبل. في هذا الدرس، سنركز فقط على الجمل الشرطية في زمن المضارع. سنفضل كلمة الشرط <strong>heke</strong> لأنها الكلمة الأكثر شيوعاً لتشكيل الجمل الشرطية.</p>

        <h3>بنية الجملة الشرطية المضارعة:</h3>
        <table>
            <tr><th>كلمة الشرط</th><th>المعنى</th></tr>
            <tr><td>Heke, ku, ger, eger, heger</td><td>إذا</td></tr>
        </table>

        <h3>الجملة الشرطية المضارعة - الإثبات:</h3>
        <table>
            <tr><th>الكرمانجي</th><th>العربية</th></tr>
            <tr><td>Heke ez biçim.</td><td>إذا ذهبت.</td></tr>
        </table>

        <h3>الجملة الشرطية المضارعة - النفي:</h3>
        <p>أما بالنسبة لصيغة النفي للجملة الشرطية المضارعة، فإننا ببساطة نستبدل صيغة الشرط <strong>bi-</strong> بعلامة النفي <strong>ne-</strong> ونترك الباقي كما هو.</p>

        <table>
            <tr><th>الكرمانجي</th><th>العربية</th></tr>
            <tr><td>Heke ez neçim.</td><td>إذا لم أذهب.</td></tr>
        </table>


        <div class="examples">
            <p><strong>أمثلة:</strong></p>
            <p><strong>Heke zarokên me kurdî fêr nebin, ê xetereke mezin çêbe.</strong> (<strong>إذا</strong> لم يتعلم أطفالنا الكردية، <strong>سيكون</strong> هناك خطر كبير.)</p>
            <p><strong>Heke hûn biçin bazarê, hûn dikarin tiştên gelek erzan peyda bikin.</strong> (<strong>إذا</strong> ذهبتم إلى السوق، <strong>يمكنكم</strong> العثور على أشياء رخيصة جداً.)</p>
            <p><strong>Heke ez ne xelet bim, ew li Stenbolê dixwîne.</strong> (<strong>إذا</strong> لم أكن مخطئاً، هو <strong>يدرس</strong> في إسطنبول.)</p>
        </div>

        <div class="fill-exercise">
             <h3>التمرين 6: أكمل الجمل الشرطية</h3>

             <div class="fill-item" data-correct="biçî">
                 <div class="exercise-row">
                     <span>هه‌كه‌ تو دبستانێ</span>
                     <input type="text" class="fill-input" id="cond-ex-1" readonly>
                     <span>، دێ تو تشتا فێر ببي.</span><span class="verb-hint">(إذا ذهبت إلى المدرسة، ستتعلم أشياء.)</span>
                 </div>
                 <div class="key-container">
                     <button class="key-btn">diçî</button>
                     <button class="key-btn">biçî</button>
                     <button class="key-btn">çûyî</button>
                 </div>
                 <button class="fill-check" onclick="checkFillAnswer(this)">تحقق</button>
                 <div class="fill-feedback" id="cond-ex-1-feedback"></div>
             </div>

             <div class="fill-item" data-correct="nexebitî">
                 <div class="exercise-row">
                     <span>هه‌كه‌ تو</span>
                     <input type="text" class="fill-input" id="cond-ex-2" readonly>
                     <span>، تو نابي ده‌وله‌مه‌ند.</span><span class="verb-hint">(إذا لم تعمل، لن تصبح غنياً.)</span>
                 </div>
                 <div class="key-container">
                     <button class="key-btn">nexebitî</button>
                     <button class="key-btn">bixebitî</button>
                     <button class="key-btn">naxebitî</button>
                 </div>
                 <button class="fill-check" onclick="checkFillAnswer(this)">تحقق</button>
                 <div class="fill-feedback" id="cond-ex-2-feedback"></div>
             </div>

             <div class="fill-item" data-correct="bixwin">
                 <div class="exercise-row">
                     <span>هه‌كه‌ او پيرتۆكێ</span>
                     <input type="text" class="fill-input" id="cond-ex-3" readonly>
                     <span>، دێ زانياريا وان زێده‌ ببه‌.</span><span class="verb-hint">(إذا قرأوا الكتاب، ستزيد معرفتهم.)</span>
                 </div>
                 <div class="key-container">
                     <button class="key-btn">dixwînin</button>
                     <button class="key-btn">bixwînin</button>
                     <button class="key-btn">bixwin</button>
                 </div>
                 <button class="fill-check" onclick="checkFillAnswer(this)">تحقق</button>
                 <div class="fill-feedback" id="cond-ex-3-feedback"></div>
             </div>

             <div class="fill-item" data-correct="herim">
                 <div class="exercise-row">
                     <span>گه‌ر عز كوردستانێ</span>
                     <input type="text" class="fill-input" id="cond-ex-4" readonly>
                     <span>، عز ئێ گه‌له‌ك باژارا ببينم.</span><span class="verb-hint">(إذا ذهبت إلى كردستان، سأرى العديد من المدن.)</span>
                 </div>
                 <div class="key-container">
                     <button class="key-btn">diçim</button>
                     <button class="key-btn">herim</button>
                     <button class="key-btn">biçim</button>
                 </div>
                 <button class="fill-check" onclick="checkFillAnswer(this)">تحقق</button>
                 <div class="fill-feedback" id="cond-ex-4-feedback"></div>
             </div>

             <div class="fill-item" data-correct="bê">
                 <div class="exercise-row">
                     <span>هه‌كه‌ بارانێ</span>
                     <input type="text" class="fill-input" id="cond-ex-5" readonly>
                     <span>، ام ناچن ده‌رڤه‌.</span><span class="verb-hint">(إذا أمطرت، لن نذهب إلى الخارج.)</span>
                 </div>
                 <div class="key-container">
                     <button class="key-btn">tê</button>
                     <button class="key-btn">bê</button>
                     <button class="key-btn">hat</button>
                 </div>
                 <button class="fill-check" onclick="checkFillAnswer(this)">تحقق</button>
                 <div class="fill-feedback" id="cond-ex-5-feedback"></div>
             </div>
         </div>
    </div>

    <div class="section" id="word-order-game">
        <h2>8. لعبة ترتيب الكلمات</h2> <p>ضع الكلمات بالترتيب الصحيح لتكوين جمل بزمن المستقبل، صيغ المقارنة، والجمل الشرطية.</p>
        <div class="word-order-game">
            <div id="sentences-container"></div>
        </div>
    </div>

    <div class="section" id="dialogue">
        <h2>9. الحوار</h2> <p>اقرأ هذا الحوار حول الخطط المستقبلية والمقارنات:</p>
        <div class="dialogue-box">
            <div class="dialogue-line"><span class="speaker">Azad:</span> Sibe tu dê çi bikî?<button class="trans-btn" onclick="toggleTranslation('trans1')">إظهار الترجمة</button><div id="trans1" class="translation">ماذا ستفعل غداً؟</div></div>
            <div class="dialogue-line"><span class="speaker">Rojîn:</span> Ez dê biçim bazarê. Divê ez hinekî tiştan bikîrim.<button class="trans-btn" onclick="toggleTranslation('trans2')">إظهار الترجمة</button><div id="trans2" class="translation">سأذهب إلى السوق. أحتاج لشراء بعض الأشياء.</div></div>
            <div class="dialogue-line"><span class="speaker">Azad:</span> Tu dê hevalên xwe jî bibînî?<button class="trans-btn" onclick="toggleTranslation('trans3')">إظهار الترجمة</button><div id="trans3" class="translation">هل سترى أصدقائك أيضاً؟</div></div>
            <div class="dialogue-line"><span class="speaker">Rojîn:</span> Na, ez bawer nakim. Bazara nû ji ya kevin mezintir e.<button class="trans-btn" onclick="toggleTranslation('trans4')">إظهار الترجمة</button><div id="trans4" class="translation">لا، لا أعتقد ذلك. السوق الجديد أكبر من القديم.</div></div>
            <div class="dialogue-line"><span class="speaker">Azad:</span> Lê tiştên li wir bihatir in, ne wisa?<button class="trans-btn" onclick="toggleTranslation('trans5')">إظهار الترجمة</button><div id="trans5" class="translation">لكن الأشياء هناك أغلى، أليس كذلك؟</div></div>
            <div class="dialogue-line"><span class="speaker">Rojîn:</span> Belê, lê kalîteya wan jî baştir e.<button class="trans-btn" onclick="toggleTranslation('trans6')">إظهار الترجمة</button><div id="trans6" class="translation">نعم، لكن جودتها أفضل أيضاً.</div></div>
            <div class="dialogue-line"><span class="speaker">Azad:</span> Heke tu sibê biçî bazarê, ez jî dê bi te re werim.<button class="trans-btn" onclick="toggleTranslation('trans7')">إظهار الترجمة</button><div id="trans7" class="translation">إذا ذهبت إلى السوق غداً، سآتي معك.</div></div>
            <div class="dialogue-line"><span class="speaker">Rojîn:</span> Baş e. Em dikarin li kafeyekê çayekê vexwin.<button class="trans-btn" onclick="toggleTranslation('trans8')">إظهار الترجمة</button><div id="trans8" class="translation">جيد. يمكننا شرب الشاي في مقهى.</div></div>
            <div class="dialogue-line"><span class="speaker">Azad:</span> Ez ji çayê bêtir hez dikim, lê tu dizanî ez ji qehweyê jî pir hez dikim.<button class="trans-btn" onclick="toggleTranslation('trans9')">إظهار الترجمة</button><div id="trans9" class="translation">أحب الشاي أكثر، لكنك تعلم أنني أحب القهوة كثيراً أيضاً.</div></div>
            <div class="dialogue-line"><span class="speaker">Rojîn:</span> Heke em biçin kafeyê, em dikarin hem çay hem jî qehweyê vexwin.<button class="trans-btn" onclick="toggleTranslation('trans10')">إظهار الترجمة</button><div id="trans10" class="translation">إذا ذهبنا إلى المقهى، يمكننا شرب الشاي والقهوة معاً.</div></div>
            <div class="dialogue-line"><span class="speaker">Azad:</span> Wê demê, ez dê saet dehê li ber mala te bim.<button class="trans-btn" onclick="toggleTranslation('trans11')">إظهار الترجمة</button><div id="trans11" class="translation">في هذه الحالة، سأكون أمام بيتك في الساعة العاشرة.</div></div>
        </div>
    </div>
    <div class="section">
        <div class="completion-banner">
            <div class="celebration">🌟 🌟 🌟</div>
            <h2>Pîroz be! Te Waneya 8 qedand!</h2>
            <p>تهانينا! لقد أكملت الدرس 8!</p>
            <div class="celebration">🌟 🌟 🌟</div>
        </div>
    </div>

    <div class="nav-buttons-container">
        <a href="../kl_lessons_ar.html" class="nav-button">العودة إلى جميع الدروس</a>
    </div>

    <script>
        // --- Utility Functions ---
        function shuffleArray(array) {
            // Creates a shuffled copy of the input array using the Fisher-Yates algorithm.
            const newArray = [...array]; // Create a shallow copy
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1)); // Random index from 0 to i
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]]; // Swap elements
            }
            return newArray;
        }
        function arraysEqual(a, b) {
            // Checks if two arrays have the same elements in the same order.
            if (a.length !== b.length) return false; // Must have the same length
            return a.every((val, index) => val === b[index]); // Check each element
        }

        // --- Dialogue Translation Toggle ---
        function toggleTranslation(id) {
            // Toggles the visibility of a translation element and updates the button text.
            const translation = document.getElementById(id);
            const button = translation.previousElementSibling; // Assumes button is right before the translation div
            if (translation && button) {
                if (translation.style.display === 'block') {
                    translation.style.display = 'none';
                    button.textContent = 'إظهار الترجمة'; // Arabic text
                } else {
                    translation.style.display = 'block';
                    button.textContent = 'إخفاء الترجمة'; // Arabic text
                }
            }
        }

        // --- Matching Game Logic ---
        function initializeMatchingGame(gameId, totalPairs) {
            // Sets up the matching game functionality for a given game ID.
            const gameElement = document.getElementById(gameId);
            if (!gameElement) { console.error(`Matching game element not found: ${gameId}`); return; }
            const kurdishContainer = gameElement.querySelector('.matching-item-container.kurdish-container');
            const englishContainer = gameElement.querySelector('.matching-item-container.english-container');
            const feedbackElement = gameElement.querySelector('.matching-feedback');
            const matchesCountElement = gameElement.querySelector('.matches-count');

            if (!kurdishContainer || !englishContainer || !feedbackElement || !matchesCountElement) {
                console.error(`Missing elements within matching game: ${gameId}`); return;
            }

            let selected = { kurdish: null, english: null }; // Tracks selected items
            let matchCount = 0; // Tracks number of correct matches
            matchesCountElement.textContent = matchCount; // Initialize count display

            // --- SHUFFLING ---
            // Shuffle items within each column independently
            const kurdishItems = Array.from(kurdishContainer.children);
            shuffleArray(kurdishItems).forEach(item => kurdishContainer.appendChild(item));

            const englishItems = Array.from(englishContainer.children);
            shuffleArray(englishItems).forEach(item => englishContainer.appendChild(item));
            // --- END SHUFFLING ---

            const items = gameElement.querySelectorAll('.matching-item');

            items.forEach(item => {
                // Re-clone items to ensure clean event listeners on re-initialization (if needed)
                const newItem = item.cloneNode(true);
                item.parentNode.replaceChild(newItem, item);

                // Add click listener to each matching item
                newItem.addEventListener('click', function() {
                    if (this.classList.contains('matched')) return; // Ignore clicks on already matched items

                    const isKurdish = this.classList.contains('kurdish');
                    const side = isKurdish ? 'kurdish' : 'english'; // Determine which column was clicked

                    // Deselect previous item on the same side if one was selected
                    if (selected[side]) { selected[side].classList.remove('selected'); }

                    // Select the current item
                    this.classList.add('selected');
                    selected[side] = this;

                    // Clear previous feedback
                    feedbackElement.textContent = '';
                    feedbackElement.className = 'matching-feedback';

                    // Check for a match if one item from each side is selected
                    if (selected.kurdish && selected.english) {
                        if (selected.kurdish.dataset.id === selected.english.dataset.id) {
                            // Correct match
                            selected.kurdish.classList.remove('selected');
                            selected.english.classList.remove('selected');
                            selected.kurdish.classList.add('matched');
                            selected.english.classList.add('matched');
                            matchCount++;
                            matchesCountElement.textContent = matchCount;
                            feedbackElement.textContent = '✓ صحيح!'; // Arabic text
                            feedbackElement.classList.add('correct');
                            if (matchCount === totalPairs) { feedbackElement.textContent = ' أحسنت! كلها متطابقة!'; } // Arabic text
                            selected = { kurdish: null, english: null }; // Reset selection
                        } else {
                            // Incorrect match
                            feedbackElement.textContent = '✗ غير صحيح. حاول مرة أخرى!'; // Arabic text
                            feedbackElement.classList.add('incorrect');
                            const selK = selected.kurdish; const selE = selected.english;
                            // Briefly show selection before removing 'selected' class
                            setTimeout(() => {
                                if(selK) selK.classList.remove('selected');
                                if(selE) selE.classList.remove('selected');
                            }, 800);
                            selected = { kurdish: null, english: null }; // Reset selection
                        }
                    }
                });
                 // Add touch feedback for mobile devices
                 newItem.addEventListener('touchstart', function() { this.style.opacity = '0.7'; }, {passive: true});
                 newItem.addEventListener('touchend', function() { this.style.opacity = '1'; });
            });
        }


        // --- Fill-in Exercise Logic ---
        function initializeFillInKeys() {
            // Adds click listeners to the key buttons in fill-in-the-blank exercises.
            document.querySelectorAll('.fill-exercise .key-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const fillItem = this.closest('.fill-item'); // Find the parent exercise item
                    if (!fillItem) return;
                    const input = fillItem.querySelector('.fill-input'); // Find the input within that item
                    if (input) {
                        input.value = this.textContent; // Set input value to the button's text
                        // Clear feedback and reset input style when a new option is chosen
                        const feedback = fillItem.querySelector('.fill-feedback');
                        if(feedback) {
                            feedback.textContent = '';
                            feedback.className = 'fill-feedback';
                        }
                        input.style.borderColor = "var(--kurdish-yellow)";
                        input.style.backgroundColor = "#f8f8f8";
                    }
                });
            });

            // Shuffle keys within each key container for variety
            document.querySelectorAll('.fill-exercise .key-container').forEach(container => {
                const keys = Array.from(container.children);
                shuffleArray(keys).forEach(key => container.appendChild(key));
            });
        }

        function checkFillAnswer(buttonElement) {
            // Checks the answer for a fill-in-the-blank item when the 'Check' button is clicked.
            const item = buttonElement.closest('.fill-item');
            if (!item) return;

            const input = item.querySelector('.fill-input');
            const feedback = item.querySelector('.fill-feedback');
            const correctAnswer = item.dataset.correct; // Get correct answer from data attribute
            const userAnswer = input ? input.value : null;

            if (!input || !feedback) {
                console.error(`Input or feedback element not found for item.`);
                return;
            }

            const trimmedUserAnswer = userAnswer ? userAnswer.trim() : '';
            const trimmedCorrectAnswer = correctAnswer ? correctAnswer.trim() : '';

            if (trimmedUserAnswer && trimmedUserAnswer === trimmedCorrectAnswer) {
                // Correct answer
                feedback.textContent = "✓ صحيح!"; // Arabic text
                feedback.className = "fill-feedback correct";
                input.style.borderColor = "var(--kurdish-green)";
                input.style.backgroundColor = "#e5f0e3";
            } else if (trimmedUserAnswer) {
                // Incorrect answer
                feedback.innerHTML = `✗ غير صحيح. الصحيح هو: <span class="correct-answer-display">${correctAnswer}</span>`; // Arabic text
                feedback.className = "fill-feedback incorrect";
                input.style.borderColor = "var(--kurdish-red)";
                input.style.backgroundColor = "#fff0f0";
            } else {
                // No answer selected
                feedback.textContent = "الرجاء اختيار خيار بالضغط على زر."; // Arabic text
                feedback.className = "fill-feedback";
                input.style.borderColor = "var(--kurdish-yellow)";
                input.style.backgroundColor = "#f8f8f8";
            }
        }


        // --- Word Order Game Logic ---
        function initializeWordOrderGame() {
            // Sets up the word order game, creating sentence elements dynamically.
            const sentencesData = [
                 { kurdish: "Ez ê sibehê biçim dibistanê.", english: "سأذهب إلى المدرسة غداً.", modalVerbs: ["Ez", "ê", "biçim"] },
                 { kurdish: "Tu ê kengî bêyî mala me?", english: "متى ستأتي إلى منزلنا؟", modalVerbs: ["Tu", "ê", "bêyî"] },
                 { kurdish: "Em ê êdî tu car wê nebînin.", english: "لن نراها مرة أخرى أبداً.", modalVerbs: ["Em", "ê", "nebînin"] },
                 { kurdish: "Hevokên min ji yên te dirêjtir in.", english: "جملي أطول من جملك.", modalVerbs: ["dirêjtir", "in"] },
                 { kurdish: "Tu ji min baştir dixebitî.", english: "أنت تعمل أفضل مني.", modalVerbs: ["baştir", "dixebitî"] },
                 { kurdish: "Ev mal ji mala wî bihatir e.", english: "هذا البيت أغلى من بيته.", modalVerbs: ["bihatir", "e"] },
                 { kurdish: "Heke tu biçî dibistanê, ê tu tiştan fêr bibî.", english: "إذا ذهبت إلى المدرسة، ستتعلم أشياء.", modalVerbs: ["Heke", "biçî", "ê", "fêr bibî"] },
                 { kurdish: "Heke baranê bê, em naçin derve.", english: "إذا أمطرت، لن نذهب إلى الخارج.", modalVerbs: ["Heke", "bê", "naçin"] }
            ];

            // Process sentence data into a more usable format
            const sentences = sentencesData.map(item => ({
                original: item.kurdish,
                english: item.english,
                modalVerbs: item.modalVerbs || [],
                // Split sentence into words, removing punctuation
                words: item.kurdish.replace(/[.?]/g, '').split(/\s+/).filter(word => word.length > 0)
            }));

            const gameContainer = document.getElementById('sentences-container');
            if (!gameContainer) { console.error("Word order game container 'sentences-container' not found."); return; }
            gameContainer.innerHTML = ''; // Clear previous content if re-initializing

            // Create HTML elements for each sentence
            sentences.forEach((sentence, index) => {
                const sentenceElement = document.createElement('div');
                sentenceElement.className = 'game-sentence';
                sentenceElement.id = `sentence-${index}`;

                // Display English translation and sentence number
                const translation = document.createElement('div');
                translation.className = 'game-sentence-translation';
                translation.innerHTML = `<span class="sentence-number">${index + 1}/${sentences.length}</span> ${sentence.english}`;
                sentenceElement.appendChild(translation);

                // Area where user drags/clicks words to form the sentence
                const solutionArea = document.createElement('div');
                solutionArea.className = 'solution-area';
                solutionArea.id = `solution-area-${index}`;
                sentenceElement.appendChild(solutionArea);

                // Bank containing the shuffled word boxes
                const wordsBank = document.createElement('div');
                wordsBank.className = 'words-bank';
                wordsBank.id = `words-bank-${index}`;
                sentenceElement.appendChild(wordsBank);

                // Shuffle words and create clickable boxes
                const shuffledWords = shuffleArray(sentence.words);
                shuffledWords.forEach(word => {
                    const wordElement = document.createElement('div');
                    wordElement.className = 'word-box';
                    wordElement.textContent = word;
                    // Add 'modal' class for specific styling if word is a modal verb
                    if (sentence.modalVerbs.includes(word)) {
                        wordElement.classList.add('modal');
                    }
                    // Add click listener to move word between bank and solution area
                    wordElement.addEventListener('click', () => {
                        const parent = wordElement.parentElement;
                        const targetBank = parent.classList.contains('words-bank') ? solutionArea : wordsBank;
                        targetBank.appendChild(wordElement);
                        // Clear feedback when words are moved
                        const feedbackElement = document.getElementById(`feedback-${index}`);
                        if(feedbackElement) { feedbackElement.textContent = ''; feedbackElement.className = 'game-feedback'; }
                    });
                    wordsBank.appendChild(wordElement);
                });

                // Feedback area for correct/incorrect messages
                const feedback = document.createElement('div');
                feedback.className = 'game-feedback';
                feedback.id = `feedback-${index}`;
                sentenceElement.appendChild(feedback);

                // Container for action buttons
                const buttonContainer = document.createElement('div');
                buttonContainer.className = 'sentence-buttons';

                // Check Answer button
                const checkButton = document.createElement('button');
                checkButton.className = 'check-btn';
                checkButton.textContent = 'تحقق من الإجابة'; // Arabic text
                checkButton.onclick = () => checkSentence(index, sentences); // Pass index and sentences array
                buttonContainer.appendChild(checkButton);

                // Show Answer button
                const showAnswerButton = document.createElement('button');
                showAnswerButton.className = 'show-answer-btn';
                showAnswerButton.textContent = 'إظهار الإجابة'; // Arabic text
                showAnswerButton.onclick = () => showAnswer(index, sentences); // Pass index and sentences array
                buttonContainer.appendChild(showAnswerButton);

                // Clear Box button
                const deleteBtn = document.createElement('button');
                deleteBtn.className = 'delete-btn';
                deleteBtn.textContent = 'مسح الصندوق'; // Arabic text
                deleteBtn.onclick = () => { // Move all words from solution back to bank
                    const currentSolutionArea = document.getElementById(`solution-area-${index}`);
                    const currentWordsBank = document.getElementById(`words-bank-${index}`);
                    while (currentSolutionArea.firstChild) { currentWordsBank.appendChild(currentSolutionArea.firstChild); }
                     const feedbackElement = document.getElementById(`feedback-${index}`);
                     if(feedbackElement) { feedbackElement.textContent = ''; feedbackElement.className = 'game-feedback'; }
                };
                buttonContainer.appendChild(deleteBtn);

                sentenceElement.appendChild(buttonContainer);
                gameContainer.appendChild(sentenceElement);

                // Hide subsequent sentences initially
                 if (index > 0) { sentenceElement.style.display = 'none'; }
            });
        }
        function checkSentence(sentenceId, sentences) {
            // Checks if the user's constructed sentence is correct.
            const solutionArea = document.getElementById(`solution-area-${sentenceId}`);
            const feedbackElement = document.getElementById(`feedback-${sentenceId}`);
            const sentenceElement = document.getElementById(`sentence-${sentenceId}`);
            if (!solutionArea || !feedbackElement || !sentenceElement) return;

            // Get words from the solution area
            const currentWords = Array.from(solutionArea.children).map(word => word.textContent);
            const correctWords = sentences[sentenceId].words; // Get the correct order

            // Check if all words were used
            if (currentWords.length !== correctWords.length) {
                feedbackElement.textContent = '✗ الرجاء استخدام جميع الكلمات.'; // Arabic text
                feedbackElement.className = 'game-feedback feedback-incorrect'; return;
            }

            const isCorrect = arraysEqual(currentWords, correctWords); // Compare arrays

            if (isCorrect) {
                // Correct answer
                feedbackElement.textContent = '✓ صحيح! أحسنت!'; // Arabic text
                feedbackElement.className = 'game-feedback feedback-correct';
                sentenceElement.classList.add('completed'); // Mark sentence as completed
                // Automatically show the next sentence after a short delay
                 if (sentenceId < sentences.length - 1) {
                     setTimeout(() => {
                         const nextSentence = document.getElementById(`sentence-${sentenceId + 1}`);
                         if (nextSentence) {
                             nextSentence.style.display = 'flex'; // Make it visible
                             nextSentence.scrollIntoView({ behavior: 'smooth', block: 'center' }); // Scroll to it
                         }
                     }, 800);
                 } else {
                     feedbackElement.textContent = '✓ لقد أكملت لعبة ترتيب الكلمات!'; // Arabic text // Final message
                 }
            } else {
                // Incorrect answer
                feedbackElement.textContent = '✗ ليس صحيحاً تماماً. حاول مرة أخرى!'; // Arabic text
                feedbackElement.className = 'game-feedback feedback-incorrect';
            }
        }
        function showAnswer(sentenceId, sentences) {
            // Displays the correct answer for the current sentence.
            const solutionArea = document.getElementById(`solution-area-${sentenceId}`);
            const wordsBank = document.getElementById(`words-bank-${sentenceId}`);
            const feedbackElement = document.getElementById(`feedback-${sentenceId}`);
            const sentenceElement = document.getElementById(`sentence-${sentenceId}`);
             if (!solutionArea || !wordsBank || !feedbackElement || !sentenceElement) return;

            // Clear both areas
            solutionArea.innerHTML = ''; wordsBank.innerHTML = '';

            // Add words in the correct order to the solution area
            sentences[sentenceId].words.forEach(word => {
                const wordElement = document.createElement('div');
                wordElement.className = 'word-box'; wordElement.textContent = word;
                 // Add 'modal' class for specific styling if word is a modal verb
                 if (sentences[sentenceId].modalVerbs.includes(word)) {
                     wordElement.classList.add('modal');
                 }
                wordElement.style.cursor = 'default'; // Make words unclickable
                solutionArea.appendChild(wordElement);
            });

            feedbackElement.textContent = 'هذا هو الترتيب الصحيح.'; // Arabic text
            feedbackElement.className = 'game-feedback';
            sentenceElement.classList.add('completed'); // Mark as completed

            // Automatically show the next sentence after a short delay
             if (sentenceId < sentences.length - 1) {
                 setTimeout(() => {
                     const nextSentence = document.getElementById(`sentence-${sentenceId + 1}`);
                     if (nextSentence) {
                         nextSentence.style.display = 'flex';
                         nextSentence.scrollIntoView({ behavior: 'smooth', block: 'center' });
                     }
                 }, 800);
             }
        }

        // --- Initialization on DOM Load ---
        // IMPORTANT: This ensures JavaScript runs only after the HTML is fully loaded.
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize fill-in exercise functionality (clickable keys)
            initializeFillInKeys();

            // Initialize the matching games
            initializeMatchingGame('future-matching', 6);
            initializeMatchingGame('comparison-matching', 8);

            // Initialize the word order game
            initializeWordOrderGame();
        });

    </script>

</body>
</html>
