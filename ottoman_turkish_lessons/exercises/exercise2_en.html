<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Exercise: Translate Ottoman Phrases</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Naskh+Arabic:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@700&display=swap" rel="stylesheet">

    <style>
        /* Ottoman-inspired color scheme (Matches Lesson 2) */
        :root {
            --ottoman-blue: #0081C9; --ottoman-red: #C70039; --ottoman-gold: #FFB100;
            --ottoman-teal: #00B8A9; --ottoman-navy: #023E7D; --ottoman-cream: #FFF8E1;
            --ottoman-light-blue: #E0F7FF; --ottoman-pink: #FFCCDF; --ottoman-light-teal: #CCFCF6;
            --body-background: #1D2F6F; --text-color: #1A3A5A; --text-light: #FFFFFF;
        }
        body { font-family: 'Nunito', Arial, sans-serif; line-height: 1.7; max-width: 800px; margin: 0 auto; padding: 15px; background-color: var(--body-background); background-image: url('../ottoman_background.png'); background-repeat: repeat; background-size: 300px auto; box-sizing: border-box; color: var(--text-color); }
        [lang="ar"], td:first-child, .ottoman-text, .matching-item.ottoman-text, .fill-input.ottoman-input, .key-btn, .correct-answer-display { font-family: 'Noto Naskh Arabic', serif; font-size: 1.4em; line-height: 1.5; font-weight: 500; }
        .matching-item.ottoman-text, .key-btn { text-align: center; }
        .fill-input.ottoman-input { text-align: right; font-size: 1.6em; }
        td:first-child, td[lang="ar"] { text-align: left !important; padding-top: 18px; padding-bottom: 18px; }
        * { box-sizing: border-box; }
        h1, h2, h3 { color: var(--ottoman-navy); font-weight: 700; line-height: 1.3; }
        h1 { text-align: left; border-bottom: 3px solid var(--ottoman-gold); padding-bottom: 15px; margin-bottom: 25px; font-size: 1.8rem; color: var(--text-light); }
        h2 { font-size: 1.5rem; margin-top: 30px; }
        h3 { font-size: 1.2rem; margin-top: 25px; color: var(--ottoman-blue); }
        .section { background-color: var(--ottoman-light-blue); border-radius: 12px; padding: 25px; margin-bottom: 30px; box-shadow: 0 3px 10px rgba(0,0,0,0.05); }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.05); background-color: #C0E0F0; }
        .title-section { background-color: var(--ottoman-navy); border-radius: 12px; padding: 25px; margin-bottom: 30px; box-shadow: 0 3px 10px rgba(0,0,0,0.05); }
        .title-section h1 { text-align: left; border-bottom: 3px solid var(--ottoman-gold); padding-bottom: 15px; margin-bottom: 0; margin-top: 0; font-size: 1.8rem; color: var(--text-light); }
        th, td { padding: 12px 15px; text-align: left; border: none; }
        th { background-color: var(--ottoman-blue); color: var(--text-light); font-weight: 600; }
        tr:nth-child(even) { background-color: var(--ottoman-light-blue); }
        tr:hover { background-color: #B9E7FE; }

        /* Exercise styles - Matching lesson 2 */
        .exercise-list { list-style: none; padding: 0; margin: 0; }
        .exercise-item { background-color: var(--ottoman-gold); margin-bottom: 20px; padding: 15px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .ottoman-text-exercise { font-family: 'Noto Naskh Arabic', serif; font-size: 1.5em; line-height: 1.6; margin-bottom: 5px; text-align: left; direction: ltr; }
        .translit { font-style: italic; font-size: 0.9em; color: #555; display: block; margin-bottom: 8px; font-family: 'Nunito', Arial, sans-serif; }

        /* Question styles */
        .question { display: flex; align-items: center; margin-top: 10px; margin-bottom: 5px; flex-wrap: wrap; gap: 10px; }
        .answer-input { padding: 8px 12px; border: 2px solid #997000; border-radius: 6px; font-size: 16px; font-family: inherit; }
        .translation-input { width: 100%; max-width: 400px; }

        /* Button styles */
        .check-btn { padding: 8px 15px; background-color: #FFECB3; color: black; border: none; border-radius: 6px; cursor: pointer; font-family: inherit; font-weight: 600; transition: background-color 0.2s ease; }
        .check-btn:hover { background-color: #FFE082; }

        /* Feedback styles */
        .feedback, .fill-feedback { margin-top: 8px; margin-left: 5px; font-weight: bold; }
        .correct, .fill-feedback.correct { color: var(--ottoman-teal); }
        .incorrect, .fill-feedback.incorrect { color: var(--ottoman-red); }
        /* Make Ottoman text in correct answer display larger */
        .correct-answer-display {
            font-family: 'Noto Naskh Arabic', serif;
            font-size: 1.5em;
            font-weight: 600;
            text-align: left;
            direction: rtl;
            display: block;
            margin-top: 3px;
            color: #333;
        }
        /* Specific style for sentence building 'Correct' feedback */
        .fill-feedback.correct.sentence-building {
            color: black !important;
            font-size: 1.5rem !important;
            font-weight: bold !important;
            font-family: 'Nunito', Arial, sans-serif !important;
            background-color: var(--ottoman-gold);
            padding: 5px 10px;
            border-radius: 5px;
            display: inline-block;
        }

        /* Navigation */
        .nav-buttons-container { display: flex; justify-content: space-between; margin-top: 30px; margin-bottom: 40px; padding: 0 10px; }
        .nav-button { background-color: var(--ottoman-navy); color: var(--text-light); border: 3px solid var(--ottoman-blue); border-radius: 12px; padding: 15px 20px; font-family: 'Nunito', Arial, sans-serif; font-weight: 600; font-size: 1.3rem; cursor: pointer; box-shadow: 0 3px 10px rgba(0,0,0,0.1); transition: all 0.3s ease; text-decoration: none; text-align: center; display: inline-block; line-height: 1.4; }
        .nav-button:hover { background-color: var(--ottoman-blue); border-color: var(--ottoman-navy); }

        /* Media queries */
        @media (max-width: 600px) {
            .section, .title-section { padding: 20px 15px; border-radius: 10px; }
            h1 { font-size: 1.6rem; padding-bottom: 10px; } h2 { font-size: 1.3rem; } h3 { font-size: 1.1rem; }
            table { display: block; overflow-x: auto; white-space: nowrap; } th, td { padding: 10px 12px; } th { font-size: 0.9rem; padding: 10px 8px; }
            .question { flex-direction: column; align-items: stretch; }
            .answer-input, .translation-input { margin: 0; width: 100%; max-width: none; }
            .check-btn { margin-top: 10px; width: 100%; padding: 12px; }
            .feedback, .fill-feedback { display: block; margin-top: 8px; text-align: center; }
            .nav-buttons-container { flex-direction: column; gap: 15px; } .nav-button { width: 100%; margin: 0; font-size: 1rem;}
        }

        @media (max-width: 450px) {
            body { padding: 10px; }
        }

        /* ADDED STYLES FOR CONGRATS AND NAV BUTTONS - EXACTLY FROM SECOND FILE */
         .congrats-ottoman { font-family: 'Amiri', serif; font-size: 30px; line-height: 1.4; }
         .congrats-english { font-size: 1.2em; margin-top: 10px; }
         .prev-button { margin-right: auto; }
         .next-button, .exercises-button { margin-left: 10px; }
         .nav-button.next-button {
             padding-top: 27px; /* Add padding to the top to push text down */
         }
         /* End of added styles */
    </style>
</head>
<body>
    <div class="title-section">
        <h1>Exercises for Lesson 2</h1>
    </div>

    <div class="section">
        <h2>Important Note About The Exercises</h2>
        <p>You are under no obligation to complete these exercises. They are a lot of them and you may not need to do them all to get the point. Feel free to pick and choose whatever you'd like to do or not do.</p>
        <div style="background-color: #FFD6E0; padding: 15px 20px; margin: 15px 0; position: relative; border-radius: 4px; overflow: hidden;">
            <div style="position: absolute; left: 0; top: 0; bottom: 0; width: 8px; background-color: #FF4D6D;"></div>
            <p style="margin: 0; padding-left: 10px; color: #1A3A5A;">
                <strong>Note:</strong> You must know the Lesson 2 Vocabulary from the vocabulary section to do these exercises.
            </p>
        </div>

        <div class="nav-buttons-container">
            <a href="#dialogue-section" class="nav-button">Dialogue</a>
            <a href="#exercise1-section" class="nav-button">Exercise 1</a>
            <a href="#ottomantext-section" class="nav-button">Ottoman Text</a>
            <a href="#exercise2-section" class="nav-button">Exercise 2</a>
        </div>
    </div>

    <div class="section" id="dialogue-section">
        <h2>Dialogue: Questions and Answers (سوال و جواب)</h2>
        <p>Click on any phrase to see its English translation.</p>

        <table class="dialogue-table" id="dialogue-table">
            <thead>
                <tr>
                    <th style="width: 40%;">Question - سوال</th>
                    <th style="width: 40%;">Answer - جواب</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="ottoman-cell" onclick="showTranslation(this, 'Gentleman! Are you generous?')">Eféndi! Jömerd misiniz?</td>
                    <td class="ottoman-cell" onclick="showTranslation(this, 'Yes sir, I am generous.')">Evét eféndim, bén jömerdim.</td>
                </tr>
                <tr>
                    <td class="ottoman-cell" onclick="showTranslation(this, 'Is the soldier sick?')">Askér khasta midir?</td>
                    <td class="ottoman-cell" onclick="showTranslation(this, 'No sir, he is not sick.')">Khayr eféndim, khasta déyildir.</td>
                </tr>
                <tr>
                    <td class="ottoman-cell" onclick="showTranslation(this, 'Is the child sick or well?')">Chojuq khasta mï éyi mi?</td>
                    <td class="ottoman-cell" onclick="showTranslation(this, 'He is very well, sir.')">Pék éyi dir eféndim.</td>
                </tr>
                <tr>
                    <td class="ottoman-cell" onclick="showTranslation(this, 'Is that mountain very big?')">O dagh pék böyük mi?</td>
                    <td class="ottoman-cell" onclick="showTranslation(this, 'No sir, it is not big.')">Khayr eféndim, böyük déyildir.</td>
                </tr>
                <tr>
                    <td class="ottoman-cell" onclick="showTranslation(this, 'Is a valley a big mountain?')">Déré böyük bir dagh midir?</td>
                    <td class="ottoman-cell" onclick="showTranslation(this, 'No! A hill is a small mountain.')">Khayr! Dépé küchük bir dagh dir.</td>
                </tr>
                <tr>
                    <td class="ottoman-cell" onclick="showTranslation(this, 'Is a mountain a big hill?')">Dagh böyük bir dépé midir?</td>
                    <td class="ottoman-cell" onclick="showTranslation(this, 'Yes! A mountain is a big hill.')">Evét! Dagh bir böyük dépé dir.</td>
                </tr>
                <tr>
                    <td class="ottoman-cell" onclick="showTranslation(this, 'Is the good coffee ready?')">Éyi qahvé hazir midir?</td>
                    <td class="ottoman-cell" onclick="showTranslation(this, 'No sir! The good coffee is not ready, the water is ready.')">Khayr eféndim! Éyi qahvé hazir déyil, sou hazir.</td>
                </tr>
                <tr>
                    <td class="ottoman-cell" onclick="showTranslation(this, 'Is George, the friend, sick?')">Jorj dost bék khasta mi?</td>
                    <td class="ottoman-cell" onclick="showTranslation(this, 'Yes sir! He is very sick.')">Evét eféndim! Pék khasta dir.</td>
                </tr>
                <tr>
                    <td class="ottoman-cell" onclick="showTranslation(this, 'Are those beautiful houses red?')">O güzél évlér qirmizi mi?</td>
                    <td class="ottoman-cell" onclick="showTranslation(this, 'No sir! They are white.')">Khayr efféndim! Bayaz dir.</td>
                </tr>
                <tr>
                    <td class="ottoman-cell" onclick="showTranslation(this, 'Are those boys handsome?')">O oghlanlar güzél midirler?</td>
                    <td class="ottoman-cell" onclick="showTranslation(this, 'Yes! They are handsome and diligent.')">Evét! Güzéldér vé chalishqan dirlar.</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="section" id="exercise1-section">
        <h2>Exercise 1: Translate into English (تعليم)</h2>
        <p>Type the English translation for each Ottoman phrase below.</p>

        <ol class="exercise-list">
            <li class="exercise-item">
                <div class="ottoman-text-exercise">فقيرميسين ؟ زنكين ميسين ؟ — بن فقير دكيلم ، قونشولر فقيردر</div>
                <div class="translit">Faqir' misin? Zéngin misin? — Bén faqir déyilim, qonshular faqir dirlér.</div>
                <div class="question">
                    <input type="text" id="fill1" class="answer-input translation-input" placeholder="Type translation here..." style="background-color: var(--ottoman-gold);">
                    <button class="check-btn" onclick="checkFill(1, ['art thou poor? art thou rich? — i am not poor, the neighbours are poor.', 'are you poor? are you rich? — i am not poor, the neighbours are poor.'])">Check</button>
                </div>
                <div class="fill-feedback" id="feedback1"></div>
            </li>

            <li class="exercise-item">
                <div class="ottoman-text-exercise">كوزل دره ، بويوكدر طاغ ، كوچوك آطالر و يشيل ياپراقلر</div>
                <div class="translit">Güzél déré, büyük dagh, küchük adalar vé yéshil yapraqlar.</div>
                <div class="question">
                    <input type="text" id="fill2" class="answer-input translation-input" placeholder="Type translation here..." style="background-color: var(--ottoman-gold);">
                    <button class="check-btn" onclick="checkFill(2, ['pretty valley, great mountains, small islands and green leaves.', 'beautiful valley, big mountain, small islands and green leaves.'])">Check</button>
                </div>
                <div class="fill-feedback" id="feedback2"></div>
            </li>

            <li class="exercise-item">
                <div class="ottoman-text-exercise">زنكين قونشولر ، فقير دوستلر و بر اختيار عسكر</div>
                <div class="translit">Zéngin qonshular, faqir dostlar vé bir ikhiiyar askér.</div>
                <div class="question">
                    <input type="text" id="fill3" class="answer-input translation-input" placeholder="Type translation here..." style="background-color: var(--ottoman-gold);">
                    <button class="check-btn" onclick="checkFill(3, ['rich neighbours, poor friends and an old soldier.', 'wealthy neighbors, poor friends and an old soldier.'])">Check</button>
                </div>
                <div class="fill-feedback" id="feedback3"></div>
            </li>

            <li class="exercise-item">
                <div class="ottoman-text-exercise">بر تازه صو و — صو تازه در ، قهوه تازه دكلدر</div>
                <div class="translit">Bir tazé sou vé — Sou tazé dir, qahvé tazé déyil dir.</div>
                <div class="question">
                    <input type="text" id="fill4" class="answer-input translation-input" placeholder="Type translation here..." style="background-color: var(--ottoman-gold);">
                    <button class="check-btn" onclick="checkFill(4, ['a fresh water and — the water is fresh, the coffee is not fresh.', 'fresh water and — the water is fresh, the coffee is not fresh.'])">Check</button>
                </div>
                <div class="fill-feedback" id="feedback4"></div>
            </li>

            <li class="exercise-item">
                <div class="ottoman-text-exercise">ياپراق يشيل مى در ؟ — ياپراق يشيل در ، قرمزى دكلدر</div>
                <div class="translit">Yapraq yéshil mi dir? — Yapraq yéshil dir, qirmizi déyil dir.</div>
                <div class="question">
                    <input type="text" id="fill5" class="answer-input translation-input" placeholder="Type translation here..." style="background-color: var(--ottoman-gold);">
                    <button class="check-btn" onclick="checkFill(5, ['is the leaf green? — the leaf is green, not red.', 'is the leaf green? — the leaf is green and not red.'])">Check</button>
                </div>
                <div class="fill-feedback" id="feedback5"></div>
            </li>

            <li class="exercise-item">
                <div class="ottoman-text-exercise">چوجوقلر تنبل مى در ؟ — خوقر ! چوجوقلر تنبل دكللردر ، چاليشقان درلر</div>
                <div class="translit">Chojouqlar ténbél midir? — Khayr, Efféndim, chojouqlar ténbél déyil dirlér, chalishqan dirlar.</div>
                <div class="question">
                    <input type="text" id="fill6" class="answer-input translation-input" placeholder="Type translation here..." style="background-color: var(--ottoman-gold);">
                    <button class="check-btn" onclick="checkFill(6, ['are the children lazy? — no, sir, the children are not lazy, they are diligent.', 'are the children lazy? — no, sir, the children are not lazy, they are hardworking.'])">Check</button>
                </div>
                <div class="fill-feedback" id="feedback6"></div>
            </li>

            <li class="exercise-item">
                <div class="ottoman-text-exercise">عسكر اختيارمى كنج مى ؟ — افندم ! عسكرك اختيار و خسته در</div>
                <div class="translit">Askér ikhiiyar mi jénji mi? — Efféndim, askér pék ikhiiyar vé khasta dir.</div>
                <div class="question">
                    <input type="text" id="fill7" class="answer-input translation-input" placeholder="Type translation here..." style="background-color: var(--ottoman-gold);">
                    <button class="check-btn" onclick="checkFill(7, ['is the soldier old or young? — sir, the soldier is very old and sick.', 'is the soldier old or young? — my sir, the soldier is old and sick.'])">Check</button>
                </div>
                <div class="fill-feedback" id="feedback7"></div>
            </li>

            <li class="exercise-item">
                <div class="ottoman-text-exercise">او جومرد دوست يك خسته در</div>
                <div class="translit">O jömerd dost pék khasta dir.</div>
                <div class="question">
                    <input type="text" id="fill8" class="answer-input translation-input" placeholder="Type translation here..." style="background-color: var(--ottoman-gold);">
                    <button class="check-btn" onclick="checkFill(8, ['that generous friend is very sick.', 'the generous friend is very sick.'])">Check</button>
                </div>
                <div class="fill-feedback" id="feedback8"></div>
            </li>

            <li class="exercise-item">
                <div class="ottoman-text-exercise">بر تنبل دكلز ، چاليشقان ز</div>
                <div class="translit">Biz ténbél déyiliz, chalishqaniz.</div>
                <div class="question">
                    <input type="text" id="fill9" class="answer-input translation-input" placeholder="Type translation here..." style="background-color: var(--ottoman-gold);">
                    <button class="check-btn" onclick="checkFill(9, ['we are not lazy, we are diligent.', 'we are not lazy, we are hardworking.'])">Check</button>
                </div>
                <div class="fill-feedback" id="feedback9"></div>
            </li>

            <li class="exercise-item">
                <div class="ottoman-text-exercise">سن يك تنبل سين. — بن تنبل دكلم ، (سن) تنبل سين</div>
                <div class="translit">Sén pék ténbél sin. — Bén ténbél déyil im, (sén) ténbél sin.</div>
                <div class="question">
                    <input type="text" id="fill10" class="answer-input translation-input" placeholder="Type translation here..." style="background-color: var(--ottoman-gold);">
                    <button class="check-btn" onclick="checkFill(10, ['thou art very lazy. — i am not lazy, you are lazy.', 'you are very lazy. — i am not lazy, you are lazy.'])">Check</button>
                </div>
                <div class="fill-feedback" id="feedback10"></div>
            </li>

            <li class="exercise-item">
                <div class="ottoman-text-exercise">خواير افندم ! تنبل شو يورغون قونشودر</div>
                <div class="translit">Khayr, Efféndim, ténbél shou yorghounou qonshoudour.</div>
                <div class="question">
                    <input type="text" id="fill11" class="answer-input translation-input" placeholder="Type translation here..." style="background-color: var(--ottoman-gold);">
                    <button class="check-btn" onclick="checkFill(11, ['no, sir, that tired neighbour is lazy.', 'no, sir, that exhausted neighbor is lazy.'])">Check</button>
                </div>
                <div class="fill-feedback" id="feedback11"></div>
            </li>

            <li class="exercise-item">
                <div class="ottoman-text-exercise">احمد افندى دوست و خصم در ، دشمن دكلدر</div>
                <div class="translit">Ahmed effédi dost vé khasim dir, düshmén déyil dir.</div>
                <div class="question">
                    <input type="text" id="fill12" class="answer-input translation-input" placeholder="Type translation here..." style="background-color: var(--ottoman-gold);">
                    <button class="check-btn" onclick="checkFill(12, ['mr. ahmed is a friend and a relative, he is not an enemy.', 'ahmed efendi is a friend and relative, not an enemy.'])">Check</button>
                </div>
                <div class="fill-feedback" id="feedback12"></div>
            </li>

            <li class="exercise-item">
                <div class="ottoman-text-exercise">آرتين بك قونشو و دوست در</div>
                <div class="translit">Artin Béy qonshou vé dost dour.</div>
                <div class="question">
                    <input type="text" id="fill13" class="answer-input translation-input" placeholder="Type translation here..." style="background-color: var(--ottoman-gold);">
                    <button class="check-btn" onclick="checkFill(13, ['mr. artin is a neighbour and a friend.', 'artin bey is a neighbor and a friend.'])">Check</button>
                </div>
                <div class="fill-feedback" id="feedback13"></div>
            </li>

            <li class="exercise-item">
                <div class="ottoman-text-exercise">قهوه حاضر ميدر ؟ كلديكز؟ — اوت افندم ! قهوه و صو حاضر در</div>
                <div class="translit">Qahvé hazir mi dir, géldiniz mi? — Evét, Efféndim, qahvé vé sou hazir dir.</div>
                <div class="question">
                    <input type="text" id="fill14" class="answer-input translation-input" placeholder="Type translation here..." style="background-color: var(--ottoman-gold);">
                    <button class="check-btn" onclick="checkFill(14, ['is the coffee ready or not? — yes, gentlemen, the coffee and the water are ready.', 'is the coffee ready? have you come? — yes, sir, the coffee and water are ready.'])">Check</button>
                </div>
                <div class="fill-feedback" id="feedback14"></div>
            </li>

            <li class="exercise-item">
                <div class="ottoman-text-exercise">جورجى بك خسته مى در ؟ — خير افندم ! خسته دكل يورغندر</div>
                <div class="translit">Jorji Béy khasta mi dir? — Khayr, Efféndim, khasta déyil yorghouna dour.</div>
                <div class="question">
                    <input type="text" id="fill15" class="answer-input translation-input" placeholder="Type translation here..." style="background-color: var(--ottoman-gold);">
                    <button class="check-btn" onclick="checkFill(15, ['is master george sick? — no, sir, he is not sick, he is tired.', 'is george bey sick? — no, sir, he is not sick, he is tired.'])">Check</button>
                </div>
                <div class="fill-feedback" id="feedback15"></div>
            </li>
        </ol>
    </div>

    <div class="section" id="ottomantext-section"> 
        <h2>Original Ottoman Text</h2>
        <p>If you could do Exercise 1, then you can read this! This is the original Ottoman text of Exercise 1. Make sure to read the entire thing for "real" Ottoman reading practice.</p>
        <div style="text-align: center; margin: 20px 0;">
            <img src="ex_2.png" alt="Original Ottoman Text" style="max-width: 100%; border-radius: 8px; box-shadow: 0 3px 10px rgba(0,0,0,0.1);">
        </div>
        <p>Congratulations on reading your second Ottoman text!</p>
    </div>
    
    <div class="section" id="exercise2-section">
        <h2>Exercise 2: Translate into Ottoman (تمرین)</h2>
        <p>Type the Ottoman translation for each English phrase below.</p>
        <p><strong>Note:</strong> You must use a Persian or Ottoman keyboard to be able to do this exercise. <em>Do Ottoman keyboards even exist?</em></p>
        
        <ol class="exercise-list">
            <li class="exercise-item">
                <div class="ottoman-text-exercise" style="font-family: 'Nunito', Arial, sans-serif; font-size: 1.2em;">Little hills. Red flowers.</div>
                <div class="question">
                    <input type="text" id="fill16" class="answer-input translation-input fill-input ottoman-input" dir="rtl" placeholder="" style="background-color: var(--ottoman-gold);">
                    <button class="check-btn" onclick="checkFill(16, ['كوچوك دپه لر. قرمزى چيچكلر'])">Check</button>
                </div>
                <div class="fill-feedback" id="feedback16"></div>
            </li>

            <li class="exercise-item">
                <div class="ottoman-text-exercise" style="font-family: 'Nunito', Arial, sans-serif; font-size: 1.2em;">The green leaves and the beautiful gardens.</div>
                <div class="question">
                    <input type="text" id="fill17" class="answer-input translation-input fill-input ottoman-input" dir="rtl" placeholder="" style="background-color: var(--ottoman-gold);">
                    <button class="check-btn" onclick="checkFill(17, ['يشيل ياپراقلر و كوزل باغچه لر'])">Check</button>
                </div>
                <div class="fill-feedback" id="feedback17"></div>
            </li>

            <li class="exercise-item">
                <div class="ottoman-text-exercise" style="font-family: 'Nunito', Arial, sans-serif; font-size: 1.2em;">Is not the house large? — Yes, Sir, it is large.</div>
                <div class="question">
                    <input type="text" id="fill18" class="answer-input translation-input fill-input ottoman-input" dir="rtl" placeholder="" style="background-color: var(--ottoman-gold);">
                    <button class="check-btn" onclick="checkFill(18, ['او بويوك دكل مى در ؟ — اوت افندم بويوكدر'])">Check</button>
                </div>
                <div class="fill-feedback" id="feedback18"></div>
            </li>

            <li class="exercise-item">
                <div class="ottoman-text-exercise" style="font-family: 'Nunito', Arial, sans-serif; font-size: 1.2em;">The islands are small. That island is not small.</div>
                <div class="question">
                    <input type="text" id="fill19" class="answer-input translation-input fill-input ottoman-input" dir="rtl" placeholder="" style="background-color: var(--ottoman-gold);">
                    <button class="check-btn" onclick="checkFill(19, ['آطه لر كوچوكدر. او آطه كوچوك دكلدر'])">Check</button>
                </div>
                <div class="fill-feedback" id="feedback19"></div>
            </li>

            <li class="exercise-item">
                <div class="ottoman-text-exercise" style="font-family: 'Nunito', Arial, sans-serif; font-size: 1.2em;">The coffee is very good. It is not a very good coffee.</div>
                <div class="question">
                    <input type="text" id="fill20" class="answer-input translation-input fill-input ottoman-input" dir="rtl" placeholder="" style="background-color: var(--ottoman-gold);">
                    <button class="check-btn" onclick="checkFill(20, ['قهوه چوق ايى در. بك ايى بر قهوه دكلدر'])">Check</button>
                </div>
                <div class="fill-feedback" id="feedback20"></div>
            </li>

            <li class="exercise-item">
                <div class="ottoman-text-exercise" style="font-family: 'Nunito', Arial, sans-serif; font-size: 1.2em;">The gardens and the trees are very nice.</div>
                <div class="question">
                    <input type="text" id="fill21" class="answer-input translation-input fill-input ottoman-input" dir="rtl" placeholder="" style="background-color: var(--ottoman-gold);">
                    <button class="check-btn" onclick="checkFill(21, ['باغچه لر و آغاچلر چوق ايى درلر'])">Check</button>
                </div>
                <div class="fill-feedback" id="feedback21"></div>
            </li>

            <li class="exercise-item">
                <div class="ottoman-text-exercise" style="font-family: 'Nunito', Arial, sans-serif; font-size: 1.2em;">Is the coffee ready? — No, Sir!</div>
                <div class="question">
                    <input type="text" id="fill22" class="answer-input translation-input fill-input ottoman-input" dir="rtl" placeholder="" style="background-color: var(--ottoman-gold);">
                    <button class="check-btn" onclick="checkFill(22, ['قهوه حاضر مى ؟ — خير، افندم، دكل'])">Check</button>
                </div>
                <div class="fill-feedback" id="feedback22"></div>
            </li>

            <li class="exercise-item">
                <div class="ottoman-text-exercise" style="font-family: 'Nunito', Arial, sans-serif; font-size: 1.2em;">Are you ready? — Yes, gentlemen, I am ready.</div>
                <div class="question">
                    <input type="text" id="fill23" class="answer-input translation-input fill-input ottoman-input" dir="rtl" placeholder="" style="background-color: var(--ottoman-gold);">
                    <button class="check-btn" onclick="checkFill(23, ['سز حاضر ميسكز ؟ — اوت، افنديلر، حاضرم'])">Check</button>
                </div>
                <div class="fill-feedback" id="feedback23"></div>
            </li>

            <li class="exercise-item">
                <div class="ottoman-text-exercise" style="font-family: 'Nunito', Arial, sans-serif; font-size: 1.2em;">Who is Mr. Charles? — He is a good neighbour.</div>
                <div class="question">
                    <input type="text" id="fill24" class="answer-input translation-input fill-input ottoman-input" dir="rtl" placeholder="" style="background-color: var(--ottoman-gold);">
                    <button class="check-btn" onclick="checkFill(24, ['چارلى افندى كيم در ؟ — چوق ايى بر قونشو در'])">Check</button>
                </div>
                <div class="fill-feedback" id="feedback24"></div>
            </li>

            <li class="exercise-item">
                <div class="ottoman-text-exercise" style="font-family: 'Nunito', Arial, sans-serif; font-size: 1.2em;">Is the water fresh? — No, Sir, it is not fresh.</div>
                <div class="question">
                    <input type="text" id="fill25" class="answer-input translation-input fill-input ottoman-input" dir="rtl" placeholder="" style="background-color: var(--ottoman-gold);">
                    <button class="check-btn" onclick="checkFill(25, ['صو تازه ميدر ؟ خير افندم تازه دكلدر'])">Check</button>
                </div>
                <div class="fill-feedback" id="feedback25"></div>
            </li>

            <li class="exercise-item">
                <div class="ottoman-text-exercise" style="font-family: 'Nunito', Arial, sans-serif; font-size: 1.2em;">Give fresh water.</div>
                <div class="question">
                    <input type="text" id="fill26" class="answer-input translation-input fill-input ottoman-input" dir="rtl" placeholder="" style="background-color: var(--ottoman-gold);">
                    <button class="check-btn" onclick="checkFill(26, ['بر تازه صو ور'])">Check</button>
                </div>
                <div class="fill-feedback" id="feedback26"></div>
            </li>

            <li class="exercise-item">
                <div class="ottoman-text-exercise" style="font-family: 'Nunito', Arial, sans-serif; font-size: 1.2em;">Is the garden very far? — No, Sir, it is not very far, it is near!</div>
                <div class="question">
                    <input type="text" id="fill27" class="answer-input translation-input fill-input ottoman-input" dir="rtl" placeholder="" style="background-color: var(--ottoman-gold);">
                    <button class="check-btn" onclick="checkFill(27, ['باغچه بك اوزاق ميدر ؟ — خير، افندم، چوق اوزاق دكلدر، ياقيندر'])">Check</button>
                </div>
                <div class="fill-feedback" id="feedback27"></div>
            </li>

            <li class="exercise-item">
                <div class="ottoman-text-exercise" style="font-family: 'Nunito', Arial, sans-serif; font-size: 1.2em;">Ahmed Bey is a good soldier.</div>
                <div class="question">
                    <input type="text" id="fill28" class="answer-input translation-input fill-input ottoman-input" dir="rtl" placeholder="" style="background-color: var(--ottoman-gold);">
                    <button class="check-btn" onclick="checkFill(28, ['احمد بك ايى بر عسكر در'])">Check</button>
                </div>
                <div class="fill-feedback" id="feedback28"></div>
            </li>

            <li class="exercise-item">
                <div class="ottoman-text-exercise" style="font-family: 'Nunito', Arial, sans-serif; font-size: 1.2em;">He is a generous man.</div>
                <div class="question">
                    <input type="text" id="fill29" class="answer-input translation-input fill-input ottoman-input" dir="rtl" placeholder="" style="background-color: var(--ottoman-gold);">
                    <button class="check-btn" onclick="checkFill(29, ['جومرد بر آدمدر'])">Check</button>
                </div>
                <div class="fill-feedback" id="feedback29"></div>
            </li>

            <li class="exercise-item">
                <div class="ottoman-text-exercise" style="font-family: 'Nunito', Arial, sans-serif; font-size: 1.2em;">That gentleman is not avaricious.</div>
                <div class="question">
                    <input type="text" id="fill30" class="answer-input translation-input fill-input ottoman-input" dir="rtl" placeholder="" style="background-color: var(--ottoman-gold);">
                    <button class="check-btn" onclick="checkFill(30, ['او افندى طمعكار دكلدر'])">Check</button>
                </div>
                <div class="fill-feedback" id="feedback30"></div>
            </li>
        </ol>
    </div>

    <!-- Congratulations Section -->
    <div class="section">
        <h2 style="text-align: center;">
            <span class="congrats-ottoman">تبريكات<br>درس ايكنجى اكمال ايتدكز</span><br><br>
            <span class="congrats-english" style="display: block; font-size: inherit;">Congratulations<br>You finished the exercises for Lesson 2</span>
        </h2>
    </div>

    <!-- Navigation Buttons -->
    <div class="nav-buttons-container">
        <a href="../lessons/lesson1_en.html" class="nav-button prev-button">Back to <br></b>Lesson 1</a>
        <a href="../lessons/lesson3_en.html" class="nav-button next-button">Start Lesson 3</a>
    </div>

    <style>
        /* Additional styles for the dialogue table */
        .dialogue-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            background-color: #F0FAFF; /* Very light blue background */
        }

        .dialogue-table th {
            background-color: var(--ottoman-blue);
            color: var(--text-light);
            padding: 12px 15px;
            text-align: center;
            font-weight: 600;
        }

        .dialogue-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #B9E7FE;
            cursor: pointer;
            position: relative;
            transition: background-color 0.2s;
            font-family: 'Nunito', Arial, sans-serif !important;
            font-size: 1rem !important;
            font-weight: 400 !important;
            line-height: 1.7 !important;
        }

        .dialogue-table td:first-child {
            font-family: 'Nunito', Arial, sans-serif !important;
            font-size: 1rem !important;
            font-weight: 400 !important;
            line-height: 1.7 !important;
        }

        .dialogue-table td:hover {
            background-color: #B9E7FE;
        }

        .ottoman-cell {
            position: relative;
        }

        .translation {
            display: block;
            margin-top: 5px;
            font-style: italic;
            color: #555;
            font-size: 0.9em;
        }
    </style>

    <script>
        // Function to show/hide translations when dialogue cells are clicked
        function showTranslation(element, translation) {
            // Check if translation is already showing
            const existingTranslation = element.querySelector('.translation');

            if (existingTranslation) {
                // If translation exists, remove it (toggle off)
                element.removeChild(existingTranslation);
            } else {
                // If no translation showing, add it
                const translationSpan = document.createElement('span');
                translationSpan.className = 'translation';
                translationSpan.textContent = translation;
                element.appendChild(translationSpan);
            }
        }

        // --- General Fill-in Exercise Checker ---
        function checkFill(id, correctAnswers) {
            const input = document.getElementById(`fill${id}`);
            const feedback = document.getElementById(`feedback${id}`);
            if (!input || !feedback) return;

            const userAnswer = input.value.trim().toLowerCase();

            // More aggressive normalization to ignore spelling and punctuation
            let normalizedUserAnswer = userAnswer
                .replace(/[.,?!\[\](){}:;'"\-_]/g, '') // Remove all punctuation
                .replace(/\s+/g, ' ')                  // Standardize whitespace
                .trim();                               // Remove leading/trailing spaces

            correctAnswers = Array.isArray(correctAnswers) ? correctAnswers : [correctAnswers]; // Ensure array

            // Determine if it's a sentence building exercise
            const isSentenceBuilding = true; // All exercises are considered sentence building

            let isCorrect = false;
            let correctDisplayAnswer = correctAnswers[0]; // Store the first correct answer for display

            // Format the display answer based on input type
            if (input.classList.contains('ottoman-input')) {
                 // For Ottoman input, just use the first answer as is.
                 correctDisplayAnswer = correctAnswers[0];
            } else {
                // For English input, capitalize first letter of each sentence
                correctDisplayAnswer = correctDisplayAnswer.replace(/(?:^|[.!?]\s+)([a-z])/g, (match, letter) => {
                    return match.replace(letter, letter.toUpperCase());
                });
            }


            // Normalize correct answers for comparison - much more lenient now
            const normalizedCorrectAnswers = correctAnswers.map(ans => {
                // Normalize based on input type
                if (input.classList.contains('ottoman-input')) {
                    // For Ottoman, basic trim and potentially remove kashida/diacritics if needed
                    return ans.trim().replace(/[\u064B-\u065F\u0640]/g, '');
                } else {
                    // For English, use the aggressive normalization
                    return ans.toLowerCase()
                       .replace(/[.,?!\[\](){}:;'"\-_]/g, '') // Remove all punctuation
                       .replace(/\s+/g, ' ')                  // Standardize whitespace
                       .trim();                                // Remove leading/trailing spaces
                }
            });


            // Check if any of the normalized correct answers match the normalized user answer
             for (let normAnswer of normalizedCorrectAnswers) {
                 // Check based on input type
                 if (input.classList.contains('ottoman-input')) {
                      // Direct comparison for Ottoman after normalization
                      if (normalizedUserAnswer === normAnswer) {
                           isCorrect = true;
                           break;
                      }
                 } else {
                      // Lenient check for English
                      // Simple matching allowing for different spellings by checking if main words are present
                      const userWords = normalizedUserAnswer.split(' ');
                      const correctWords = normAnswer.split(' ');
                      const threshold = Math.max(2, Math.floor(correctWords.length * 0.5)); // At least 50% of words should match
                      let matchCount = 0;
                      for (const userWord of userWords) {
                          if (userWord.length > 2 && correctWords.some(word =>
                              word.includes(userWord.substring(0, Math.floor(userWord.length * 0.7))) ||
                              userWord.includes(word.substring(0, Math.floor(word.length * 0.7)))
                          )) {
                              matchCount++;
                          }
                      }
                      if (matchCount >= threshold) {
                          isCorrect = true;
                          break;
                      }
                      // Alternative: Direct comparison after normalization
                      if (normalizedUserAnswer === normAnswer) {
                          isCorrect = true;
                          break;
                      }
                 }
             }


            // --- Feedback Display (Match Lesson 2) ---
            const correctFeedbackText = isSentenceBuilding ? 'Correct 💯' : 'Correct!';
            feedback.textContent = isCorrect ? correctFeedbackText : 'Incorrect ❌';

            // Add sentence-building class for styling if it's a sentence building exercise
            if (isCorrect && isSentenceBuilding) {
                feedback.className = 'fill-feedback correct sentence-building';
            } else {
                feedback.className = `fill-feedback ${isCorrect ? 'correct' : 'incorrect'}`;
            }
            input.style.borderColor = isCorrect ? 'var(--ottoman-teal)' : 'var(--ottoman-red)';

            if (!isCorrect && correctDisplayAnswer !== '') {
                // Show the correct answer on incorrect attempts
                feedback.innerHTML = `Incorrect ❌ Correct: <span class="correct-answer-display">${correctDisplayAnswer}</span>`;
                // Don't clear input on incorrect - let user see their mistake
                // Clear input for Ottoman exercises
                if (input.classList.contains('ottoman-input')) {
                     input.value = '';
                }
            }
        }

        // Add event listeners to all input fields for Enter key
        document.addEventListener('DOMContentLoaded', function() {
            // Get all input fields
            const inputs = document.querySelectorAll('.answer-input');

            // Add event listener to each input field
            inputs.forEach(input => {
                input.addEventListener('keypress', function(event) {
                    // Check if the pressed key is Enter
                    if (event.key === 'Enter') {
                        // Prevent default behavior (form submission)
                        event.preventDefault();

                        // Find the nearest check button and click it
                        const checkBtn = this.closest('.question').querySelector('.check-btn');
                        if (checkBtn) {
                            checkBtn.click();
                        }
                    }
                });
            });
        });
    </script>
</body>
</html>