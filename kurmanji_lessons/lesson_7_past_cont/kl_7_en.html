<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Lesson 7: Continuous Past Tense and Expressions</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --kurdish-red: #9E2A2B;
            --kurdish-yellow: #F5CB5C;
            --background-cream: #FFF7E0;
            --text-color: #333333;
            --kurdish-green: #4F7942;
            --light-green: #E5F0E3;
        }

        body {
            font-family: 'Nunito', Arial, sans-serif;
            line-height: 1.7;
            max-width: 800px;
            margin: 0 auto;
            padding: 15px;
            background-color: var(--background-cream);
            /* --- RESTORED BACKGROUND IMAGE --- */
            background-image: url('../kurmanji_background.png'); /* Assuming this path is correct */
            background-repeat: repeat;
            background-size: 200px 200px;
            box-sizing: border-box;
            color: var(--text-color);
        }

        * {
            box-sizing: border-box;
        }

        .title-section {
            background-color: #005E30; /* Darker green for title */
            color: white;
            padding: 25px;
            margin-bottom: 25px;
            border-radius: 12px;
            position: relative;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .title-section h1 {
            color: white;
            margin: 0;
            text-align: left;
        }

        .title-section hr {
            background-color: var(--kurdish-yellow);
            height: 4px;
            margin-top: 15px;
            margin-bottom: 0;
            border: none;
        }

        h1, h2 {
            color: var(--kurdish-red);
            font-weight: 700;
            line-height: 1.3;
        }

        h1 {
            text-align: left;
            font-size: 1.8rem;
            margin-bottom: 5px;
        }

        h2 {
            font-size: 1.5rem;
            margin-top: 30px;
            color: var(--kurdish-red);
        }

        h3 {
            color: var(--kurdish-red); /* Keep h3 red */
            font-weight: 700;
            line-height: 1.3;
            font-size: 1.2rem; /* Slightly larger h3 */
            margin-top: 25px;
        }

        hr {
            border: none;
            height: 3px;
            background-color: var(--kurdish-yellow);
            margin-bottom: 25px;
        }

        .section {
            background-color: rgba(255, 255, 255, 0.9); /* Changed to half-transparent white */
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.05);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        th, td {
            padding: 12px 15px;
            text-align: left;
            border: none;
        }

        th {
            background-color: var(--kurdish-yellow);
            color: var(--text-color);
            font-weight: 600;
        }

        tr:nth-child(even) {
            background-color: var(--background-cream);
        }
         tr:nth-child(odd) {
            background-color: #FEFDFB; /* Lighter cream for odd rows */
        }

        tr:hover {
            background-color: #FFEEB4; /* Keep hover effect */
        }

        .note {
            background-color: #FFF2C2; /* Light yellow for notes */
            padding: 15px;
            border-left: 4px solid var(--kurdish-yellow);
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
        }

        .highlight {
            font-weight: 700;
            color: var(--kurdish-red);
        }

        .examples {
            background-color: var(--background-cream);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .examples p:not(:first-of-type) {
            margin: 10px 0;
            padding: 10px;
            border-radius: 6px;
        }

        /* Alternating background colors for example sentences */
        .examples p:nth-of-type(even) {
            background-color: #FFF2C2;
        }

        .examples p:nth-of-type(odd):not(:first-of-type) {
            background-color: #FBEAA6;
        }

        .exercise { /* General container for any exercise block */
            background-color: #E5F0E3; /* Light green for exercise sections */
            padding: 20px;
            border-radius: 8px;
            margin: 25px 0;
        }

        .check-btn { /* General check button style */
            background-color: var(--kurdish-yellow);
            color: var(--text-color);
            border: none;
            padding: 10px 15px;
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.2s ease;
            font-family: inherit;
            font-weight: 600;
            margin-top: 10px; /* Added margin for spacing */
        }

        .check-btn:hover {
            background-color: #DBA53A; /* Darker yellow on hover */
        }

        .feedback { /* General feedback style */
            margin-top: 8px;
            margin-left: 5px;
            font-weight: bold;
            min-height: 1.5em; /* Reserve space */
        }

        .correct {
            color: #4F7942; /* Green for correct */
        }

        .incorrect {
            color: var(--kurdish-red); /* Red for incorrect */
        }
         .correct-answer-display { /* Style for showing the correct answer in feedback */
             display: inline-block;
             margin-left: 5px;
             font-weight: normal;
             font-style: italic;
             color: #555; /* Greyish color */
         }


        /* Matching Game Styles */
        .matching-game {
            background-color: #FFF7E0;
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px; /* Spacing between game and content above */
            margin-bottom: 25px; /* Spacing between games */
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        .matching-container {
            display: flex;
            justify-content: space-between;
            gap: 15px;
            margin-bottom: 20px;
        }
        .matching-column {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
         /* REMOVED matching-column h4 style */
         .matching-item-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
         }
        .matching-item {
            padding: 12px 15px;
            background-color: white;
            border: 2px solid var(--kurdish-yellow);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: center;
            -webkit-tap-highlight-color: transparent;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            font-weight: 500;
        }
        .matching-item:hover { background-color: #FFF2C2; }
        .matching-item.selected {
            background-color: var(--kurdish-yellow);
            color: var(--text-color);
            border-color: #DBA53A;
        }
        .matching-item.matched {
            background-color: #4F7942;
            color: white;
            border-color: #3B5A31;
            cursor: default;
            opacity: 0.7;
        }
        .matching-result { text-align: center; margin-top: 15px; }
        .matching-feedback {
            font-weight: bold;
            margin-bottom: 12px;
            min-height: 1.5em;
        }
        .matching-feedback.correct { color: var(--kurdish-green); }
        .matching-feedback.incorrect { color: var(--kurdish-red); }
        .match-progress {
            margin-bottom: 15px;
            font-weight: 600;
            color: var(--text-color);
        }
         .match-progress .matches-count { font-weight: 700; }


        /* Fill-in Exercise (Subjunctive - Style EXACTLY like Ukrainian Ex 3) */
        .fill-exercise { /* Container for the whole fill-in exercise section */
             background-color: var(--light-green); /* Match general exercise background */
             padding: 20px;
             border-radius: 8px;
             margin: 25px 0;
        }
        .fill-item { /* Container for each question/input pair */
            background-color: white; /* White background for each item */
            margin-bottom: 20px;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .exercise-row { /* Row containing sentence parts and input */
            display: flex;
            align-items: baseline; /* Align text and input nicely */
            gap: 8px;
            margin-bottom: 10px;
            flex-wrap: wrap;
            color: var(--text-color);
            font-weight: 500;
            line-height: 1.8; /* Improve spacing with input */
        }
        .fill-input { /* Input field style */
            width: 150px; /* Adjust width as needed */
            padding: 8px 12px;
            border: 2px solid var(--kurdish-yellow);
            border-radius: 6px;
            font-size: 16px;
            font-family: inherit;
            margin: 0 5px; /* Add some horizontal margin */
            background-color: #f8f8f8; /* Slightly greyed out for readonly */
            text-align: center; /* Center text in input */
        }
        .fill-input:focus { outline: none; } /* Remove focus outline for readonly */
        .verb-hint { /* Style for the hint like (çûn - to go) */
             font-size: 0.9em;
             color: #555;
             margin-left: 5px;
         }
        .key-container { /* Container for clickable key buttons */
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 12px;
            margin-top: 8px; /* Add space above keys */
        }
        .key-btn { /* Style for individual key buttons */
            padding: 5px 12px;
            background-color: var(--background-cream);
            border: 1px solid var(--kurdish-yellow);
            border-radius: 6px;
            cursor: pointer;
            color: var(--text-color);
            font-size: 0.9em;
            font-family: inherit;
            text-align: center;
        }
        .key-btn:hover { background-color: var(--kurdish-yellow); }
        .fill-check { /* Check button specific to fill-in exercises */
            background-color: var(--kurdish-yellow);
            color: var(--text-color);
            border: none;
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
            font-family: inherit;
            font-weight: 600;
            transition: background-color 0.2s ease;
            display: block; /* Make button block level */
            margin-top: 10px; /* Add margin */
        }
        .fill-check:hover { background-color: #DBA53A; }
        .fill-feedback { /* Feedback specific to fill-in exercises */
            margin-top: 10px;
            font-weight: bold;
            min-height: 1.5em; /* Reserve space */
        }
        .fill-feedback.correct { color: var(--kurdish-green); }
        .fill-feedback.incorrect { color: var(--kurdish-red); }


        /* Dialogue box styles */
        .dialogue-box {
            background-color: #f5f5f5;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .dialogue-line { margin-bottom: 10px; }
        .speaker { font-weight: bold; color: var(--kurdish-red); margin-right: 10px; }

        /* Activity card styles */
        .activities-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin: 20px 0; }
        .activity-card { background-color: var(--light-green); border-radius: 8px; padding: 15px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); text-align: center; }
        .activity-phrase { font-weight: bold; margin-bottom: 5px; color: #4F7942; }

        /* Navigation */
        .nav-buttons-container { display: flex; justify-content: center; margin-top: 30px; margin-bottom: 40px; padding: 0 10px; }
        .nav-button { background-color: var(--kurdish-red); color: white; border: none; border-radius: 12px; padding: 15px 20px; font-family: 'Nunito', Arial, sans-serif; font-weight: 600; font-size: 1.3rem; cursor: pointer; box-shadow: 0 3px 10px rgba(0,0,0,0.1); transition: all 0.3s ease; text-decoration: none; text-align: center; display: inline-block; line-height: 1.4; }
        .nav-button:hover { background-color: #7e2223; }

        /* Vocabulary section styles */
        .vocabulary-section { background-color: var(--background-cream); padding: 20px; border-radius: 8px; margin: 20px 0; }
        .vocab-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin: 15px 0; }
        .vocab-item { background-color: white; border-radius: 8px; padding: 12px; text-align: center; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        .kurdish-word { font-weight: bold; color: var(--kurdish-red); margin-bottom: 5px; }
        /* Added style for sub-exercise headings */
        .vocabulary-section h4 {
            color: var(--text-color); /* Match body text */
            font-weight: 600;
            font-size: 1.1rem;
            margin-top: 20px; /* Add space above sub-exercise */
            margin-bottom: 5px; /* Space below heading */
        }


        /* Word Order Game Styles */
         .word-order-game { background-color: var(--background-cream); padding: 15px; border-radius: 8px; margin: 20px 0; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
         .game-sentence { background-color: white; border-radius: 8px; padding: 15px; margin-bottom: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); display: flex; flex-direction: column; }
         .game-sentence.completed { background-color: var(--light-green); border-left: 4px solid var(--kurdish-green); }
         .game-sentence-translation { font-weight: 600; margin-bottom: 15px; color: var(--text-color); }
         .sentence-number { display: inline-block; min-width: 45px; font-weight: 700; color: var(--kurdish-red); }
         .solution-area { min-height: 60px; padding: 10px; background-color: #f1f8e9; border-radius: 8px; display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 10px; border: 2px dashed var(--kurdish-green); }
         .words-bank { display: flex; flex-wrap: wrap; gap: 8px; padding: 10px; background-color: #FFF7E0; border-radius: 6px; margin-bottom: 10px; }
         .word-box { display: inline-block; padding: 8px 12px; background-color: var(--kurdish-yellow); color: var(--text-color); border-radius: 5px; cursor: pointer; user-select: none; margin: 0; font-weight: 500; border: 2px solid transparent; box-shadow: 0 2px 4px rgba(0,0,0,0.1); transition: all 0.2s ease; }
         .solution-area .word-box { background-color: #beddb0; border-color: var(--kurdish-green); }
         .word-box:active { transform: scale(0.95); }
         .word-box.modal { background-color: var(--kurdish-red); color: white; }
         .solution-area .word-box.modal { background-color: #c35758; color: white; }
         .game-feedback { margin-top: 10px; font-weight: 600; min-height: 1.5em; }
         .feedback-correct { color: var(--kurdish-green); }
         .feedback-incorrect { color: var(--kurdish-red); }
         .sentence-buttons { display: flex; gap: 10px; margin-top: 10px; }
         .word-order-game .check-btn,
         .word-order-game .show-answer-btn,
         .word-order-game .delete-btn { flex: 1; padding: 8px 15px; margin-top: 0; }
         .word-order-game .show-answer-btn { background-color: #E5F0E3; }
         .word-order-game .show-answer-btn:hover { background-color: #D5E0D3; }
         .word-order-game .delete-btn { background-color: #ef9a9a; color: var(--text-color); }
         .word-order-game .delete-btn:hover { background-color: #ef5350; color: white; }

        /* Translation button */
        .trans-btn { background-color: var(--kurdish-yellow); border: none; border-radius: 4px; padding: 3px 8px; margin-left: 10px; font-size: 0.8em; cursor: pointer; transition: background-color 0.2s; }
        .trans-btn:hover { background-color: #EAB72C; }
        .translation { display: none; font-style: italic; color: #666; margin-top: 5px; padding-left: 60px; }

        /* Completion Banner */
         .completion-banner { background-color: var(--kurdish-green); padding: 25px; border-radius: 12px; text-align: center; margin: 30px 0; color: white; box-shadow: 0 4px 15px rgba(0,0,0,0.15); }
         .completion-banner h2 { color: white; font-size: 1.7rem; margin-top: 0; }
         .celebration { font-size: 2.5rem; margin: 10px 0; }

        /* Media Queries */
        @media (max-width: 600px) {
            .section, .title-section, .exercise, .fill-exercise, .matching-game, .word-order-game { padding: 20px 15px; border-radius: 10px; }
            h1 { font-size: 1.6rem; } h2 { font-size: 1.3rem; } h3 { font-size: 1.1rem; }
            table { display: block; overflow-x: auto; white-space: nowrap; } th, td { padding: 10px 12px; } th { font-size: 0.9rem; padding: 10px 8px; }
            body { padding: 10px; }
            .check-btn { margin-top: 10px; width: 100%; max-width: 300px; padding: 12px; }
            .feedback { display: block; margin-top: 8px; }
            .matching-container { flex-direction: column; gap: 15px; }
            .matching-item { font-size: 1em; padding: 10px 12px; }
            /* Fill-in exercise mobile */
            .exercise-row { flex-direction: column; align-items: flex-start; gap: 5px;}
            .fill-input { width: 100%; max-width: none; margin: 5px 0; }
            .key-container { justify-content: flex-start; }
            .fill-check { width: auto; margin-top: 10px; }
            .activities-grid, .vocab-grid { grid-template-columns: 1fr; } /* Changed from 3 to 1 for vocab grid */
            .nav-buttons-container { flex-direction: column; gap: 15px; }
            .nav-button { width: 100%; margin: 0; font-size: 1rem; }
            /* Word order game mobile */
             .sentence-buttons { flex-direction: column; }
             .word-order-game .check-btn,
             .word-order-game .show-answer-btn,
             .word-order-game .delete-btn { width: 100%; }
             .translation { padding-left: 10px; }
        }
        @media (max-width: 450px) {
            .matching-item { padding: 10px 8px; font-size: 0.9em; }
            .matching-column { gap: 8px; }
            .matching-container { gap: 8px; }
            .key-btn { font-size: 0.8em; padding: 4px 8px;}
            .nav-button { padding: 12px 15px; }
            .word-box { padding: 6px 10px; font-size: 0.9em;}
            .vocab-grid { grid-template-columns: repeat(2, 1fr); } /* 2 columns for very small screens */
        }
        @media (min-width: 451px) and (max-width: 600px) {
             .vocab-grid { grid-template-columns: repeat(2, 1fr); } /* 2 columns for small screens */
        }
    </style>
</head>
<body>
    <div class="title-section">
        <h1>Lesson 7: <br>Continuous Past Tense and Expressions</h1>
        <hr>
    </div>

    <div class="section">
        <h3>Lesson Objectives</h3>
        <ul>
             <li><a href="#simple-past-review" style="color: inherit; text-decoration: none;">Review: Simple Past Tense</a></li>
             <li><a href="#continuous-past" style="color: inherit; text-decoration: none;">Continuous Past Tense</a></li>
             
             <li><a href="#reflexive-pronoun" style="color: inherit; text-decoration: none;">The Reflexive Pronoun "xwe"</a></li>
             <li><a href="#likes-dislikes" style="color: inherit; text-decoration: none;">Likes and Dislikes</a></li>
             
             <li><a href="#wants" style="color: inherit; text-decoration: none;">Want and Don't Want</a></li>
             <li><a href="#food-vocabulary" style="color: inherit; text-decoration: none;">Food Vocabulary</a></li>
             
             <li><a href="#word-order-game" style="color: inherit; text-decoration: none;">Word Order</a></li>
             <li><a href="#dialogue" style="color: inherit; text-decoration: none;">Dialogue</a></li>
        </ul>
    </div>

    <div class="section" id="simple-past-review">
        <h2>1. Review: Simple Past Tense</h2>
        <p>Let's review the simple past tense we learned in the previous lesson:</p>
        <p>In Kurmanji, the simple past tense has different patterns depending on whether the verb is <strong>transitive</strong> or <strong>intransitive</strong>:</p>
        
        <h3>Transitive Verbs in Simple Past:</h3>
        <ul>
            <li>Subject changes to <strong>oblique case</strong> ("ez" changes to "min").</li>
            <li>Verb is in the <strong>past tense root</strong> form, without any prefixes.</li>
        </ul>
        
        <table>
            <tr><th>Transitive Verb in Simple Past</th><th>English Translation</th></tr>
            <tr><td><strong>Min</strong> pirtûk <strong>xwend</strong>.</td><td>I <strong>read</strong> a book.</td></tr>
            <tr><td><strong>Te</strong> name <strong>nivîsî</strong>.</td><td>You <strong>wrote</strong> a letter.</td></tr>
            <tr><td><strong>Wî</strong> mala xwe <strong>paqij kir</strong>.</td><td>He <strong>cleaned</strong> his house.</td></tr>
            <tr><td><strong>Wê</strong> nan <strong>xwar</strong>.</td><td>She <strong>ate</strong> bread.</td></tr>
            <tr><td><strong>Me</strong> dikan <strong>vekir</strong>.</td><td>We <strong>opened</strong> the shop.</td></tr>
            <tr><td><strong>We</strong> mêvan <strong>vexwendin</strong>.</td><td>You (pl) <strong>invited</strong> guests.</td></tr>
            <tr><td><strong>Wan</strong> malper <strong>çêkir</strong>.</td><td>They <strong>created</strong> a website.</td></tr>
        </table>
        
        <h3>Intransitive Verbs in Simple Past:</h3>
        <ul>
            <li>Subject stays in <strong>direct case</strong> (ez, tu, ew, etc.).</li>
            <li>The verb takes <strong>personal endings</strong> but doesn't have the "di-" prefix.</li>
        </ul>
        
        <table>
            <tr><th>Intransitive Verb in Simple Past</th><th>English Translation</th></tr>
            <tr><td><strong>Ez</strong> <strong>çûm</strong> malê.</td><td>I <strong>went</strong> home.</td></tr>
            <tr><td><strong>Tu</strong> <strong>hatî</strong> dibistanê.</td><td>You <strong>came</strong> to school.</td></tr>
            <tr><td><strong>Ew</strong> <strong>ket</strong>.</td><td>He/She <strong>fell</strong>.</td></tr>
            <tr><td><strong>Em</strong> <strong>rûniştin</strong>.</td><td>We <strong>sat down</strong>.</td></tr>
            <tr><td><strong>Hûn</strong> <strong>girîn</strong>.</td><td>You (pl) <strong>cried</strong>.</td></tr>
            <tr><td><strong>Ew</strong> <strong>kenîn</strong>.</td><td>They <strong>laughed</strong>.</td></tr>
        </table>
        
        <div class="fill-exercise">
             <h3>Exercise 1: Choose the Correct Form</h3>

             <div class="fill-item" data-correct="Min">
                 <div class="exercise-row">
                     <span></span>
                     <input type="text" class="fill-input" id="fill-past-ex1-1" readonly>
                     <span>name nivîsî.</span><span class="verb-hint">(I wrote a letter - Transitive)</span>
                 </div>
                 <div class="key-container">
                     <button class="key-btn">Min</button>
                     <button class="key-btn">Ez</button>
                     <button class="key-btn">Me</button>
                 </div>
                 <button class="fill-check" onclick="checkFillAnswer(this)">Check</button>
                 <div class="fill-feedback" id="fill-past-ex1-1-feedback"></div>
             </div>

             <div class="fill-item" data-correct="Ez">
                 <div class="exercise-row">
                     <span></span>
                     <input type="text" class="fill-input" id="fill-past-ex1-2" readonly>
                     <span>rûniştim.</span><span class="verb-hint">(I sat down - Intransitive)</span>
                 </div>
                 <div class="key-container">
                     <button class="key-btn">Min</button>
                     <button class="key-btn">Ez</button>
                     <button class="key-btn">Me</button>
                 </div>
                 <button class="fill-check" onclick="checkFillAnswer(this)">Check</button>
                 <div class="fill-feedback" id="fill-past-ex1-2-feedback"></div>
             </div>

             <div class="fill-item" data-correct="Wî">
                 <div class="exercise-row">
                     <span></span>
                     <input type="text" class="fill-input" id="fill-past-ex1-3" readonly>
                     <span>sêv xwar.</span><span class="verb-hint">(He ate an apple - Transitive)</span>
                 </div>
                 <div class="key-container">
                     <button class="key-btn">Ew</button>
                     <button class="key-btn">Wî</button>
                     <button class="key-btn">Wan</button>
                 </div>
                 <button class="fill-check" onclick="checkFillAnswer(this)">Check</button>
                 <div class="fill-feedback" id="fill-past-ex1-3-feedback"></div>
             </div>

             <div class="fill-item" data-correct="Ew">
                 <div class="exercise-row">
                     <span></span>
                     <input type="text" class="fill-input" id="fill-past-ex1-4" readonly>
                     <span>hat malê.</span><span class="verb-hint">(She came home - Intransitive)</span>
                 </div>
                 <div class="key-container">
                     <button class="key-btn">Ew</button>
                     <button class="key-btn">Wê</button>
                     <button class="key-btn">Wan</button>
                 </div>
                 <button class="fill-check" onclick="checkFillAnswer(this)">Check</button>
                 <div class="fill-feedback" id="fill-past-ex1-4-feedback"></div>
             </div>

             <div class="fill-item" data-correct="We">
                 <div class="exercise-row">
                     <span></span>
                     <input type="text" class="fill-input" id="fill-past-ex1-5" readonly>
                     <span>dikan vekir.</span><span class="verb-hint">(You (pl) opened the shop - Transitive)</span>
                 </div>
                 <div class="key-container">
                     <button class="key-btn">Hûn</button>
                     <button class="key-btn">We</button>
                     <button class="key-btn">Wan</button>
                 </div>
                 <button class="fill-check" onclick="checkFillAnswer(this)">Check</button>
                 <div class="fill-feedback" id="fill-past-ex1-5-feedback"></div>
             </div>

              <div class="fill-item" data-correct="Em">
                 <div class="exercise-row">
                     <span></span>
                     <input type="text" class="fill-input" id="fill-past-ex1-6" readonly>
                     <span>ketin.</span><span class="verb-hint">(We fell - Intransitive)</span>
                 </div>
                 <div class="key-container">
                     <button class="key-btn">Em</button>
                     <button class="key-btn">Me</button>
                     <button class="key-btn">Wan</button>
                 </div>
                 <button class="fill-check" onclick="checkFillAnswer(this)">Check</button>
                 <div class="fill-feedback" id="fill-past-ex1-6-feedback"></div>
             </div>
         </div>
    </div>

    <div class="section" id="continuous-past">
        <h2>2. Continuous Past Tense</h2>
        <p>The continuous past tense in Kurmanji is used to describe actions that were ongoing in the past. It's similar to "was/were doing" instead of "did" in English.</p>
        <div class="note"><p>Note: Native Kurmanji speakers use continuous past tense a lot more than native English speakers. Try to notice the context in which native Kurmanji speakers use the past tenses to learn when you should use simple past or past continuous. When it doubt, use past continuous. </p>
        </div>
        <h3>How to Form the Continuous Past Tense:</h3>
        <p>It's easy. Same way as simple past tense, but add the "di-" prefix in front of the verb.</p>
            <p>Remember that the past tense rules still apply for <strong>transitive</strong> and <strong>intransitive</strong> verbs (see examples below).</p>
            <p>Also remember that <strong>present tense and past tense have different stems.</strong> So, "Ez dibazim" means "I run", and "Ez dibazdam" means "I was running." That's because the present stem of run is "baz" and past tense stem is "bazda".</p>
        
        
        <h3>Transitive Verbs in Continuous Past:</h3>
        <table>
            <tr><th>Kurmanji</th><th>English</th></tr>
            <tr><td><strong>Min</strong> pirtûk <strong>dixwend</strong>.</td><td>I <strong>was reading</strong> a book.</td></tr>
            <tr><td><strong>Te</strong> name <strong>dinivîsî</strong>.</td><td>You <strong>were writing</strong> a letter.</td></tr>
            <tr><td><strong>Wî</strong> sêv <strong>dixwar</strong>.</td><td>He <strong>was eating</strong> an apple.</td></tr>
            <tr><td><strong>Wê</strong> derî <strong>dişûşt</strong>.</td><td>She <strong>was washing</strong> the door.</td></tr>
            <tr><td><strong>Me</strong> mal <strong>paqij dikir</strong>.</td><td>We <strong>were cleaning</strong> the house.</td></tr>
            <tr><td><strong>We</strong> xwarin <strong>çêdikir</strong>.</td><td>You (pl) <strong>were preparing</strong> food.</td></tr>
            <tr><td><strong>Wan</strong> nan <strong>dikirin</strong>.</td><td>They <strong>were buying</strong> bread.</td></tr>
        </table>
        
        <h3>Intransitive Verbs in Continuous Past:</h3>
        <table>
            <tr><th>Kurmanji</th><th>English</th></tr>
            <tr><td><strong>Ez</strong> <strong>diçûm</strong> dibistanê.</td><td>I <strong>was going</strong> to school.</td></tr>
            <tr><td><strong>Tu</strong> <strong>dihatî</strong> malê.</td><td>You <strong>were coming</strong> home.</td></tr>
            <tr><td><strong>Ew</strong> <strong>direyî</strong>.</td><td>He/She <strong>was walking</strong>.</td></tr>
            <tr><td><strong>Em</strong> <strong>dirûniştin</strong>.</td><td>We <strong>were sitting</strong>.</td></tr>
            <tr><td><strong>Hûn</strong> <strong>dixebitîn</strong>.</td><td>You (pl) <strong>were working</strong>.</td></tr>
            <tr><td><strong>Ew</strong> <strong>dikenîn</strong>.</td><td>They <strong>were laughing</strong>.</td></tr>
        </table>
        
        <h3>Negative Form of Continuous Past:</h3>
        <p>To make the negative form of the continuous past tense, add the <strong>ne-</strong> prefix to the <strong>di-</strong> prefix:</p>
        
        <div class="examples">
            <p><strong>Examples:</strong></p>
            <p><strong>Min</strong> pirtûk <strong>nedixwend</strong>. (I <strong>was not reading</strong> a book.)</p>
            <p><strong>Te</strong> name <strong>nedinivîsî</strong>. (You <strong>were not writing</strong> a letter.)</p>
            <p><strong>Ez</strong> <strong>nediçûm</strong> dibistanê. (I <strong>was not going</strong> to school.)</p>
            <p><strong>Ew</strong> <strong>nedikenîn</strong>. (They <strong>were not laughing</strong>.)</p>
        </div>

        <div class="note"><p>Note: Usually you don't use double prefixes in Kurmanji, but you do for the past continuous tense. For example, in other tenses, you'd replace the "di-" with the "ne-" prefix.</p></div>
        
        <div class="fill-exercise">
            <h3>Exercise 2: Fill in the Correct Continuous Past Form</h3>
    
            <div class="fill-item" data-correct="dixwend">
                <div class="exercise-row">
                    <span>Min pirtûk</span>
                    <input type="text" class="fill-input" readonly>
                    <span>.</span><span class="verb-hint">(I was reading a book - Transitive)</span>
                </div>
                <div class="key-container">
                    <button class="key-btn">xwend</button>
                    <button class="key-btn">dixwend</button>
                    <button class="key-btn">xwendim</button>
                </div>
                <button class="fill-check" onclick="checkFillAnswer(this)">Check</button>
                <div class="fill-feedback"></div>
            </div>
    
            <div class="fill-item" data-correct="diçûm">
                <div class="exercise-row">
                    <span>Ez dibistanê</span>
                    <input type="text" class="fill-input" readonly>
                    <span>.</span><span class="verb-hint">(I was going to school - Intransitive)</span>
                </div>
                <div class="key-container">
                    <button class="key-btn">çûm</button>
                    <button class="key-btn">diçûm</button>
                    <button class="key-btn">çûyim</button>
                </div>
                <button class="fill-check" onclick="checkFillAnswer(this)">Check</button>
                <div class="fill-feedback"></div>
            </div>
    
            <div class="fill-item" data-correct="didît">
                <div class="exercise-row">
                    <span>Te min</span>
                    <input type="text" class="fill-input" readonly>
                    <span>?</span><span class="verb-hint">(Were you seeing me? - Transitive)</span>
                </div>
                <div class="key-container">
                    <button class="key-btn">dît</button>
                    <button class="key-btn">didît</button>
                    <button class="key-btn">dîtî</button>
                </div>
                <button class="fill-check" onclick="checkFillAnswer(this)">Check</button>
                <div class="fill-feedback"></div>
            </div>
    
            <div class="fill-item" data-correct="dirûniştin">
                <div class="exercise-row">
                    <span>Em li malê</span>
                    <input type="text" class="fill-input" readonly>
                    <span>.</span><span class="verb-hint">(We were sitting at home - Intransitive)</span>
                </div>
                <div class="key-container">
                    <button class="key-btn">rûniştin</button>
                    <button class="key-btn">dirûniştin</button>
                    <button class="key-btn">rûnişt</button>
                </div>
                <button class="fill-check" onclick="checkFillAnswer(this)">Check</button>
                <div class="fill-feedback"></div>
            </div>
    
            <div class="fill-item" data-correct="dixwar">
                <div class="exercise-row">
                    <span>Wî sêv</span>
                    <input type="text" class="fill-input" readonly>
                    <span>.</span><span class="verb-hint">(He was eating an apple - Transitive)</span>
                </div>
                <div class="key-container">
                    <button class="key-btn">xwar</button>
                    <button class="key-btn">dixwar</button>
                    <button class="key-btn">dixwarin</button>
                </div>
                <button class="fill-check" onclick="checkFillAnswer(this)">Check</button>
                <div class="fill-feedback"></div>
            </div>
             
            <div class="fill-item" data-correct="nedixwar">
                <div class="exercise-row">
                    <span>Min nan</span>
                    <input type="text" class="fill-input" readonly>
                    <span>.</span><span class="verb-hint">(I was not eating bread - Negative Transitive)</span>
                </div>
                <div class="key-container">
                    <button class="key-btn">naxwar</button>
                    <button class="key-btn">nedixwar</button>
                    <button class="key-btn">nexwar</button>
                </div>
                <button class="fill-check" onclick="checkFillAnswer(this)">Check</button>
                <div class="fill-feedback"></div>
            </div>
             
            <div class="fill-item" data-correct="nedihatî">
                <div class="exercise-row">
                    <span>Tu malê</span>
                    <input type="text" class="fill-input" readonly>
                    <span>.</span><span class="verb-hint">(You were not coming home - Negative Intransitive)</span>
                </div>
                <div class="key-container">
                    <button class="key-btn">nehatî</button>
                    <button class="key-btn">nedihatî</button>
                    <button class="key-btn">dihatî</button>
                </div>
                <button class="fill-check" onclick="checkFillAnswer(this)">Check</button>
                <div class="fill-feedback"></div>
            </div>
             
            <div class="fill-item" data-correct="dikenîn">
                <div class="exercise-row">
                    <span>Ew</span>
                    <input type="text" class="fill-input" readonly>
                    <span>dema ku film didîtin.</span><span class="verb-hint">(They were laughing when they were watching the movie - Intransitive)</span>
                </div>
                <div class="key-container">
                    <button class="key-btn">kenîn</button>
                    <button class="key-btn">dikenîn</button>
                    <button class="key-btn">kenî</button>
                </div>
                <button class="fill-check" onclick="checkFillAnswer(this)">Check</button>
                <div class="fill-feedback"></div>
            </div>
        </div>
    </div>

    <div class="section" id="reflexive-pronoun">
        <h2>3. The Reflexive Pronoun "xwe"</h2>
        <p>In Kurmanji, <strong>xwe</strong> is a reflexive pronoun meaning "oneself," "myself," "yourself," etc. It's used when the subject is performing an action on themselves.</p>
        <p>As shown in the example above, <strong>"xwe" has no conjugations!</strong> Which is fine, because it never needs them. For example, you're never going to say, "I see yourself." "Xwe" in Kurmanji is more like saying "self". "I see (my)self", "You see (your)self", and so on.</p>
        <p>Some languages use reflex pronouns a lot, like French, and some to not, like English. For example, in some languages you would say, "Do you see yourself strong?" If you're coming from a language that <i>doesn't</i> often use reflex pronouns, it might take some time to get used to "xwe" as a reflexive pronoun.</p>

        <div class="examples">
            <p><strong>Examples:</strong></p>
            <p>Ez <strong>xwe</strong> dişom. (I wash <strong>myself</strong>.)</p>
            <p>Tu <strong>xwe</strong> dibînî? (Do you see <strong>yourself</strong>?)</p>
            <p>Ew <strong>xwe</strong> amade dike. (He/She prepares <strong>himself/herself</strong>.)</p>
            <p>Min <strong>xwe</strong> şûşt. (I washed <strong>myself</strong>.)</p>
            <p>Te <strong>xwe</strong> dît. (You saw <strong>yourself</strong>.)</p>
        </div>
        
        <h3>"Xwe" for Possession:</h3>
        <p>"Xwe" can also be used to indicate possession when the possessor is the same as the subject of the sentence. It works like "my", "your", etc.</p>
        <p>The rule with using "xwe" for possession is, you must use the pronoun first, then use "xwe" second.</p>
        <p><strong>Use of xwe is not optional.</strong> You cannot say, "Ez kitêba min dixwînim."" You must say, "Ez kitêba xwe dixwînim."
        
        <div class="examples">
            <p><strong>Examples:</strong></p>
            <p>Ez kitêba <strong>xwe</strong> dixwînim. (I read <strong>my</strong> book.)</p>
            <p>Tu mala <strong>xwe</strong> dibînî? (Do you see <strong>your</strong> house?)</p>
            <p>Ew hevala <strong>xwe</strong> nas dike. (She knows <strong>her</strong> friend.)</p>
            <p>Min kitêba <strong>xwe</strong> xwend. (I read <strong>my</strong> book.)</p>
            <p>Te bavê <strong>xwe</strong> dît. (You saw <strong>your</strong> father.)</p>
            <p>Wî zarokên <strong>xwe</strong> dişandin dibistanê. (He was sending <strong>his</strong> children to school.)</p>
        </div>
        
        <div class="exercise">
            <h3>Exercise 3: Identify the Correct Use of "xwe"</h3>
            <div class="fill-exercise" style="background-color: #E5F0E3;">
                 <div class="fill-item" data-correct="myself">
                     <div class="exercise-row">
                         <span>Ez xwe dişom.</span>
                         <input type="text" class="fill-input" id="xwe-meaning-1" readonly>
                     </div>
                     <div class="key-container">
                         <button class="key-btn">myself</button>
                         <button class="key-btn">yourself</button>
                         <button class="key-btn">himself</button>
                     </div>
                     <button class="fill-check" onclick="checkFillAnswer(this)">Check</button>
                     <div class="fill-feedback" id="xwe-meaning-1-feedback"></div>
                 </div>

                 <div class="fill-item" data-correct="your ">
                     <div class="exercise-row">
                         <span>Tu mala xwe dibînî?</span>
                         <input type="text" class="fill-input" id="xwe-meaning-2" readonly>
                         <span>house</span>
                     </div>
                     <div class="key-container">
                         <button class="key-btn">my </button>
                         <button class="key-btn">your </button>
                         <button class="key-btn">his </button>
                     </div>
                     <button class="fill-check" onclick="checkFillAnswer(this)">Check</button>
                     <div class="fill-feedback" id="xwe-meaning-2-feedback"></div>
                 </div>

                 <div class="fill-item" data-correct="his ">
                     <div class="exercise-row">
                         <span>Wî xwarina xwe çêkir.</span>
                         <input type="text" class="fill-input" id="xwe-meaning-3" readonly>
                         <span>food</span>
                     </div>
                     <div class="key-container">
                         <button class="key-btn">my </button>
                         <button class="key-btn">your </button>
                         <button class="key-btn">his </button>
                     </div>
                     <button class="fill-check" onclick="checkFillAnswer(this)">Check</button>
                     <div class="fill-feedback" id="xwe-meaning-3-feedback"></div>
                 </div>

                 <div class="fill-item" data-correct="themselves">
                     <div class="exercise-row">
                         <span>Ew xwe dibînin.</span>
                         <input type="text" class="fill-input" id="xwe-meaning-4" readonly>
                     </div>
                     <div class="key-container">
                         <button class="key-btn">yourself</button>
                         <button class="key-btn">himself</button>
                         <button class="key-btn">themselves</button>
                     </div>
                     <button class="fill-check" onclick="checkFillAnswer(this)">Check</button>
                     <div class="fill-feedback" id="xwe-meaning-4-feedback"></div>
                 </div>

                 <div class="fill-item" data-correct="our ">
                     <div class="exercise-row">
                         <span>Em kitêbên xwe dixwînin.</span>
                         <input type="text" class="fill-input" id="xwe-meaning-5" readonly>
                         <span>books</span>
                     </div>
                     <div class="key-container">
                         <button class="key-btn">our </button>
                         <button class="key-btn">your </button>
                         <button class="key-btn">their </button>
                     </div>
                     <button class="fill-check" onclick="checkFillAnswer(this)">Check</button>
                     <div class="fill-feedback" id="xwe-meaning-5-feedback"></div>
                 </div>

                 <div class="fill-item" data-correct="yourself">
                     <div class="exercise-row">
                         <span>Te xwe dît?</span>
                         <input type="text" class="fill-input" id="xwe-meaning-6" readonly>
                     </div>
                     <div class="key-container">
                         <button class="key-btn">myself</button>
                         <button class="key-btn">yourself</button>
                         <button class="key-btn">himself</button>
                     </div>
                     <button class="fill-check" onclick="checkFillAnswer(this)">Check</button>
                     <div class="fill-feedback" id="xwe-meaning-6-feedback"></div>
                 </div>
            </div>
        </div>
    </div>

    <div class="section" id="likes-dislikes">
        <h2>4. Likes and Dislikes</h2>
        <p>In Kurmanji, the most common way to express likes and dislikes is with the expression <strong>ji ... hez kirin</strong> (to like/love something).</p>

        <h3>Expressing Likes:</h3>
        <table>
            <tr><th>Kurmanji</th><th>English</th></tr>
            <tr><td>Ez <strong>ji ... hez dikim</strong>.</td><td>I <strong>like/love</strong> ...</td></tr>
        </table>
        
        <h3>Expressing Dislikes:</h3>
        <table>
            <tr><th>Kurmanji</th><th>English</th></tr>
            <tr><td>Ez <strong>ji ... hez nakim</strong>.</td><td>I <strong>don't like</strong> ...</td></tr>
        </table>
        
        <div class="examples">
            <p><strong>Examples:</strong></p>
            <p>Ez <strong>ji sêvan hez dikim</strong>. (I <strong>like</strong> apples.)</p>
            <p>Ez <strong>ji sporê hez nakim</strong>. (I <strong>don't like</strong> sports.)</p>
            <p>Ez <strong>ji birincê hez dikim</strong>. (I <strong>like</strong> rice.)</p>
            <p>Ez <strong>ji xwarinê hez nakim</strong>. (I <strong>don't like</strong> food.)</p>
            <p>Tu <strong>ji muzîkê hez dikî</strong>? (Do you <strong>like</strong> music?)</p>
            <p>Ew <strong>ji goştê hez dike</strong>. (He/She <strong>likes</strong> meat.)</p>
            <p>Em <strong>ji çayê hez dikin</strong>. (We <strong>like</strong> tea.)</p>
        </div>
        
        <div class="fill-exercise">
             <h3>Exercise 4: Express Likes and Dislikes</h3>

             <div class="fill-item" data-correct="dikim">
                 <div class="exercise-row">
                     <span>Ez ji sêvan hez</span>
                     <input type="text" class="fill-input" id="like-ex-1" readonly>
                     <span>.</span><span class="verb-hint">(I like apples.)</span>
                 </div>
                 <div class="key-container">
                     <button class="key-btn">dikim</button>
                     <button class="key-btn">dikî</button>
                     <button class="key-btn">nakim</button>
                 </div>
                 <button class="fill-check" onclick="checkFillAnswer(this)">Check</button>
                 <div class="fill-feedback" id="like-ex-1-feedback"></div>
             </div>

             <div class="fill-item" data-correct="dikî">
                 <div class="exercise-row">
                     <span>Tu ji muzîkê hez</span>
                     <input type="text" class="fill-input" id="like-ex-2" readonly>
                     <span>?</span><span class="verb-hint">(Do you like music?)</span>
                 </div>
                 <div class="key-container">
                     <button class="key-btn">dikim</button>
                     <button class="key-btn">dikî</button>
                     <button class="key-btn">nakî</button>
                 </div>
                 <button class="fill-check" onclick="checkFillAnswer(this)">Check</button>
                 <div class="fill-feedback" id="like-ex-2-feedback"></div>
             </div>

             <div class="fill-item" data-correct="nakim">
                 <div class="exercise-row">
                     <span>Ez ji sporê hez</span>
                     <input type="text" class="fill-input" id="like-ex-3" readonly>
                     <span>.</span><span class="verb-hint">(I don't like sports.)</span>
                 </div>
                 <div class="key-container">
                     <button class="key-btn">dikim</button>
                     <button class="key-btn">nakim</button>
                     <button class="key-btn">nakî</button>
                 </div>
                 <button class="fill-check" onclick="checkFillAnswer(this)">Check</button>
                 <div class="fill-feedback" id="like-ex-3-feedback"></div>
             </div>

             <div class="fill-item" data-correct="dike">
                 <div class="exercise-row">
                     <span>Ew ji goştê hez</span>
                     <input type="text" class="fill-input" id="like-ex-4" readonly>
                     <span>.</span><span class="verb-hint">(He/She likes meat.)</span>
                 </div>
                 <div class="key-container">
                     <button class="key-btn">dikin</button>
                     <button class="key-btn">dike</button>
                     <button class="key-btn">nake</button>
                 </div>
                 <button class="fill-check" onclick="checkFillAnswer(this)">Check</button>
                 <div class="fill-feedback" id="like-ex-4-feedback"></div>
             </div>
             
             <div class="fill-item" data-correct="nakin">
                 <div class="exercise-row">
                     <span>Ew ji nanê hez</span>
                     <input type="text" class="fill-input" id="like-ex-5" readonly>
                     <span>.</span><span class="verb-hint">(They don't like bread.)</span>
                 </div>
                 <div class="key-container">
                     <button class="key-btn">nakin</button>
                     <button class="key-btn">dikin</button>
                     <button class="key-btn">nake</button>
                 </div>
                 <button class="fill-check" onclick="checkFillAnswer(this)">Check</button>
                 <div class="fill-feedback" id="like-ex-5-feedback"></div>
             </div>
         </div>
    </div>

    <div class="section" id="wants">
        <h2>5. Want and Don't Want</h2>
        <p>To express desires or wishes in Kurmanji, we use forms of the verb <strong>xwestin</strong> (to want).</p>
        
        <div class="examples">
            <p><strong>Examples - Present Tense:</strong></p>
            <p>Ez <strong>dixwazim</strong> av vexwim. (I <strong>want</strong> to drink water.)</p>
            <p>Tu <strong>dixwazî</strong> biçî mal? (Do you <strong>want</strong> to go home?)</p>
        </div>
        
        <div class="examples">
            <p><strong>Examples - Negative Form:</strong></p>
            <p>Ew <strong>naxwaze</strong> goşt bixwe. (He/She <strong>doesn't want</strong> to eat meat.)</p>
            <p>Em <strong>naxwazin</strong> dereng biçin. (We <strong>don't want</strong> to go late.)</p>
        </div>
        
        <div class="examples">
            <p><strong>Examples - Past Tense:</strong></p>
            <p><strong>Wê nedixwest</strong> ew bi me re were. (She <strong>didn't want</strong> to come with us.)</p>
        </div>
        
        <div class="exercise">
            <h3>Exercise 5: Complete with Want/Don't Want</h3>
            <div class="fill-exercise" style="background-color: #E5F0E3;">
                 <div class="fill-item" data-correct="dixwazim">
                     <div class="exercise-row">
                         <span>Ez av</span>
                         <input type="text" class="fill-input" id="want-1" readonly>
                         <span>.</span><span class="verb-hint">(I want water.)</span>
                     </div>
                     <div class="key-container">
                         <button class="key-btn">dixwazim</button>
                         <button class="key-btn">naxwazim</button>
                         <button class="key-btn">dixwaze</button>
                     </div>
                     <button class="fill-check" onclick="checkFillAnswer(this)">Check</button>
                     <div class="fill-feedback" id="want-1-feedback"></div>
                 </div>

                 <div class="fill-item" data-correct="naxwaze">
                     <div class="exercise-row">
                         <span>Ew goşt</span>
                         <input type="text" class="fill-input" id="want-2" readonly>
                         <span>.</span><span class="verb-hint">(He/She doesn't want meat.)</span>
                     </div>
                     <div class="key-container">
                         <button class="key-btn">dixwaze</button>
                         <button class="key-btn">naxwaze</button>
                         <button class="key-btn">naxwazin</button>
                     </div>
                     <button class="fill-check" onclick="checkFillAnswer(this)">Check</button>
                     <div class="fill-feedback" id="want-2-feedback"></div>
                 </div>

                 <div class="fill-item" data-correct="dixwazin">
                     <div class="exercise-row">
                         <span>Hûn çi</span>
                         <input type="text" class="fill-input" id="want-3" readonly>
                         <span>?</span><span class="verb-hint">(What do you (pl) want?)</span>
                     </div>
                     <div class="key-container">
                         <button class="key-btn">dixwazin</button>
                         <button class="key-btn">dixwazî</button>
                         <button class="key-btn">dixwaze</button>
                     </div>
                     <button class="fill-check" onclick="checkFillAnswer(this)">Check</button>
                     <div class="fill-feedback" id="want-3-feedback"></div>
                 </div>

                 <div class="fill-item" data-correct="Min dixwest">
                     <div class="exercise-row">
                         <span></span>
                         <input type="text" class="fill-input" id="want-4" readonly>
                         <span>ez biçim malê.</span><span class="verb-hint">(I wanted to go home.)</span>
                     </div>
                     <div class="key-container">
                         <button class="key-btn">Ez dixwazim</button>
                         <button class="key-btn">Min dixwest</button>
                         <button class="key-btn">Ez dixwest</button>
                     </div>
                     <button class="fill-check" onclick="checkFillAnswer(this)">Check</button>
                     <div class="fill-feedback" id="want-4-feedback"></div>
                 </div>

                 <div class="fill-item" data-correct="naxwazî">
                     <div class="exercise-row">
                         <span>Tu çima muzîkê</span>
                         <input type="text" class="fill-input" id="want-5" readonly>
                         <span>?</span><span class="verb-hint">(Why don't you want music?)</span>
                     </div>
                     <div class="key-container">
                         <button class="key-btn">dixwazî</button>
                         <button class="key-btn">naxwazî</button>
                         <button class="key-btn">nedixwazî</button>
                     </div>
                     <button class="fill-check" onclick="checkFillAnswer(this)">Check</button>
                     <div class="fill-feedback" id="want-5-feedback"></div>
                 </div>

                 <div class="fill-item" data-correct="Wê nedixwest">
                     <div class="exercise-row">
                         <span></span>
                         <input type="text" class="fill-input" id="want-6" readonly>
                         <span>ew bi me re were.</span><span class="verb-hint">(She didn't want to come with us.)</span>
                     </div>
                     <div class="key-container">
                         <button class="key-btn">Ew naxwaze</button>
                         <button class="key-btn">Wê nedixwest</button>
                         <button class="key-btn">Ew nedixwest</button>
                     </div>
                     <button class="fill-check" onclick="checkFillAnswer(this)">Check</button>
                     <div class="fill-feedback" id="want-6-feedback"></div>
                 </div>
            </div>
        </div>
    </div>

    <div class="section" id="food-vocabulary">
        <h2>6. Food Vocabulary</h2>
        <p>Let's learn some common Kurdish food vocabulary:</p>
        
        <div class="vocabulary-section">
            <h3>Basic Food Items</h3>
            <div class="vocab-grid">
                <div class="vocab-item"> <div class="kurdish-word">nan</div> <div>bread</div> </div>
                <div class="vocab-item"> <div class="kurdish-word">goşt</div> <div>meat</div> </div>
                <div class="vocab-item"> <div class="kurdish-word">penêr</div> <div>cheese</div> </div>
                <div class="vocab-item"> <div class="kurdish-word">şîr</div> <div>milk</div> </div>
                <div class="vocab-item"> <div class="kurdish-word">hêk</div> <div>egg</div> </div>
                <div class="vocab-item"> <div class="kurdish-word">mast</div> <div>yogurt</div> </div>
                <div class="vocab-item"> <div class="kurdish-word">av</div> <div>water</div> </div>
                <div class="vocab-item"> <div class="kurdish-word">çay</div> <div>tea</div> </div>
                <div class="vocab-item"> <div class="kurdish-word">qehwe</div> <div>coffee</div> </div>
            </div>
            <div class="exercise">
                <h4>Exercise 6a: Match Basic Food Items</h4>
                <div class="matching-game" id="food-matching-basic">
                    <div class="match-progress">Matches: <span class="matches-count">0</span>/9</div>
                    <div class="matching-container">
                        <div class="matching-column">
                            <div class="matching-item-container kurdish-container">
                                <div class="matching-item kurdish" data-id="1">nan</div>
                                <div class="matching-item kurdish" data-id="2">goşt</div>
                                <div class="matching-item kurdish" data-id="3">penêr</div>
                                <div class="matching-item kurdish" data-id="4">şîr</div>
                                <div class="matching-item kurdish" data-id="5">hêk</div>
                                <div class="matching-item kurdish" data-id="6">mast</div>
                                <div class="matching-item kurdish" data-id="7">av</div>
                                <div class="matching-item kurdish" data-id="8">çay</div>
                                <div class="matching-item kurdish" data-id="9">qehwe</div>
                            </div>
                        </div>
                        <div class="matching-column">
                            <div class="matching-item-container english-container">
                                <div class="matching-item english" data-id="1">bread</div>
                                <div class="matching-item english" data-id="2">meat</div>
                                <div class="matching-item english" data-id="3">cheese</div>
                                <div class="matching-item english" data-id="4">milk</div>
                                <div class="matching-item english" data-id="5">egg</div>
                                <div class="matching-item english" data-id="6">yogurt</div>
                                <div class="matching-item english" data-id="7">water</div>
                                <div class="matching-item english" data-id="8">tea</div>
                                <div class="matching-item english" data-id="9">coffee</div>
                            </div>
                        </div>
                    </div>
                    <div class="matching-feedback"></div>
                </div>
            </div>

            <h3>Fruits and Vegetables</h3>
            <div class="vocab-grid">
                <div class="vocab-item"> <div class="kurdish-word">sêv</div> <div>apple</div> </div>
                <div class="vocab-item"> <div class="kurdish-word">zebeş</div> <div>watermelon</div> </div>
                <div class="vocab-item"> <div class="kurdish-word">tirî</div> <div>grape</div> </div>
                <div class="vocab-item"> <div class="kurdish-word">xiyar</div> <div>cucumber</div> </div>
                <div class="vocab-item"> <div class="kurdish-word">bacanê sor</div> <div>tomato</div> </div>
                <div class="vocab-item"> <div class="kurdish-word">îsot</div> <div>pepper</div> </div>
                <div class="vocab-item"> <div class="kurdish-word">kartol</div> <div>potato</div> </div>
                <div class="vocab-item"> <div class="kurdish-word">pîvaz</div> <div>onion</div> </div>
                <div class="vocab-item"> <div class="kurdish-word">sîr</div> <div>garlic</div> </div>
                <div class="vocab-item"> <div class="kurdish-word">hinar</div> <div>pomegranate</div> </div>
                <div class="vocab-item"> <div class="kurdish-word">porteqal</div> <div>orange</div> </div>
                <div class="vocab-item"> <div class="kurdish-word">bexdenûs</div> <div>parsley</div> </div>
            </div>
             <div class="exercise">
                <h4>Exercise 6b: Match Fruits and Vegetables</h4>
                <div class="matching-game" id="food-matching-fruits">
                    <div class="match-progress">Matches: <span class="matches-count">0</span>/12</div>
                    <div class="matching-container">
                        <div class="matching-column">
                            <div class="matching-item-container kurdish-container">
                                <div class="matching-item kurdish" data-id="1">sêv</div>
                                <div class="matching-item kurdish" data-id="2">zebeş</div>
                                <div class="matching-item kurdish" data-id="3">tirî</div>
                                <div class="matching-item kurdish" data-id="4">xiyar</div>
                                <div class="matching-item kurdish" data-id="5">bacanê sor</div>
                                <div class="matching-item kurdish" data-id="6">îsot</div>
                                <div class="matching-item kurdish" data-id="7">kartol</div>
                                <div class="matching-item kurdish" data-id="8">pîvaz</div>
                                <div class="matching-item kurdish" data-id="9">sîr</div>
                                <div class="matching-item kurdish" data-id="10">hinar</div>
                                <div class="matching-item kurdish" data-id="11">porteqal</div>
                                <div class="matching-item kurdish" data-id="12">bexdenûs</div>
                            </div>
                        </div>
                        <div class="matching-column">
                            <div class="matching-item-container english-container">
                                <div class="matching-item english" data-id="1">apple</div>
                                <div class="matching-item english" data-id="2">watermelon</div>
                                <div class="matching-item english" data-id="3">grape</div>
                                <div class="matching-item english" data-id="4">cucumber</div>
                                <div class="matching-item english" data-id="5">tomato</div>
                                <div class="matching-item english" data-id="6">pepper</div>
                                <div class="matching-item english" data-id="7">potato</div>
                                <div class="matching-item english" data-id="8">onion</div>
                                <div class="matching-item english" data-id="9">garlic</div>
                                <div class="matching-item english" data-id="10">pomegranate</div>
                                <div class="matching-item english" data-id="11">orange</div>
                                <div class="matching-item english" data-id="12">parsley</div>
                            </div>
                        </div>
                    </div>
                    <div class="matching-feedback"></div>
                </div>
            </div>


            <h3>Traditional Kurdish Dishes</h3>
            <div class="vocab-grid">
                <div class="vocab-item"> <div class="kurdish-word">dolme</div> <div>stuffed vegetables</div> </div>
                <div class="vocab-item"> <div class="kurdish-word">birinc</div> <div>rice</div> </div>
                <div class="vocab-item"> <div class="kurdish-word">kutilk</div> <div>meatballs</div> </div>
                <div class="vocab-item"> <div class="kurdish-word">şorbe</div> <div>soup</div> </div>
                <div class="vocab-item"> <div class="kurdish-word">xwarinên tûj</div> <div>spicy food</div> </div>
                <div class="vocab-item"> <div class="kurdish-word">kebab</div> <div>kebab</div> </div>
            </div>
            <div class="exercise">
                <h4>Exercise 6c: Match Traditional Dishes</h4>
                <div class="matching-game" id="food-matching-dishes">
                    <div class="match-progress">Matches: <span class="matches-count">0</span>/6</div>
                    <div class="matching-container">
                        <div class="matching-column">
                            <div class="matching-item-container kurdish-container">
                                <div class="matching-item kurdish" data-id="1">dolme</div>
                                <div class="matching-item kurdish" data-id="2">birinc</div>
                                <div class="matching-item kurdish" data-id="3">kutilk</div>
                                <div class="matching-item kurdish" data-id="4">şorbe</div>
                                <div class="matching-item kurdish" data-id="5">xwarinên tûj</div>
                                <div class="matching-item kurdish" data-id="6">kebab</div>
                            </div>
                        </div>
                        <div class="matching-column">
                            <div class="matching-item-container english-container">
                                <div class="matching-item english" data-id="1">stuffed vegetables</div>
                                <div class="matching-item english" data-id="2">rice</div>
                                <div class="matching-item english" data-id="3">meatballs</div>
                                <div class="matching-item english" data-id="4">soup</div>
                                <div class="matching-item english" data-id="5">spicy food</div>
                                <div class="matching-item english" data-id="6">kebab</div>
                            </div>
                        </div>
                    </div>
                    <div class="matching-feedback"></div>
                </div>
            </div>
            
            <h3>Useful Food-Related Verbs</h3>
            <div class="vocab-grid">
                <div class="vocab-item"> <div class="kurdish-word">xwarin</div> <div>to eat</div> </div>
                <div class="vocab-item"> <div class="kurdish-word">vexwarin</div> <div>to drink</div> </div>
                <div class="vocab-item"> <div class="kurdish-word">çêkirin</div> <div>to make, prepare</div> </div>
            </div>
             <div class="exercise">
                <h4>Exercise 6d: Match Food Verbs</h4>
                <div class="matching-game" id="food-matching-verbs">
                    <div class="match-progress">Matches: <span class="matches-count">0</span>/3</div>
                    <div class="matching-container">
                        <div class="matching-column">
                            <div class="matching-item-container kurdish-container">
                                <div class="matching-item kurdish" data-id="1">xwarin</div>
                                <div class="matching-item kurdish" data-id="2">vexwarin</div>
                                <div class="matching-item kurdish" data-id="3">çêkirin</div>
                            </div>
                        </div>
                        <div class="matching-column">
                            <div class="matching-item-container english-container">
                                <div class="matching-item english" data-id="1">to eat</div>
                                <div class="matching-item english" data-id="2">to drink</div>
                                <div class="matching-item english" data-id="3">to make, prepare</div>
                            </div>
                        </div>
                    </div>
                    <div class="matching-feedback"></div>
                </div>
            </div>
        </div> <div class="fill-exercise">
             <h3>Exercise 7: Fill in with the Correct Food Word</h3>

             <div class="fill-item" data-correct="nan">
                 <div class="exercise-row">
                     <span>Min</span>
                     <input type="text" class="fill-input" readonly>
                     <span>dixwest.</span><span class="verb-hint">(I wanted bread.)</span>
                 </div>
                 <div class="key-container">
                     <button class="key-btn">nan</button>
                     <button class="key-btn">sêv</button>
                     <button class="key-btn">av</button>
                 </div>
                 <button class="fill-check" onclick="checkFillAnswer(this)">Check</button>
                 <div class="fill-feedback"></div>
             </div>

             <div class="fill-item" data-correct="goşt">
                 <div class="exercise-row">
                     <span>Ew ji</span>
                     <input type="text" class="fill-input" readonly>
                     <span>hez dike.</span><span class="verb-hint">(He/She likes meat.)</span>
                 </div>
                 <div class="key-container">
                     <button class="key-btn">goşt</button>
                     <button class="key-btn">çay</button>
                     <button class="key-btn">hêk</button>
                 </div>
                 <button class="fill-check" onclick="checkFillAnswer(this)">Check</button>
                 <div class="fill-feedback"></div>
             </div>

             <div class="fill-item" data-correct="sêv">
                 <div class="exercise-row">
                     <span>Min duh</span>
                     <input type="text" class="fill-input" readonly>
                     <span>xwar.</span><span class="verb-hint">(I ate an apple yesterday.)</span>
                 </div>
                 <div class="key-container">
                     <button class="key-btn">sêv</button>
                     <button class="key-btn">tirî</button>
                     <button class="key-btn">penêr</button>
                 </div>
                 <button class="fill-check" onclick="checkFillAnswer(this)">Check</button>
                 <div class="fill-feedback"></div>
             </div>

             <div class="fill-item" data-correct="av">
                 <div class="exercise-row">
                     <span>Ez dixwazim</span>
                     <input type="text" class="fill-input" readonly>
                     <span>vexwim.</span><span class="verb-hint">(I want to drink water.)</span>
                 </div>
                 <div class="key-container">
                     <button class="key-btn">av</button>
                     <button class="key-btn">çay</button>
                     <button class="key-btn">şîr</button>
                 </div>
                 <button class="fill-check" onclick="checkFillAnswer(this)">Check</button>
                 <div class="fill-feedback"></div>
             </div>

             <div class="fill-item" data-correct="birinc">
                 <div class="exercise-row">
                     <span>Em</span>
                     <input type="text" class="fill-input" readonly>
                     <span>çêdikin.</span><span class="verb-hint">(We are preparing rice.)</span>
                 </div>
                 <div class="key-container">
                     <button class="key-btn">birinc</button>
                     <button class="key-btn">kartol</button>
                     <button class="key-btn">kebab</button>
                 </div>
                 <button class="fill-check" onclick="checkFillAnswer(this)">Check</button>
                 <div class="fill-feedback"></div>
             </div>
             
             <div class="fill-item" data-correct="tirî">
                 <div class="exercise-row">
                     <span>Te</span>
                     <input type="text" class="fill-input" readonly>
                     <span>kirî?</span><span class="verb-hint">(Did you buy grapes?)</span>
                 </div>
                 <div class="key-container">
                     <button class="key-btn">tirî</button>
                     <button class="key-btn">zebeş</button>
                     <button class="key-btn">hinar</button>
                 </div>
                 <button class="fill-check" onclick="checkFillAnswer(this)">Check</button>
                 <div class="fill-feedback"></div>
             </div>
             
             <div class="fill-item" data-correct="pîvaz">
                 <div class="exercise-row">
                     <span>Wê</span>
                     <input type="text" class="fill-input" readonly>
                     <span>dibirî.</span><span class="verb-hint">(She was cutting onions.)</span>
                 </div>
                 <div class="key-container">
                     <button class="key-btn">pîvaz</button>
                     <button class="key-btn">sîr</button>
                     <button class="key-btn">xiyar</button>
                 </div>
                 <button class="fill-check" onclick="checkFillAnswer(this)">Check</button>
                 <div class="fill-feedback"></div>
             </div>
         </div>
    </div>

    <div class="section" id="word-order-game">
        <h2>7. Word Order Game</h2> <p>Put the words in the correct order to make sentences about food preferences and past activities.</p>
        <div class="word-order-game">
            <div id="sentences-container"></div>
        </div>
    </div>

    <div class="section" id="dialogue">
        <h2>8. Dialogue</h2> <p>Read this dialogue about food preferences:</p>
        <div class="dialogue-box">
            <div class="dialogue-line"><span class="speaker">Şêrtac:</span> Sêv baş xuya dikin.<button class="trans-btn" onclick="toggleTranslation('trans1')">Show translation</button><div id="trans1" class="translation">The apples look good.</div></div>
            <div class="dialogue-line"><span class="speaker">Rodî:</span> Ez dixwazim sê kîloyan bikîrim.<button class="trans-btn" onclick="toggleTranslation('trans2')">Show translation</button><div id="trans2" class="translation">I want to buy three kilos.</div></div>
            <div class="dialogue-line"><span class="speaker">Şêrtac:</span> Baş e, bikire! Ez jî du kîloyan dikîrim.<button class="trans-btn" onclick="toggleTranslation('trans3')">Show translation</button><div id="trans3" class="translation">Good, buy them! I'm buying two kilos too.</div></div>
            <div class="dialogue-line"><span class="speaker">Rodî:</span> Tiriyê reş çawan e?<button class="trans-btn" onclick="toggleTranslation('trans4')">Show translation</button><div id="trans4" class="translation">How are the black grapes?</div></div>
            <div class="dialogue-line"><span class="speaker">Şêrtac:</span> Ew jî ne xirab e.<button class="trans-btn" onclick="toggleTranslation('trans5')">Show translation</button><div id="trans5" class="translation">They are not bad either.</div></div>
            <div class="dialogue-line"><span class="speaker">Rodî:</span> Ez ku tirî, tu ku fêkî jî res dikîrim.<button class="trans-btn" onclick="toggleTranslation('trans6')">Show translation</button><div id="trans6" class="translation">As I buy grapes, you also buy fruits.</div></div>
            <div class="dialogue-line"><span class="speaker">Şêrtac:</span> Baş e, ji dwazxim kîloyek hinar bikîrim.<button class="trans-btn" onclick="toggleTranslation('trans7')">Show translation</button><div id="trans7" class="translation">Okay, I want to buy one kilo of pomegranates.</div></div>
            <div class="dialogue-line"><span class="speaker">Rodî:</span> Kîloyek hinar? Baqek bexdenûs jî pêwîst in.<button class="trans-btn" onclick="toggleTranslation('trans8')">Show translation</button><div id="trans8" class="translation">One kilo of pomegranates? A bunch of parsley is also needed.</div></div>
            <div class="dialogue-line"><span class="speaker">Şêrtac:</span> Pêwîstiya min bi baqek pîvazan ter heye.<button class="trans-btn" onclick="toggleTranslation('trans9')">Show translation</button><div id="trans9" class="translation">I need a bunch of green onions.</div></div>
            <div class="dialogue-line"><span class="speaker">Rodî:</span> Çima tu ev qas zêde sebzê û fêkiyan dikirî?<button class="trans-btn" onclick="toggleTranslation('trans10')">Show translation</button><div id="trans10" class="translation">Why are you buying so many vegetables and fruits?</div></div>
            <div class="dialogue-line"><span class="speaker">Şêrtac:</span> Mêvanên me hene.<button class="trans-btn" onclick="toggleTranslation('trans11')">Show translation</button><div id="trans11" class="translation">We have guests.</div></div>
        </div>
    </div>
    <div class="section">
        <div class="completion-banner">
            <div class="celebration">🌟 🌟 🌟</div>
            <h2>Pîroz be! Te Waneya 7 qedand!</h2>
            <p>Congratulations! You've completed Lesson 7!</p>
            <div class="celebration">🌟 🌟 🌟</div>
        </div>
    </div>

    <div class="nav-buttons-container">
        <a href="../kl_lessons_en.html" class="nav-button">Back to all lessons</a>
    </div>

    <script>
        // --- Utility Functions (Should be defined globally) ---
        function shuffleArray(array) {
            // Creates a shuffled copy of the input array using the Fisher-Yates algorithm.
            const newArray = [...array]; // Create a shallow copy
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1)); // Random index from 0 to i
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]]; // Swap elements
            }
            return newArray;
        }
        function arraysEqual(a, b) {
            // Checks if two arrays have the same elements in the same order.
            if (a.length !== b.length) return false; // Must have the same length
            return a.every((val, index) => val === b[index]); // Check each element
        }

        // --- Dialogue Translation Toggle (Should be defined globally for onclick) ---
        function toggleTranslation(id) {
            // Toggles the visibility of a translation element and updates the button text.
            const translation = document.getElementById(id);
            const button = translation.previousElementSibling; // Assumes button is right before the translation div
            if (translation && button) {
                if (translation.style.display === 'block') {
                    translation.style.display = 'none';
                    button.textContent = 'Show translation';
                } else {
                    translation.style.display = 'block';
                    button.textContent = 'Hide translation';
                }
            }
        }

        // --- Matching Game Logic ---
        function initializeMatchingGame(gameId, totalPairs) {
            // Sets up the matching game functionality for a given game ID.
            const gameElement = document.getElementById(gameId);
            if (!gameElement) { console.error(`Matching game element not found: ${gameId}`); return; }
            const kurdishContainer = gameElement.querySelector('.matching-item-container.kurdish-container');
            const englishContainer = gameElement.querySelector('.matching-item-container.english-container');
            const feedbackElement = gameElement.querySelector('.matching-feedback');
            const matchesCountElement = gameElement.querySelector('.matches-count');

            if (!kurdishContainer || !englishContainer || !feedbackElement || !matchesCountElement) {
                console.error(`Missing elements within matching game: ${gameId}`); return;
            }

            let selected = { kurdish: null, english: null }; // Tracks selected items
            let matchCount = 0; // Tracks number of correct matches
            matchesCountElement.textContent = matchCount; // Initialize count display

            // --- SHUFFLING ---
            // Shuffle items within each column independently
            const kurdishItems = Array.from(kurdishContainer.children);
            shuffleArray(kurdishItems).forEach(item => kurdishContainer.appendChild(item));

            const englishItems = Array.from(englishContainer.children);
            shuffleArray(englishItems).forEach(item => englishContainer.appendChild(item));
            // --- END SHUFFLING ---

            const items = gameElement.querySelectorAll('.matching-item');

            items.forEach(item => {
                // Re-clone items to ensure clean event listeners on re-initialization (if needed)
                const newItem = item.cloneNode(true);
                item.parentNode.replaceChild(newItem, item);

                // Add click listener to each matching item
                newItem.addEventListener('click', function() {
                    if (this.classList.contains('matched')) return; // Ignore clicks on already matched items

                    const isKurdish = this.classList.contains('kurdish');
                    const side = isKurdish ? 'kurdish' : 'english'; // Determine which column was clicked

                    // Deselect previous item on the same side if one was selected
                    if (selected[side]) { selected[side].classList.remove('selected'); }

                    // Select the current item
                    this.classList.add('selected');
                    selected[side] = this;

                    // Clear previous feedback
                    feedbackElement.textContent = '';
                    feedbackElement.className = 'matching-feedback';

                    // Check for a match if one item from each side is selected
                    if (selected.kurdish && selected.english) {
                        if (selected.kurdish.dataset.id === selected.english.dataset.id) {
                            // Correct match
                            selected.kurdish.classList.remove('selected');
                            selected.english.classList.remove('selected');
                            selected.kurdish.classList.add('matched');
                            selected.english.classList.add('matched');
                            matchCount++;
                            matchesCountElement.textContent = matchCount;
                            feedbackElement.textContent = '✓ Correct!';
                            feedbackElement.classList.add('correct');
                            if (matchCount === totalPairs) { feedbackElement.textContent = ' Well done! All matched!'; }
                            selected = { kurdish: null, english: null }; // Reset selection
                        } else {
                            // Incorrect match
                            feedbackElement.textContent = '✗ Incorrect. Try again!';
                            feedbackElement.classList.add('incorrect');
                            const selK = selected.kurdish; const selE = selected.english;
                            // Briefly show selection before removing 'selected' class
                            setTimeout(() => {
                                if(selK) selK.classList.remove('selected');
                                if(selE) selE.classList.remove('selected');
                            }, 800);
                            selected = { kurdish: null, english: null }; // Reset selection
                        }
                    }
                });
                // Add touch feedback for mobile devices
                 newItem.addEventListener('touchstart', function() { this.style.opacity = '0.7'; }, {passive: true});
                 newItem.addEventListener('touchend', function() { this.style.opacity = '1'; });
            });
        }


        // --- Fill-in Exercise Logic ---
        function initializeFillInKeys() {
            // Adds click listeners to the key buttons in fill-in-the-blank exercises.
            document.querySelectorAll('.fill-exercise .key-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const fillItem = this.closest('.fill-item'); // Find the parent exercise item
                    if (!fillItem) return;
                    const input = fillItem.querySelector('.fill-input'); // Find the input within that item
                    if (input) {
                        input.value = this.textContent; // Set input value to the button's text
                        // Clear feedback and reset input style when a new option is chosen
                        const feedback = fillItem.querySelector('.fill-feedback');
                        if(feedback) {
                            feedback.textContent = '';
                            feedback.className = 'fill-feedback';
                        }
                        input.style.borderColor = "var(--kurdish-yellow)";
                        input.style.backgroundColor = "#f8f8f8";
                    }
                });
            });

            // Shuffle keys within each key container for variety
            document.querySelectorAll('.fill-exercise .key-container').forEach(container => {
                const keys = Array.from(container.children);
                shuffleArray(keys).forEach(key => container.appendChild(key));
            });
        }

        function checkFillAnswer(buttonElement) {
            // Checks the answer for a fill-in-the-blank item when the 'Check' button is clicked.
            const item = buttonElement.closest('.fill-item');
            if (!item) return;

            const input = item.querySelector('.fill-input');
            const feedback = item.querySelector('.fill-feedback');
            const correctAnswer = item.dataset.correct; // Get correct answer from data attribute
            const userAnswer = input ? input.value : null;

            if (!input || !feedback) {
                console.error(`Input or feedback element not found for item.`);
                return;
            }

            const trimmedUserAnswer = userAnswer ? userAnswer.trim() : '';
            const trimmedCorrectAnswer = correctAnswer ? correctAnswer.trim() : '';

            if (trimmedUserAnswer && trimmedUserAnswer === trimmedCorrectAnswer) {
                // Correct answer
                feedback.textContent = "✓ Correct!";
                feedback.className = "fill-feedback correct";
                input.style.borderColor = "var(--kurdish-green)";
                input.style.backgroundColor = "#e5f0e3";
            } else if (trimmedUserAnswer) {
                // Incorrect answer
                feedback.innerHTML = `✗ Incorrect. Correct is: <span class="correct-answer-display">${correctAnswer}</span>`;
                feedback.className = "fill-feedback incorrect";
                input.style.borderColor = "var(--kurdish-red)";
                input.style.backgroundColor = "#fff0f0";
            } else {
                // No answer selected
                feedback.textContent = "Please select an option by clicking a button.";
                feedback.className = "fill-feedback";
                input.style.borderColor = "var(--kurdish-yellow)";
                input.style.backgroundColor = "#f8f8f8";
            }
        }


        // --- Word Order Game Logic ---
        function initializeWordOrderGame() {
            // Sets up the word order game, creating sentence elements dynamically.
            const sentencesData = [
                { kurdish: "Ez ji sêvan hez dikim.", english: "I like apples.", modalVerbs: ["Ez", "hez dikim"] },
                { kurdish: "Min sêv xwarin.", english: "I ate apples. (Transitive - Simple Past)", modalVerbs: ["Min", "xwarin"] },
                { kurdish: "Ez dixwazim çayê vexwim.", english: "I want to drink tea.", modalVerbs: ["Ez", "dixwazim", "vexwim"] },
                { kurdish: "Min xwarina xwe dixwar.", english: "I was eating my food. (Transitive - Continuous Past)", modalVerbs: ["Min", "dixwar"] },
                { kurdish: "Tu ji goştê hez dikî?", english: "Do you like meat?", modalVerbs: ["Tu", "hez dikî"] },
                { kurdish: "Ew xwe amade dikir.", english: "He/She was preparing himself/herself.", modalVerbs: ["Ew", "xwe", "dikir"] },
                // *** FIXED SENTENCE 7 (index 6) - Removed "ez" ***
                { kurdish: "Min dixwest birinc bixwim.", english: "I wanted to eat rice.", modalVerbs: ["Min", "dixwest", "bixwim"] },
                { kurdish: "Ez diçûm bazarê dema ku te min dît.", english: "I was going to the market when you saw me.", modalVerbs: ["Ez", "diçûm", "te", "dît"] }
            ];

            // Process sentence data into a more usable format
            const sentences = sentencesData.map(item => ({
                original: item.kurdish,
                english: item.english,
                modalVerbs: item.modalVerbs || [],
                // Split sentence into words, removing punctuation
                words: item.kurdish.replace(/[.?]/g, '').split(/\s+/).filter(word => word.length > 0)
            }));

            const gameContainer = document.getElementById('sentences-container');
            if (!gameContainer) { console.error("Word order game container 'sentences-container' not found."); return; }
            gameContainer.innerHTML = ''; // Clear previous content if re-initializing

            // Create HTML elements for each sentence
            sentences.forEach((sentence, index) => {
                const sentenceElement = document.createElement('div');
                sentenceElement.className = 'game-sentence';
                sentenceElement.id = `sentence-${index}`;

                // Display English translation and sentence number
                const translation = document.createElement('div');
                translation.className = 'game-sentence-translation';
                translation.innerHTML = `<span class="sentence-number">${index + 1}/${sentences.length}</span> ${sentence.english}`;
                sentenceElement.appendChild(translation);

                // Area where user drags/clicks words to form the sentence
                const solutionArea = document.createElement('div');
                solutionArea.className = 'solution-area';
                solutionArea.id = `solution-area-${index}`;
                sentenceElement.appendChild(solutionArea);

                // Bank containing the shuffled word boxes
                const wordsBank = document.createElement('div');
                wordsBank.className = 'words-bank';
                wordsBank.id = `words-bank-${index}`;
                sentenceElement.appendChild(wordsBank);

                // Shuffle words and create clickable boxes
                const shuffledWords = shuffleArray(sentence.words);
                shuffledWords.forEach(word => {
                    const wordElement = document.createElement('div');
                    wordElement.className = 'word-box';
                    wordElement.textContent = word;
                    // Add 'modal' class for specific styling if word is a modal verb
                    if (sentence.modalVerbs.includes(word)) {
                        wordElement.classList.add('modal');
                    }
                    // Add click listener to move word between bank and solution area
                    wordElement.addEventListener('click', () => {
                        const parent = wordElement.parentElement;
                        const targetBank = parent.classList.contains('words-bank') ? solutionArea : wordsBank;
                        targetBank.appendChild(wordElement);
                        // Clear feedback when words are moved
                        const feedbackElement = document.getElementById(`feedback-${index}`);
                        if(feedbackElement) { feedbackElement.textContent = ''; feedbackElement.className = 'game-feedback'; }
                    });
                    wordsBank.appendChild(wordElement);
                });

                // Feedback area for correct/incorrect messages
                const feedback = document.createElement('div');
                feedback.className = 'game-feedback';
                feedback.id = `feedback-${index}`;
                sentenceElement.appendChild(feedback);

                // Container for action buttons
                const buttonContainer = document.createElement('div');
                buttonContainer.className = 'sentence-buttons';

                // Check Answer button
                const checkButton = document.createElement('button');
                checkButton.className = 'check-btn';
                checkButton.textContent = 'Check Answer';
                checkButton.onclick = () => checkSentence(index, sentences); // Pass index and sentences array
                buttonContainer.appendChild(checkButton);

                // Show Answer button
                const showAnswerButton = document.createElement('button');
                showAnswerButton.className = 'show-answer-btn';
                showAnswerButton.textContent = 'Show Answer';
                showAnswerButton.onclick = () => showAnswer(index, sentences); // Pass index and sentences array
                buttonContainer.appendChild(showAnswerButton);

                // Clear Box button
                const deleteBtn = document.createElement('button');
                deleteBtn.className = 'delete-btn';
                deleteBtn.textContent = 'Clear Box';
                deleteBtn.onclick = () => { // Move all words from solution back to bank
                    const currentSolutionArea = document.getElementById(`solution-area-${index}`);
                    const currentWordsBank = document.getElementById(`words-bank-${index}`);
                    while (currentSolutionArea.firstChild) { currentWordsBank.appendChild(currentSolutionArea.firstChild); }
                     const feedbackElement = document.getElementById(`feedback-${index}`);
                     if(feedbackElement) { feedbackElement.textContent = ''; feedbackElement.className = 'game-feedback'; }
                };
                buttonContainer.appendChild(deleteBtn);

                sentenceElement.appendChild(buttonContainer);
                gameContainer.appendChild(sentenceElement);

                // Hide subsequent sentences initially
                 if (index > 0) { sentenceElement.style.display = 'none'; }
            });
        }
        function checkSentence(sentenceId, sentences) {
            // Checks if the user's constructed sentence is correct.
            const solutionArea = document.getElementById(`solution-area-${sentenceId}`);
            const feedbackElement = document.getElementById(`feedback-${sentenceId}`);
            const sentenceElement = document.getElementById(`sentence-${sentenceId}`);
            if (!solutionArea || !feedbackElement || !sentenceElement) return;

            // Get words from the solution area
            const currentWords = Array.from(solutionArea.children).map(word => word.textContent);
            const correctWords = sentences[sentenceId].words; // Get the correct order

            // Check if all words were used
            if (currentWords.length !== correctWords.length) {
                feedbackElement.textContent = '✗ Please use all the words.';
                feedbackElement.className = 'game-feedback feedback-incorrect'; return;
            }

            const isCorrect = arraysEqual(currentWords, correctWords); // Compare arrays

            if (isCorrect) {
                // Correct answer
                feedbackElement.textContent = '✓ Correct! Well done!';
                feedbackElement.className = 'game-feedback feedback-correct';
                sentenceElement.classList.add('completed'); // Mark sentence as completed
                // Automatically show the next sentence after a short delay
                if (sentenceId < sentences.length - 1) {
                    setTimeout(() => {
                        const nextSentence = document.getElementById(`sentence-${sentenceId + 1}`);
                        if (nextSentence) {
                             nextSentence.style.display = 'flex'; // Make it visible
                             nextSentence.scrollIntoView({ behavior: 'smooth', block: 'center' }); // Scroll to it
                         }
                    }, 800);
                } else {
                    feedbackElement.textContent = '✓ You completed the word order game!'; // Final message
                }
            } else {
                // Incorrect answer
                feedbackElement.textContent = '✗ Not quite right. Try again!';
                feedbackElement.className = 'game-feedback feedback-incorrect';
            }
        }
        function showAnswer(sentenceId, sentences) {
            // Displays the correct answer for the current sentence.
            const solutionArea = document.getElementById(`solution-area-${sentenceId}`);
            const wordsBank = document.getElementById(`words-bank-${sentenceId}`);
            const feedbackElement = document.getElementById(`feedback-${sentenceId}`);
            const sentenceElement = document.getElementById(`sentence-${sentenceId}`);
             if (!solutionArea || !wordsBank || !feedbackElement || !sentenceElement) return;

            // Clear both areas
            solutionArea.innerHTML = ''; wordsBank.innerHTML = '';

            // Add words in the correct order to the solution area
            sentences[sentenceId].words.forEach(word => {
                const wordElement = document.createElement('div');
                wordElement.className = 'word-box'; wordElement.textContent = word;
                 // Add 'modal' class for specific styling if word is a modal verb
                 if (sentences[sentenceId].modalVerbs.includes(word)) {
                     wordElement.classList.add('modal');
                 }
                wordElement.style.cursor = 'default'; // Make words unclickable
                solutionArea.appendChild(wordElement);
            });

            feedbackElement.textContent = 'This is the correct order.';
            feedbackElement.className = 'game-feedback';
            sentenceElement.classList.add('completed'); // Mark as completed

            // Automatically show the next sentence after a short delay
             if (sentenceId < sentences.length - 1) {
                 setTimeout(() => {
                     const nextSentence = document.getElementById(`sentence-${sentenceId + 1}`);
                     if (nextSentence) {
                         nextSentence.style.display = 'flex';
                         nextSentence.scrollIntoView({ behavior: 'smooth', block: 'center' });
                     }
                 }, 800);
             }
        }

        // --- Initialization on DOM Load ---
        // IMPORTANT: This ensures JavaScript runs only after the HTML is fully loaded.
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize fill-in exercise functionality (clickable keys)
            initializeFillInKeys();

            // *** UPDATED: Initialize the four separate matching games ***
            initializeMatchingGame('food-matching-basic', 9); // ID from Exercise 6a
            initializeMatchingGame('food-matching-fruits', 12); // ID from Exercise 6b
            initializeMatchingGame('food-matching-dishes', 6); // ID from Exercise 6c
            initializeMatchingGame('food-matching-verbs', 3); // ID from Exercise 6d


            // Initialize the word order game
            initializeWordOrderGame();
        });

    </script>

</body>
</html>
