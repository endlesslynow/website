<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Lesson 5: The Pronouns</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Naskh+Arabic:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@700&display=swap" rel="stylesheet">

    <style>
        /* Ottoman-inspired color scheme (Matches Lesson 1) */
        :root {
            --ottoman-blue: #0081C9; --ottoman-red: #C70039; --ottoman-gold: #FFB100;
            --ottoman-teal: #00B8A9; --ottoman-navy: #023E7D; --ottoman-cream: #FFF8E1;
            --ottoman-light-blue: #E0F7FF; --ottoman-pink: #FFCCDF; --ottoman-light-teal: #CCFCF6;
            --body-background: #1D2F6F; --text-color: #1A3A5A; --text-light: #FFFFFF;
        }
        body { font-family: 'Nunito', Arial, sans-serif; line-height: 1.7; max-width: 800px; margin: 0 auto; padding: 15px; background-color: var(--body-background); background-image: url('../ottoman_background.png'); background-repeat: repeat; background-size: 300px auto; box-sizing: border-box; color: var(--text-color); }
        [lang="ar"], td:first-child, .ottoman-text, .matching-item.ottoman-text, .fill-input.ottoman-input, .key-btn, .correct-answer-display { font-family: 'Noto Naskh Arabic', serif; font-size: 1.4em; line-height: 1.5; font-weight: 500; direction: rtl; text-align: right; }
        /* Latin text styling - Fix for oversized Latin text */
        .latin-text { font-family: 'Nunito', Arial, sans-serif !important; font-size: 0.7em !important; font-weight: normal !important; direction: ltr !important; }

        .matching-item.ottoman-text, .key-btn { text-align: center; }
        .fill-input.ottoman-input { text-align: right; font-size: 1.6em; }
        td:first-child, td[lang="ar"] { text-align: left !important; padding-top: 18px; padding-bottom: 18px; }
        * { box-sizing: border-box; }
        h1, h2, h3 { color: var(--ottoman-navy); font-weight: 700; line-height: 1.3; }
        h1 { text-align: left; border-bottom: 3px solid var(--ottoman-gold); padding-bottom: 15px; margin-bottom: 25px; font-size: 1.8rem; color: var(--text-light); }
        h2 { font-size: 1.5rem; margin-top: 30px; }
        h3 { font-size: 1.2rem; margin-top: 25px; color: var(--ottoman-blue); }
        .section { background-color: var(--ottoman-light-blue); border-radius: 12px; padding: 25px; margin-bottom: 30px; box-shadow: 0 3px 10px rgba(0,0,0,0.05); }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.05); background-color: #C0E0F0; }
        .title-section { background-color: var(--ottoman-navy); border-radius: 12px; padding: 25px; margin-bottom: 30px; box-shadow: 0 3px 10px rgba(0,0,0,0.05); }
        .title-section h1 { text-align: left; border-bottom: 3px solid var(--ottoman-gold); padding-bottom: 15px; margin-bottom: 0; margin-top: 0; font-size: 1.8rem; color: var(--text-light); }
        th, td { padding: 12px 15px; text-align: left; border: none; }
        th { background-color: var(--ottoman-blue); color: var(--text-light); font-weight: 600; }
        tr:nth-child(even) { background-color: var(--ottoman-light-blue); }
        tr:hover { background-color: #B9E7FE; }
        .note { background-color: var(--ottoman-pink); padding: 15px; border-left: 4px solid var(--ottoman-red); margin: 20px 0; border-radius: 0 8px 8px 0; }

        /* Feedback Styles (Match Lesson 1) */
        .feedback, .fill-feedback { margin-top: 8px; margin-left: 5px; font-weight: bold; }
        /* Correct/Incorrect feedback text colors AND STYLE - MATCH L1 Ex2 */
        .fill-feedback.correct { color: var(--ottoman-teal); /* L1 uses teal for .correct */ }
        .fill-feedback.incorrect { color: var(--ottoman-red); /* L1 uses red for .incorrect */ }
        /* Specific style for matching game 'Correct' feedback to match L1 */
        .matching-feedback.correct { color: black !important; font-size: 1.5rem !important; }
        /* Style for sentence building feedback */
        .fill-feedback.correct.sentence-building {
            color: black !important;
            font-size: 1.5rem !important;
            font-weight: bold !important;
            font-family: 'Nunito', Arial, sans-serif !important;
            background-color: var(--ottoman-gold);
            padding: 5px 10px;
            border-radius: 5px;
            display: inline-block;
        }
        /* Display for showing correct answer on incorrect attempt */
        .correct-answer-display { display: inline-block; margin-left: 5px; }

        /* Matching Game Styles (Match Lesson 1) */
        .matching-game { background-color: var(--ottoman-gold); padding: 20px; border-radius: 8px; margin-top: 15px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
        .matching-columns-container { display: flex; gap: 10px; margin-bottom: 20px; }
        .matching-column { flex: 1; display: flex; flex-direction: column; gap: 10px; }
        .matching-column h4 { text-align: center; margin-bottom: 10px; }
        .matching-item-container { display: flex; flex-direction: column; gap: 10px; }
        .matching-item { padding: 12px 15px; background-color: white; border: 2px solid var(--ottoman-blue); border-radius: 8px; cursor: pointer; transition: all 0.2s ease; text-align: center; -webkit-tap-highlight-color: transparent; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        .matching-item:hover { background-color: var(--ottoman-light-blue); }
        .matching-item.selected { background-color: var(--ottoman-blue); color: var(--text-light); }
        .matching-item.matched { background-color: var(--ottoman-gold); color: black; border-color: var(--ottoman-gold); cursor: default; }
        .matching-result { text-align: center; }
        .matching-result div { font-size: 1.2rem; font-weight: bold; color: black; margin-top: 15px; }


        /* Fill-in / Sentence Building Styles (Match Lesson 1 Ex2 & Ex5) */
        .fill-exercise { margin-top: 30px; }
        /* Container for each exercise item - MATCH L1 Ex2 */
        .fill-item { background-color: var(--ottoman-gold); /* #FFB100 */ margin-bottom: 20px; padding: 15px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        /* General row for inputs/text - MATCH L1 Ex2 */
        .exercise-row { display: flex; align-items: center; gap: 12px; /* MATCH L1 Ex2 gap */ margin-bottom: 10px; flex-wrap: wrap; color: var(--text-color); font-weight: 500; }
        /* Translation text style - MATCH L1 Ex2 placement (inside flex row) */
        .translation { color: black; font-size: 1.1em; /* Adjusted slightly from L1's 1.2em for better fit in this context */ }
        /* Input field - MATCH L1 Ex2 styles */
        .fill-input { background-color: var(--ottoman-gold); /* #FFB100 - Match L1 Ex2 internal color */ width: 120px; /* Default width like L1 Ex2 */ padding: 8px 12px; border: 2px solid #997000; /* Match L1 Ex2 border */ border-radius: 6px; font-size: 16px; font-family: inherit; }
        /* Wider input for sentence building like L1 Ex5 */
        .fill-input.long-input { width: 100%; max-width: 400px; }
        /* Ottoman Input specific font override (already present, ensure consistency) */
        .fill-input.ottoman-input { font-family: 'Noto Naskh Arabic', serif; font-size: 1.6em; direction: rtl; text-align: right; }
        /* Container for key buttons - MATCH L1 Ex2 */
        .key-container { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 12px; }
        /* Key buttons (Match L1 Ex2/Ex5) */
        .key-btn { padding: 5px 12px; background-color: #FFECB3; border: 1px solid #E6A800; border-radius: 6px; cursor: pointer; color: #333; font-size: 1.6em; font-family: 'Noto Naskh Arabic', serif; /* Explicitly set font */ text-align: center; /* Ensure centering */ }
        .key-btn:hover { background-color: #FFE082; color: black; }
        /* Check button (Match L1 Ex2/Ex5) */
        .fill-check { padding: 8px 15px; background-color: #FFECB3; color: black; border: none; border-radius: 6px; cursor: pointer; font-family: inherit; font-weight: 600; transition: background-color 0.2s ease; }
        .fill-check:hover { background-color: #FFE082; }


        /* Congratulations (Match Lesson 1 Structure/Style) */
         /* Using standard .section */
         .congrats-ottoman { font-family: 'Amiri', serif; font-size: 30px; /* Match L1 inline style */ line-height: 1.4; }
         .congrats-english { font-size: 1.2em; margin-top: 10px; }

        /* Word Order Game Styles - For Duolingo-style exercise */
        .word-order-game {
            background-color: var(--ottoman-light-blue);
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .game-sentence {
            background-color: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            display: flex;
            flex-direction: column;
        }

        .game-sentence.completed {
            background-color: var(--ottoman-light-teal);
            border-left: 4px solid var(--ottoman-teal);
        }

        .game-sentence-translation {
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--text-color);
        }

        .sentence-number {
            display: inline-block;
            min-width: 45px;
            font-weight: 700;
            color: var(--ottoman-red);
        }

        .solution-area {
            min-height: 60px;
            padding: 10px;
            background-color: #e0f7ff;
            border-radius: 8px;
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 10px;
            border: 2px dashed var(--ottoman-blue);
            direction: rtl; /* Fix for RTL language */
            justify-content: flex-start; /* Right justify content for RTL */
        }

        .words-bank {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            padding: 10px;
            background-color: var(--ottoman-cream);
            border-radius: 6px;
            margin-bottom: 10px;
            direction: rtl; /* Fix for RTL language */
        }

        .word-box {
            display: inline-block;
            padding: 8px 12px;
            background-color: var(--ottoman-blue); /* Changed to match website blue */
            color: white; /* Better contrast for blue background */
            border-radius: 5px;
            cursor: pointer;
            user-select: none;
            margin: 0;
            font-weight: 500;
            border: 2px solid transparent;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            transition: all 0.2s ease;
        }

        .solution-area .word-box {
            background-color: #c0e0f0;
            color: var(--text-color); /* Reset color for solution box */
            border-color: var(--ottoman-blue);
        }

        .word-box:active {
            transform: scale(0.95);
        }

        .game-feedback {
            margin-top: 10px;
            font-weight: 600;
        }

        .feedback-correct {
            color: var(--ottoman-teal);
        }

        .feedback-incorrect {
            color: var(--ottoman-red);
        }

        .sentence-buttons {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .check-btn, .show-answer-btn, .delete-btn {
            flex: 1;
            background-color: var(--ottoman-blue);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-family: inherit;
            font-weight: 600;
            transition: all 0.2s ease;
        }

        .check-btn:hover, .show-answer-btn:hover, .delete-btn:hover {
            background-color: #006aa3; /* Darker blue on hover */
        }

        .check-btn:active, .show-answer-btn:active, .delete-btn:active {
            transform: scale(0.98);
        }

        .show-answer-btn {
            background-color: var(--ottoman-light-blue);
            color: var(--text-color);
        }

        .show-answer-btn:hover {
            background-color: #c0e0f0;
        }

        .delete-btn {
            background-color: #ffccdf;
            color: var(--text-color);
        }

        .delete-btn:hover {
            background-color: #ffb3c6;
        }

        /* Navigation (Match Lesson 1) */
        .nav-buttons-container { display: flex; justify-content: space-between; margin-top: 30px; margin-bottom: 40px; padding: 0 10px; }
        .nav-button { background-color: var(--ottoman-navy); color: var(--text-light); border: 3px solid var(--ottoman-blue); border-radius: 12px; padding: 15px 20px; font-family: 'Nunito', Arial, sans-serif; font-weight: 600; font-size: 1.3rem; /* Match L1 size */ cursor: pointer; box-shadow: 0 3px 10px rgba(0,0,0,0.1); transition: all 0.3s ease; text-decoration: none; text-align: center; display: inline-block; line-height: 1.4; }
        .nav-button:hover { background-color: var(--ottoman-blue); border-color: var(--ottoman-navy); }
        .prev-button { margin-right: auto; }
        .next-button, .exercises-button { margin-left: 10px; }
        .nav-button.next-button {
            padding-top: 27px;  /* Add padding to the top to push text down */
        }

         /* Small Latin text (Match Lesson 1) */
         .small-latin { font-size: 0.6em !important; font-family: 'Nunito', Arial, sans-serif !important; font-weight: normal !important; display: inline-block; vertical-align: middle; direction: ltr; text-align: left; }

        /* Media queries (Copied from Lesson 1 for consistency) */
        @media (max-width: 600px) {
            .section, .title-section { padding: 20px 15px; border-radius: 10px; }
            h1 { font-size: 1.6rem; padding-bottom: 10px; } h2 { font-size: 1.3rem; } h3 { font-size: 1.1rem; }
            table { display: block; overflow-x: auto; white-space: nowrap; } th, td { padding: 10px 12px; } th { font-size: 0.9rem; padding: 10px 8px; }
            .exercise { padding: 15px; }
            .matching-columns-container { flex-direction: column; gap: 15px; } .matching-item { font-size: 1em; padding: 10px 12px; } .matching-item.ottoman-text { font-size: 1.2em; }
            /* Fill-in exercises - Adjust layout like L1 Ex2 on mobile */
            .exercise-row { flex-direction: row; align-items: center; gap: 8px; flex-wrap: wrap;} /* Keep row, allow wrap, smaller gap */
            .exercise-row .ottoman-text { flex-shrink: 0; /* Prevent shrinking */ margin-right: 5px;}
            .exercise-row .fill-input { flex-grow: 1; width: auto; min-width: 80px; margin-right: 5px;} /* Allow input to grow */
            .exercise-row .translation { flex-basis: auto; /* Don't force full width */}

            .fill-input { width: 100%; max-width: none; margin-top: 5px; } /* Override default width */
            .key-container { justify-content: center; }
            .fill-check { width: 100%; max-width: 300px; margin-top: 10px; }
            /* Specific adjustments for Ex2 layout on mobile (Already present, review) */
             .fill-item .exercise-row-ex2 { flex-direction: row; flex-wrap: wrap;} /* Allow wrap */
             .fill-item .exercise-row-ex2 .ottoman-text { margin-left: 10px; } /* Space between name and input */
            /* Navigation */
            .nav-buttons-container { flex-direction: column; gap: 15px; } .nav-button { width: 100%; margin: 0; font-size: 1rem;}
            body { padding: 10px; }

            /* Word order game mobile adjustments */
            .sentence-buttons {
                flex-direction: column;
            }

            .check-btn, .show-answer-btn, .delete-btn {
                width: 100%;
            }
        }
         @media (max-width: 450px) {
             .matching-item { padding: 10px 8px; font-size: 0.9em; } .matching-item.ottoman-text { font-size: 1.1em; }
             .key-btn { font-size: 1.4em; padding: 4px 10px;} .nav-button { padding: 12px 15px; }
             .exercise-row {gap: 5px;} /* Further reduce gap on very small screens */
         }
    </style>
</head>
<body>
    <div class="title-section">
        <h1>Lesson 5<br>The Pronouns</h1>
    </div>

    <div class="section">
        <h3>Lesson Objectives</h3>
        <ul>
             <li><a href="#pronoun-classes" style="color: inherit; text-decoration: none;">The Seven Classes of Pronouns</a></li>
             <li><a href="#personal-pronouns" style="color: inherit; text-decoration: none;">Personal Pronouns</a></li>
             <li><a href="#possessive-pronouns" style="color: inherit; text-decoration: none;">Possessive Pronouns</a></li>
             <li><a href="#possessive-affixes" style="color: inherit; text-decoration: none;">Possessive Affixes</a></li>
        </ul>
    </div>

    <div class="section">
        <h2 id="pronoun-classes">1. The Seven Classes of Pronouns</h2>
        <p>Turkish Pronouns are divided into seven classes:</p>
        <ol>
            <li>Personal</li>
            <li>Possessive</li>
            <li>Adjectival</li>
            <li>Demonstrative</li>
            <li>Reflexive</li>
            <li>Indefinite</li>
            <li>Interrogative pronouns</li>
        </ol>
    </div>

    <div class="section">
        <h2 id="personal-pronouns">2. Personal Pronouns</h2>
        <p>They are: <span class="ottoman-text" style="font-size: 1.1em; display: inline-block;">بن</span> <span class="latin-text">bén</span>, <span class="ottoman-text" style="font-size: 1.1em; display: inline-block;">سن</span> <span class="latin-text">sén</span>, <span class="ottoman-text" style="font-size: 1.1em; display: inline-block;">او</span> <span class="latin-text">o</span>, <span class="ottoman-text" style="font-size: 1.1em; display: inline-block;">كندی</span> <span class="latin-text">kéndi</span>.</p>
        <p>They are declined as follows:</p>

        <h3>First Person</h3>
        <table>
            <tr><th>Case</th><th>Singular</th><th>Translation</th><th>Plural</th><th>Translation</th></tr>
            <tr>
                <td>N</td>
                <td lang="ar">بن <span class="latin-text">bén</span></td>
                <td>I</td>
                <td lang="ar">بز <span class="latin-text">biz</span></td>
                <td>we</td>
            </tr>
            <tr>
                <td>G</td>
                <td lang="ar">بنم <span class="latin-text">bénim</span></td>
                <td>my</td>
                <td lang="ar">بزم <span class="latin-text">bizim</span></td>
                <td>our</td>
            </tr>
            <tr>
                <td>D</td>
                <td lang="ar">بكا <span class="latin-text">ba-ña</span></td>
                <td>to me</td>
                <td lang="ar">بزه <span class="latin-text">bizé</span></td>
                <td>to us</td>
            </tr>
            <tr>
                <td>Ac</td>
                <td lang="ar">بنی <span class="latin-text">béni</span></td>
                <td>me</td>
                <td lang="ar">بزی <span class="latin-text">bizi</span></td>
                <td>us</td>
            </tr>
            <tr>
                <td>L</td>
                <td lang="ar">بنده <span class="latin-text">béndé</span></td>
                <td>in me</td>
                <td lang="ar">بزده <span class="latin-text">bizdé</span></td>
                <td>in us</td>
            </tr>
            <tr>
                <td>Ab</td>
                <td lang="ar">بندن <span class="latin-text">béndén</span></td>
                <td>from me</td>
                <td lang="ar">بزدن <span class="latin-text">bizdén</span></td>
                <td>from us</td>
            </tr>
        </table>

        <h3>Second Person</h3>
        <table>
            <tr><th>Case</th><th>Singular</th><th>Translation</th><th>Plural</th><th>Translation</th></tr>
            <tr>
                <td>N</td>
                <td lang="ar">سن <span class="latin-text">sén</span></td>
                <td>you (singular/informal)</td>
                <td lang="ar">سز <span class="latin-text">siz</span></td>
                <td>you (plural/formal)</td>
            </tr>
            <tr>
                <td>G</td>
                <td lang="ar">سنك <span class="latin-text">sénin</span></td>
                <td>your (singular/informal)</td>
                <td lang="ar">سزك <span class="latin-text">sizin</span></td>
                <td>your (plural/formal)</td>
            </tr>
            <tr>
                <td>D</td>
                <td lang="ar">سكا <span class="latin-text">sa-ña</span></td>
                <td>to you (singular/informal)</td>
                <td lang="ar">سزه <span class="latin-text">sizé</span></td>
                <td>to you (plural/formal)</td>
            </tr>
            <tr>
                <td>Ac</td>
                <td lang="ar">سنی <span class="latin-text">séni</span></td>
                <td>you (singular/informal)</td>
                <td lang="ar">سزی <span class="latin-text">sizi</span></td>
                <td>you (plural/formal)</td>
            </tr>
            <tr>
                <td>L</td>
                <td lang="ar">سنده <span class="latin-text">séndé</span></td>
                <td>in you (singular/informal)</td>
                <td lang="ar">سزده <span class="latin-text">sizdé</span></td>
                <td>in you (plural/formal)</td>
            </tr>
            <tr>
                <td>Ab</td>
                <td lang="ar">سندن <span class="latin-text">séndén</span></td>
                <td>from you (singular/informal)</td>
                <td lang="ar">سزدن <span class="latin-text">sizdén</span></td>
                <td>from you (plural/formal)</td>
            </tr>
        </table>

        <div class="fill-exercise">
            <h3>Exercise 1: Matching</h3>
            <p>Match the Ottoman Turkish personal pronouns with their correct translations.</p>
            <div class="matching-game">
                <div class="matching-columns-container">
                    <div class="matching-column">
                        <h4>Ottoman Turkish:</h4>
                        <div class="matching-item-container" id="first-form-ottoman-container">
                            <div class="matching-item ottoman-text" data-id="1">بن</div>
                            <div class="matching-item ottoman-text" data-id="2">بنم</div>
                            <div class="matching-item ottoman-text" data-id="3">بكا</div>
                            <div class="matching-item ottoman-text" data-id="4">سن</div>
                            <div class="matching-item ottoman-text" data-id="5">سنك</div>
                            <div class="matching-item ottoman-text" data-id="6">سكا</div>
                        </div>
                    </div>
                    <div class="matching-column">
                        <h4>Translation:</h4>
                        <div class="matching-item-container" id="first-form-case-container">
                            <div class="matching-item" data-id="1">I</div>
                            <div class="matching-item" data-id="2">my</div>
                            <div class="matching-item" data-id="3">to me</div>
                            <div class="matching-item" data-id="4">you (singular/informal)</div>
                            <div class="matching-item" data-id="5">your (singular/informal)</div>
                            <div class="matching-item" data-id="6">to you (singular/informal)</div>
                        </div>
                    </div>
                </div>
                <div class="matching-result">
                    <div class="matching-feedback" id="first-form-matching-feedback"></div>
                </div>
            </div>
        </div>

        <h3>Third Person</h3>
        <table>
            <tr><th>Case</th><th>Singular</th><th>Translation</th><th>Plural</th><th>Translation</th></tr>
            <tr>
                <td>N</td>
                <td lang="ar">او <span class="latin-text">o</span></td>
                <td>he, she, it</td>
                <td lang="ar">انلر <span class="latin-text">onlar</span></td>
                <td>them</td>
            </tr>
            <tr>
                <td>G</td>
                <td lang="ar">انك، آنك <span class="latin-text">onun, anın</span></td>
                <td>his, hers, its</td>
                <td lang="ar">انلرك، آنلرك <span class="latin-text">onların, anların</span></td>
                <td>of them</td>
            </tr>
            <tr>
                <td>D</td>
                <td lang="ar">اكا، آكا <span class="latin-text">o-na, a-na</span></td>
                <td>to him, to her, to it</td>
                <td lang="ar">انلره، آنلره <span class="latin-text">onlara, anlara</span></td>
                <td>to them</td>
            </tr>
            <tr>
                <td>Ac</td>
                <td lang="ar">انی، آنی <span class="latin-text">o-nou, a-nı</span></td>
                <td>him, her, it</td>
                <td lang="ar">انلری، آنلری <span class="latin-text">onları, anları</span></td>
                <td>them</td>
            </tr>
            <tr>
                <td>L</td>
                <td lang="ar">انده، آنده <span class="latin-text">on-da, an-da</span></td>
                <td>in him, in her, in it</td>
                <td lang="ar">انلرده، آنلرده <span class="latin-text">onlarda, anlarda</span></td>
                <td>in them</td>
            </tr>
            <tr>
                <td>Ab</td>
                <td lang="ar">اندن، آندن <span class="latin-text">on-dan, an-dan</span></td>
                <td>from him, from her, from it</td>
                <td lang="ar">انلردن، آنلردن <span class="latin-text">onlardan, anlardan</span></td>
                <td>from them</td>
            </tr>
        </table>

        <h3>Reflexive form of the Third Person</h3>
        <table>
            <tr><th>Case</th><th>Singular</th><th>Translation</th><th>Plural</th><th>Translation</th></tr>
            <tr>
                <td>N</td>
                <td lang="ar">كندی <span class="latin-text">kéndi</span></td>
                <td rowspan="6">himself, herself, itself</td> <td lang="ar">كنديلر <span class="latin-text">kéndilér</span></td>
                <td rowspan="6">themselves</td>
            </tr>
            <tr>
                <td>G</td>
                <td lang="ar">كندينك <span class="latin-text">kéndinin</span></td>
                <td lang="ar">كنديلرك <span class="latin-text">kéndilérin</span></td>
            </tr>
            <tr>
                <td>D</td>
                <td lang="ar">كندينه <span class="latin-text">kéndiné</span></td>
                <td lang="ar">كنديلره <span class="latin-text">kéndiléré</span></td>
            </tr>
            <tr>
                <td>Ac</td>
                <td lang="ar">كندينی <span class="latin-text">kéndini</span></td>
                <td lang="ar">كنديلری <span class="latin-text">kéndiléri</span></td>
            </tr>
            <tr>
                <td>L</td>
                <td lang="ar">كنديده <span class="latin-text">kéndidé</span></td>
                <td lang="ar">كنديلرده <span class="latin-text">kéndilérdé</span></td>
            </tr>
            <tr>
                <td>Ab</td>
                <td lang="ar">كنديدن <span class="latin-text">kéndidén</span></td>
                <td lang="ar">كنديلردن <span class="latin-text">kéndilérdén</span></td>
            </tr>
        </table>

        <div class="note">
             <p>Unlike English which uses 'you' for both singular and plural, Turkish has two distinct forms: <span class="ottoman-text" style="font-size: 1.1em; display: inline-block;">سن</span> (singular/informal) and <span class="ottoman-text" style="font-size: 1.1em; display: inline-block;">سز</span> (plural/formal). <span class="ottoman-text" style="font-size: 1.1em; display: inline-block;">سن</span> is used when addressing parents, close relatives, children, household staff, and close friends - people you are familiar with. <span class="ottoman-text" style="font-size: 1.1em; display: inline-block;">سز</span> is used for strangers, acquaintances, and in formal situations.</p>
            <p>Sometimes the forms <span class="ottoman-text" style="font-size: 1.1em; display: inline-block;">بزلر</span> and <span class="ottoman-text" style="font-size: 1.1em; display: inline-block;">سزلر</span> (double plurals of <span class="ottoman-text" style="font-size: 1.1em; display: inline-block;">بز</span> and <span class="ottoman-text" style="font-size: 1.1em; display: inline-block;">سز</span>) are used in all six cases. These forms can also be used politely instead of <span class="ottoman-text" style="font-size: 1.1em; display: inline-block;">بن</span> (I) and <span class="ottoman-text" style="font-size: 1.1em; display: inline-block;">سن</span> (you singular/informal).</p>
        </div>

        <div class="fill-exercise">
            <h3>Exercise 2: Matching</h3>
            <p>Match the Ottoman Turkish third person pronouns with their correct translations.</p>
            <div class="matching-game">
                <div class="matching-columns-container">
                    <div class="matching-column">
                        <h4>Ottoman Turkish:</h4>
                        <div class="matching-item-container" id="second-form-ottoman-container">
                            <div class="matching-item ottoman-text" data-id="1">او</div>
                            <div class="matching-item ottoman-text" data-id="2">انك</div>
                            <div class="matching-item ottoman-text" data-id="3">اكا</div>
                            <div class="matching-item ottoman-text" data-id="4">انی</div>
                            <div class="matching-item ottoman-text" data-id="5">انلر</div>
                            <div class="matching-item ottoman-text" data-id="6">كندی</div>
                        </div>
                    </div>
                    <div class="matching-column">
                        <h4>Translation:</h4>
                        <div class="matching-item-container" id="second-form-case-container">
                            <div class="matching-item" data-id="1">he/she/it</div>
                            <div class="matching-item" data-id="2">his/hers/its</div>
                            <div class="matching-item" data-id="3">to him/her/it</div>
                            <div class="matching-item" data-id="4">him/her/it</div>
                            <div class="matching-item" data-id="5">they/them</div>
                            <div class="matching-item" data-id="6">himself/herself/itself</div> </div>
                    </div>
                </div>
                <div class="matching-result">
                    <div class="matching-feedback" id="second-form-matching-feedback"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="section">
        <h2 id="possessive-pronouns">3. Possessive Pronouns</h2>
         <p>The Possessive Pronouns in Turkish don't directly correspond to those in English; they are primarily possessive affixes. These affixes are used instead of English possessive pronouns (like 'my', 'your', 'his'). They consist of syllables added to the end of nouns. While they function like pronouns in conveying possession, they cannot stand alone as separate words.</p>
    </div>

    <div class="section">
        <h2 id="possessive-affixes">4. Possessive Affixes</h2>
        <p>The possessive affixes are the following:</p>

        <table>
            <tr>
                <th>English Equivalent</th>
                <th>Singular Affix</th>
                <th>Plural Affix</th>
            </tr>
            <tr>
                <td>My</td>
                <td lang="ar">م <span class="latin-text">-m</span></td>
                <td>-</td> </tr>
            <tr>
                <td>Your (sing/informal)</td>
                <td lang="ar">ك <span class="latin-text">-n</span></td>
                 <td>-</td> </tr>
            <tr>
                <td>His/Her/Its</td>
                <td lang="ar">ی <span class="latin-text">-i</span></td>
                 <td>-</td> </tr>
            <tr>
                <td>Our</td>
                 <td>-</td> <td lang="ar">مز <span class="latin-text">-miz</span></td>
            </tr>
            <tr>
                <td>Your (plur/formal)</td>
                 <td>-</td> <td lang="ar">كز <span class="latin-text">-niz</span></td>
            </tr>
            <tr>
                <td>Their</td>
                 <td>-</td> <td lang="ar">لری <span class="latin-text">-leri</span></td>
            </tr>
        </table>
        <h3>Examples:</h3>
        <table>
            <tr>
                <th>Singular</th>
                <th>Translation</th>
            </tr>
            <tr>
                <td lang="ar">الم <span class="latin-text">élim</span></td>
                <td>my hand</td>
            </tr>
            <tr>
                <td lang="ar">الك <span class="latin-text">élin</span></td>
                <td>your hand (singular/informal)</td> </tr>
            <tr>
                <td lang="ar">الی <span class="latin-text">éli</span></td>
                <td>his/her/its hand</td> </tr>
        </table>

        <table>
            <tr>
                <th>Plural</th>
                <th>Translation</th>
            </tr>
            <tr>
                <td lang="ar">الرمز <span class="latin-text">él-imiz</span></td>
                <td>our hands</td>
            </tr>
            <tr>
                <td lang="ar">الكز <span class="latin-text">él-iniz</span></td>
                <td>your hands (plural/formal)</td> </tr>
            <tr>
                <td lang="ar">اللری <span class="latin-text">él-léri</span></td>
                <td>their hands</td>
            </tr>
        </table>

        <p>But in the third person <span class="ottoman-text" style="font-size: 1.1em; display: inline-block;">جو‌جوغی‌لری</span> <span class="latin-text">jo-joukları</span>, <span class="ottoman-text" style="font-size: 1.1em; display: inline-block;">آغا‌لری</span> <span class="latin-text">a-ghaları</span>, <span class="ottoman-text" style="font-size: 1.1em; display: inline-block;">یورونلری</span> <span class="latin-text">bourounları</span>, <span class="ottoman-text" style="font-size: 1.1em; display: inline-block;">آغیز‌لری</span> <span class="latin-text">aghızları</span> etc.</p>

        <h3>More Examples:</h3>
        <table>
            <tr>
                <th>Ottoman Turkish</th>
                <th>Transliteration</th>
                <th>Translation</th>
            </tr>
            <tr>
                <td lang="ar">عقلم <span class="latin-text">aqlım</span></td>
                <td>aq-lım</td>
                <td>my mind/sense</td> </tr>
            <tr>
                <td lang="ar">وقتك <span class="latin-text">vaqtın</span></td>
                <td>vaq-tın</td>
                <td>your time (singular/informal)</td> </tr>
            <tr>
                <td lang="ar">قسمی <span class="latin-text">qısmı</span></td>
                <td>qıs-mı</td>
                <td>his/her/its part</td> </tr>
            <tr>
                <td lang="ar">اسممز <span class="latin-text">ismimiz</span></td>
                <td>is-mi-miz</td>
                <td>our name</td> </tr>
            <tr>
                <td lang="ar">شهركز <span class="latin-text">sheriniz</span></td>
                <td>she-hr-i-niz</td>
                <td>your city (plural/formal)</td> </tr>
        </table>

        <div class="note">
            <p>Note that possessive affixes are attached directly to the nouns they modify, forming a single word. This combined word (noun + possessive affix) is then declined through the different cases just like a simple noun. For example:</p>
            </div>

        <h3>1. Affixes of the First Person</h3>
        <table>
            <tr>
                <th>Case</th>
                <th>Singular</th>
                <th>Translation</th>
                <th>Plural</th>
                <th>Translation</th>
            </tr>
            <tr>
                <td>N</td>
                <td lang="ar">كتابم <span class="latin-text">kitabım</span></td>
                <td>my book</td>
                <td lang="ar">كتابمز <span class="latin-text">kitabımız</span></td>
                <td>our book</td>
            </tr>
            <tr>
                <td>G</td>
                <td lang="ar">كتابمك <span class="latin-text">kitabımın</span></td>
                <td>of my book</td>
                <td lang="ar">كتابمزك <span class="latin-text">kitabımızın</span></td>
                <td>of our book</td>
            </tr>
            <tr>
                <td>D</td>
                <td lang="ar">كتابمه <span class="latin-text">kitabıma</span></td>
                <td>to my book</td>
                <td lang="ar">كتابمزه <span class="latin-text">kitabımıza</span></td>
                <td>to our book</td>
            </tr>
            <tr>
                <td>Ac</td>
                <td lang="ar">كتابمی <span class="latin-text">kitabımı</span></td>
                <td>my book (acc.)</td>
                <td lang="ar">كتابمزی <span class="latin-text">kitabımızı</span></td>
                <td>our book (acc.)</td>
            </tr>
            <tr>
                <td>L</td>
                <td lang="ar">كتابمده <span class="latin-text">kitabımda</span></td>
                <td>in my book</td>
                <td lang="ar">كتابمزده <span class="latin-text">kitabımızda</span></td>
                <td>in our book</td>
            </tr>
            <tr>
                <td>Ab</td>
                <td lang="ar">كتابمدن <span class="latin-text">kitabımdan</span></td>
                <td>from my book</td>
                <td lang="ar">كتابمزدن <span class="latin-text">kitabımızdan</span></td>
                <td>from our book</td>
            </tr>
        </table>
        <h3>2. Affixes of the Second Person</h3>
        <table>
            <tr>
                <th>Case</th>
                <th>Singular</th>
                <th>Translation</th>
                <th>Plural</th>
                <th>Translation</th>
            </tr>
            <tr>
                <td>N</td>
                <td lang="ar">كتابك <span class="latin-text">kitabın</span></td>
                <td>your book (sing./inf.)</td> <td lang="ar">كتابكز <span class="latin-text">kitabınız</span></td>
                <td>your book (plur./form.)</td> </tr>
            <tr>
                <td>G</td>
                <td lang="ar">كتابكك <span class="latin-text">ki-ta-bi-nin</span></td>
                <td>of your book (sing./inf.)</td>
                <td lang="ar">كتابكزك <span class="latin-text">kitabınızın</span></td>
                 <td>of your book (plur./form.)</td>
           </tr>
            <tr>
                <td>D</td>
                <td lang="ar">كتابكه <span class="latin-text">kitabına</span></td>
                <td>to your book (sing./inf.)</td>
                <td lang="ar">كتابكزه <span class="latin-text">kitabınıza</span></td>
                 <td>to your book (plur./form.)</td>
           </tr>
            <tr>
                <td>Ac</td>
                <td lang="ar">كتابكی <span class="latin-text">kitabını</span></td>
                <td>your book (acc., sing./inf.)</td>
                <td lang="ar">كتابكزی <span class="latin-text">kitabınızı</span></td>
                 <td>your book (acc., plur./form.)</td>
           </tr>
            <tr>
                <td>L</td>
                <td lang="ar">كتابكده <span class="latin-text">kitabında</span></td>
                <td>in your book (sing./inf.)</td>
                <td lang="ar">كتابكزده <span class="latin-text">kitabınızda</span></td>
                 <td>in your book (plur./form.)</td>
           </tr>
            <tr>
                <td>Ab</td>
                <td lang="ar">كتابكدن <span class="latin-text">kitabından</span></td>
                <td>from your book (sing./inf.)</td>
                <td lang="ar">كتابكزدن <span class="latin-text">kitabınızdan</span></td>
                 <td>from your book (plur./form.)</td>
           </tr>
        </table>

        <h3>3. Affixes of the Third Person</h3>
        <table>
            <tr>
                <th>Case</th>
                <th>Singular</th>
                <th>Translation</th>
                <th>Plural</th>
                <th>Translation</th>
            </tr>
            <tr>
                <td>N</td>
                <td lang="ar">كتابی <span class="latin-text">kitabı</span></td>
                <td>his/her/its book</td> <td lang="ar">كتابلری <span class="latin-text">kitabları</span></td>
                <td>their book</td>
            </tr>
            <tr>
                <td>G</td>
                <td lang="ar">كتابنك <span class="latin-text">kitabının</span></td>
                <td>of his/her/its book</td>
                <td lang="ar">كتابلرينك <span class="latin-text">kitablarının</span></td>
                 <td>of their book</td>
           </tr>
            <tr>
                <td>D</td>
                <td lang="ar">كتابنه <span class="latin-text">kitabına</span></td>
                <td>to his/her/its book</td>
                <td lang="ar">كتابلرينه <span class="latin-text">kitablarına</span></td>
                 <td>to their book</td>
           </tr>
            <tr>
                <td>Ac</td>
                <td lang="ar">كتابنی <span class="latin-text">kitabını</span></td>
                <td>his/her/its book (acc.)</td>
                <td lang="ar">كتابلرينی <span class="latin-text">kitablarını</span></td>
                 <td>their book (acc.)</td>
           </tr>
            <tr>
                <td>L</td>
                <td lang="ar">كتابنده <span class="latin-text">kitabında</span></td>
                <td>in his/her/its book</td>
                <td lang="ar">كتابلرنده <span class="latin-text">kitablarında</span></td>
                 <td>in their book</td>
           </tr>
            <tr>
                <td>Ab</td>
                <td lang="ar">كتابندن <span class="latin-text">kitabından</span></td>
                <td>from his/her/its book</td>
                <td lang="ar">كتابلرندن <span class="latin-text">kitablarından</span></td>
                 <td>from their book</td>
           </tr>
        </table>

        <div class="fill-exercise">
            <h3>Exercise 3: Matching</h3>
            <p>Match the Ottoman Turkish possessive forms with their correct translations.</p>
            <div class="matching-game">
                <div class="matching-columns-container">
                    <div class="matching-column">
                        <h4>Ottoman Turkish:</h4>
                        <div class="matching-item-container" id="third-form-ottoman-container">
                            <div class="matching-item ottoman-text" data-id="1">كتابم</div>
                            <div class="matching-item ottoman-text" data-id="2">كتابك</div>
                            <div class="matching-item ottoman-text" data-id="3">كتابی</div>
                            <div class="matching-item ottoman-text" data-id="4">كتابمز</div>
                            <div class="matching-item ottoman-text" data-id="5">كتابكز</div>
                            <div class="matching-item ottoman-text" data-id="6">كتابلری</div>
                        </div>
                    </div>
                    <div class="matching-column">
                        <h4>Translation:</h4>
                        <div class="matching-item-container" id="third-form-case-container">
                            <div class="matching-item" data-id="1">my book</div>
                            <div class="matching-item" data-id="2">your book (singular/informal)</div>
                            <div class="matching-item" data-id="3">his/her/its book</div>
                            <div class="matching-item" data-id="4">our book</div>
                            <div class="matching-item" data-id="5">your book (plural/formal)</div>
                            <div class="matching-item" data-id="6">their book</div>
                        </div>
                    </div>
                </div>
                <div class="matching-result">
                    <div class="matching-feedback" id="third-form-matching-feedback"></div>
                </div>
            </div>
        </div>

        <div class="fill-exercise">
            <h3>Exercise 4: Sentence Building</h3>
            <p>Form complete Ottoman Turkish sentences by arranging the words in the correct order.</p>

            <div class="word-order-game">
                <div id="sentences-container"></div>
            </div>

            <script>
                document.addEventListener('DOMContentLoaded', function() {
                    // Sentences data with translations (Updated English)
                    const sentencesData = [
                        {
                            ottoman: "او بنم كتابم در",
                            english: "That is my book."
                        },
                        {
                            ottoman: "بو سنك قلمك میدر",
                            english: "Is this your pen (singular/informal)?"
                        },
                        {
                            ottoman: "انلر بزم اومزده درلر",
                            english: "They are in our house."
                        },
                        {
                            ottoman: "او كندی كتابنی پدرينه ويردی",
                            english: "He gave his own book to his father."
                        },
                        {
                            ottoman: "سزك اسمكز ندر",
                            english: "What is your name (plural/formal)?"
                        },
                        {
                            ottoman: "بن سنك كتابكی مكتبده گوردم",
                            english: "I saw your book (singular/informal) at school."
                        },
                        {
                            ottoman: "كتابمی سكا ويرمك ايسترم",
                            english: "I want to give my book to you (singular/informal)."
                        },
                        {
                            ottoman: "او كتابنی اولومده براقدی",
                            english: "He left his book in my room."
                        }
                    ];

                    // Process the sentences
                    const sentences = sentencesData.map(item => {
                        return {
                            original: item.ottoman,
                            english: item.english,
                            words: item.ottoman.split(/\s+/) // Don't reverse here - display in logical order
                        };
                    });

                    // Initialize the game
                    const gameContainer = document.getElementById('sentences-container');

                    // Shuffle function for words
                    function shuffleArray(array) {
                        const newArray = [...array];
                        for (let i = newArray.length - 1; i > 0; i--) {
                            const j = Math.floor(Math.random() * (i + 1));
                            [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
                        }
                        return newArray;
                    }

                    // Create all sentence elements
                    sentences.forEach((sentence, index) => {
                        // Create game sentence element
                        const sentenceElement = document.createElement('div');
                        sentenceElement.className = 'game-sentence';
                        sentenceElement.id = `sentence-${index}`;

                        // Create numbered translation
                        const translation = document.createElement('div');
                        translation.className = 'game-sentence-translation';
                        translation.innerHTML = `<span class="sentence-number">${index + 1}/${sentences.length}</span> ${sentence.english}`;
                        sentenceElement.appendChild(translation);

                        // Create solution area (where selected words will go)
                        const solutionArea = document.createElement('div');
                        solutionArea.className = 'solution-area';
                        solutionArea.id = `solution-area-${index}`;
                        sentenceElement.appendChild(solutionArea);

                        // Create words bank (where unselected words are)
                        const wordsBank = document.createElement('div');
                        wordsBank.className = 'words-bank';
                        wordsBank.id = `words-bank-${index}`;
                        sentenceElement.appendChild(wordsBank);

                        // Add shuffled words to the words bank
                        const shuffledWords = shuffleArray(sentence.words);
                        shuffledWords.forEach(word => {
                            const wordElement = document.createElement('div');
                            wordElement.className = 'word-box ottoman-text';
                            wordElement.textContent = word;

                            // Add click event to move words between banks
                            wordElement.addEventListener('click', () => {
                                const parent = wordElement.parentElement;

                                if (parent.classList.contains('words-bank')) {
                                    // Move from words bank to solution area
                                    const solutionArea = document.getElementById(`solution-area-${index}`);
                                    solutionArea.appendChild(wordElement);
                                } else {
                                    // Move from solution area to words bank
                                    const wordsBank = document.getElementById(`words-bank-${index}`);
                                    wordsBank.appendChild(wordElement);
                                }

                                // Clear feedback when words are changed
                                const feedbackElement = document.getElementById(`feedback-${index}`);
                                feedbackElement.textContent = '';
                                feedbackElement.className = 'game-feedback';
                            });

                            wordsBank.appendChild(wordElement);
                        });

                        // Add feedback area
                        const feedback = document.createElement('div');
                        feedback.className = 'game-feedback';
                        feedback.id = `feedback-${index}`;
                        sentenceElement.appendChild(feedback);

                        // Add buttons
                        const buttonContainer = document.createElement('div');
                        buttonContainer.className = 'sentence-buttons';

                        const checkButton = document.createElement('button');
                        checkButton.className = 'check-btn';
                        checkButton.textContent = 'Check Answer';
                        checkButton.addEventListener('click', () => checkAnswer(index));
                        buttonContainer.appendChild(checkButton);

                        const showAnswerButton = document.createElement('button');
                        showAnswerButton.className = 'show-answer-btn';
                        showAnswerButton.textContent = 'Show Answer';
                        showAnswerButton.addEventListener('click', () => showAnswer(index));
                        buttonContainer.appendChild(showAnswerButton);

                        const deleteBtn = document.createElement('button');
                        deleteBtn.className = 'delete-btn';
                        deleteBtn.textContent = 'Clear Box';
                        deleteBtn.addEventListener('click', () => {
                            const solutionArea = document.getElementById(`solution-area-${index}`);
                            const wordsBank = document.getElementById(`words-bank-${index}`);

                            // Move all words from solution area back to words bank
                            while (solutionArea.firstChild) {
                                wordsBank.appendChild(solutionArea.firstChild);
                            }

                            // Clear feedback when words are changed
                            const feedbackElement = document.getElementById(`feedback-${index}`);
                            feedbackElement.textContent = '';
                            feedbackElement.className = 'game-feedback';
                        });
                        buttonContainer.appendChild(deleteBtn);

                        sentenceElement.appendChild(buttonContainer);

                        // Add to game container
                        gameContainer.appendChild(sentenceElement);

                        // Initially hide all sentences except the first one
                        if (index > 0) {
                            sentenceElement.style.display = 'none';
                        }
                    });

                    // Check answer function
                    function checkAnswer(sentenceId) {
                        const solutionArea = document.getElementById(`solution-area-${sentenceId}`);
                        const feedbackElement = document.getElementById(`feedback-${sentenceId}`);
                        const sentenceElement = document.getElementById(`sentence-${sentenceId}`);

                        // Get current word order in solution area
                        const currentWords = Array.from(solutionArea.children).map(word => word.textContent);
                        const correctWords = sentences[sentenceId].words;

                        // Check if all words are in the solution area
                        if (currentWords.length !== correctWords.length) {
                            feedbackElement.textContent = '✗ Please use all the words.';
                            feedbackElement.className = 'game-feedback feedback-incorrect';
                            return;
                        }

                        // Check if the order is correct - words are already in correct order
                        const isCorrect = arraysEqual(currentWords, correctWords);

                        if (isCorrect) {
                            feedbackElement.textContent = '✓ Correct! Well done!';
                            feedbackElement.className = 'game-feedback feedback-correct';
                            sentenceElement.classList.add('completed');

                            // Show next sentence if there is one
                            if (sentenceId < sentences.length - 1) {
                                setTimeout(() => {
                                    const nextSentence = document.getElementById(`sentence-${sentenceId + 1}`);
                                    if (nextSentence) {
                                        nextSentence.style.display = 'block';
                                        // Scroll to next sentence
                                        nextSentence.scrollIntoView({ behavior: 'smooth', block: 'start' });
                                    }
                                }, 800);
                            }
                        } else {
                            feedbackElement.textContent = '✗ Not quite right. Try again!';
                            feedbackElement.className = 'game-feedback feedback-incorrect';
                        }
                    }

                    // Show answer function
                    function showAnswer(sentenceId) {
                        const solutionArea = document.getElementById(`solution-area-${sentenceId}`);
                        const wordsBank = document.getElementById(`words-bank-${sentenceId}`);
                        const feedbackElement = document.getElementById(`feedback-${sentenceId}`);
                        const sentenceElement = document.getElementById(`sentence-${sentenceId}`);

                        // Clear both areas
                        solutionArea.innerHTML = '';
                        wordsBank.innerHTML = '';

                        // Add words in correct order to solution area
                        // Words are already in correct order in the sentences array
                        sentences[sentenceId].words.forEach(word => {
                            const wordElement = document.createElement('div');
                            wordElement.className = 'word-box ottoman-text';
                            wordElement.textContent = word;
                            solutionArea.appendChild(wordElement);
                        });

                        // Update feedback
                        feedbackElement.textContent = 'This is the correct order.';
                        feedbackElement.className = 'game-feedback';

                        // Mark as completed
                        sentenceElement.classList.add('completed');

                        // Show next sentence if there is one
                        if (sentenceId < sentences.length - 1) {
                            setTimeout(() => {
                                const nextSentence = document.getElementById(`sentence-${sentenceId + 1}`);
                                if (nextSentence) {
                                    nextSentence.style.display = 'block';
                                    // Scroll to next sentence
                                    nextSentence.scrollIntoView({ behavior: 'smooth', block: 'start' });
                                }
                            }, 800);
                        }
                    }

                    // Helper function to compare arrays
                    function arraysEqual(a, b) {
                        if (a.length !== b.length) return false;
                        return a.every((val, index) => val === b[index]);
                    }
                });
            </script>
        </div>
    </div>

    <div class="section">
        <h2 style="text-align: center;">
            <span class="congrats-ottoman">تبريكات<br>درس بشنجی اكمال ايتدكز</span><br><br>
            <span class="congrats-english" style="display: block; font-size: inherit;">Congratulations<br>You finished Lesson 5</span>
        </h2>
    </div>

    <div class="nav-buttons-container">
        <a href="../../landing_pages/ottoman_lessons_en.html" class="nav-button prev-button">Back to all lessons</a>
    </div>

    <script>
        // --- Matching Game Logic (Generic - Re-verified against L1) ---
        function initializeMatchingGame(ottomanContainerId, englishContainerId, feedbackId, totalPairs) {
            let selected = { ottoman: null, english: null }; let matchCount = 0;
            const ottomanContainer = document.getElementById(ottomanContainerId);
            const englishContainer = document.getElementById(englishContainerId);
            const feedbackElement = document.getElementById(feedbackId);
            if (!ottomanContainer || !englishContainer || !feedbackElement) {
                console.warn(`Matching game initialization skipped: Could not find elements for ${ottomanContainerId}, ${englishContainerId}, or ${feedbackId}`);
                return; // Exit if essential elements are missing
            }
            const shuffle = c => Array.from(c.children).sort(() => .5-Math.random()).forEach(i=>c.appendChild(i));
            // Check if containers have children before shuffling
            if (ottomanContainer.children.length > 0) shuffle(ottomanContainer);
            if (englishContainer.children.length > 0) shuffle(englishContainer);

            const items = document.querySelectorAll(`#${ottomanContainerId} .matching-item, #${englishContainerId} .matching-item`);
            items.forEach(item => {
                const newItem = item.cloneNode(true); item.parentNode.replaceChild(newItem, item); // Prevent duplicate listeners
                newItem.addEventListener('click', function() {
                    if (this.classList.contains('matched')) return;
                    const isOttoman = this.closest(`#${ottomanContainerId}`) !== null;
                    const side = isOttoman ? 'ottoman' : 'english';
                    if (selected[side]) selected[side].classList.remove('selected');
                    this.classList.add('selected'); selected[side] = this;
                    feedbackElement.textContent = ''; // Clear feedback on selection
                    if (selected.ottoman && selected.english) {
                        if (selected.ottoman.dataset.id === selected.english.dataset.id) {
                            // Correct Match
                            ['ottoman', 'english'].forEach(s => { selected[s].classList.remove('selected'); selected[s].classList.add('matched'); });
                            matchCount++;
                            if (matchCount === totalPairs) {
                                feedbackElement.textContent = 'Correct'; // Match L1 final feedback TEXT
                                feedbackElement.className = 'matching-feedback correct'; // Use specific class with L1 styles (black text, large font)
                            } selected = { ottoman: null, english: null };
                        } else { // Incorrect Match
                            feedbackElement.textContent = ''; // L1 doesn't show 'Incorrect Match' text
                            const selO = selected.ottoman, selE = selected.english;
                            setTimeout(() => { if(selO) selO.classList.remove('selected'); if(selE) selE.classList.remove('selected'); }, 800); // Match L1 timeout behavior
                            selected = { ottoman: null, english: null };
                        }
                    }
                });
            });
        }
        document.addEventListener('DOMContentLoaded', function() {
            // Re-initialize all matching games with potentially updated content
            initializeMatchingGame('first-form-ottoman-container', 'first-form-case-container', 'first-form-matching-feedback', 6);
            initializeMatchingGame('second-form-ottoman-container', 'second-form-case-container', 'second-form-matching-feedback', 6);
            initializeMatchingGame('third-form-ottoman-container', 'third-form-case-container', 'third-form-matching-feedback', 6);
             // Added safety checks in initializeMatchingGame to prevent errors if containers are missing
        });
    </script>

</body>
</html>
